/*! For license information please see main.3ec0a4f2.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ie)&&(Ae(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,St,Tt=!1,Et=[],Ct=null,At=null,Nt=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Rt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Sr("animationend"),Er=Sr("animationiteration"),Cr=Sr("animationstart"),Ar=Sr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Er:case Cr:s=mn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Kn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ei={},Ci=Ii(Ei),Ai=Ii(!1),Ni=Ei;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ai),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ni=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Ci),Ti(Ci,e)):Si(Ai),Ti(Ai,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,qi),i}finally{kt=t,ji=!1}}return null}var zi=b.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Gi=Ii(null),Wi=null,Hi=null,Qi=null;function Yi(){Qi=Hi=Wi=null}function $i(e){var t=Gi.current;Si(Gi),e._currentValue=t}function Xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Wi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Wi)throw Error(a(308));Hi=e,Wi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ps|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xs(),r=Js(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Di(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Di(t)?Ni:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ga=0,ka=null,ba=0,wa=[],_a=0,xa=null,Ia=1,Sa="";function Ta(e,t){ma[ga++]=ba,ma[ga++]=ka,ka=e,ba=t}function Ea(e,t,n){wa[_a++]=Ia,wa[_a++]=Sa,wa[_a++]=xa,xa=e;var r=Ia;e=Sa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Sa=a+e}else Ia=1<<a|n<<i|r,Sa=e}function Ca(e){null!==e.return&&(Ta(e,1),Ea(e,1,0))}function Aa(e){for(;e===ka;)ka=ma[--ga],ma[ga]=null,ba=ma[--ga],ma[ga]=null;for(;e===xa;)xa=wa[--_a],wa[_a]=null,Sa=wa[--_a],wa[_a]=null,Ia=wa[--_a],wa[_a]=null}var Na=null,Ra=null,Da=!1,Pa=null;function Oa(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Na=e,Ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Na=e,Ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Sa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Na=e,Ra=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Da){var t=Ra;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Na;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Da=!1,Na=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Da=!1,Na=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Na=e}function Va(e){if(e!==Na)return!1;if(!Da)return Ua(e),Da=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Ra)){if(Ma(e)){for(e=Ra;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ra=null}}else Ra=Na?ci(e.stateNode.nextSibling):null;return!0}function ja(){Ra=Na=null,Da=!1}function Ba(e){null===Pa?Pa=[e]:Pa.push(e)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Ga(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ka(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Da&&Ta(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Da&&Ta(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Da&&Ta(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Da&&Ta(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Da&&Ta(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Da&&Ta(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=qa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Wa=Ga(!0),Ha=Ga(!1),Qa={},Ya=Ii(Qa),$a=Ii(Qa),Xa=Ii(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Ti(Xa,t),Ti($a,e),Ti(Ya,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ya),Ti(Ya,t)}function eo(){Si(Ya),Si($a),Si(Xa)}function to(e){Ja(Xa.current);var t=Ja(Ya.current),n=se(t,e.type);t!==n&&(Ti($a,e),Ti(Ya,n))}function no(e){$a.current===e&&(Si(Ya),Si($a))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,yo=0,mo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==yo;return yo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Ps|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ps|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Vo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,No.bind(null,n,r,i,t),void 0,null),null===Ts)throw Error(a(349));0!==(30&co)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Zs(e,1,-1)}function Ro(e,t,n){return n((function(){Do(t)&&Zs(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Po(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Fo(2048,8,e,t)}function jo(e,t){return Fo(4,2,e,t)}function Bo(e,t){return Fo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,qo.bind(null,t,e),n)}function Ko(){}function Go(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ps|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Yo(){return xo().memoizedState}function $o(e,t,n){var r=Js(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r))}function Xo(e,t,n){var r=Js(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r)}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$o.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Po,useDebugValue:Ko,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Qo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Da){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ts)throw Error(a(349));0!==(30&co)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ts.identifierPrefix;if(Da){var n=Sa;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Go,useContext:Zi,useEffect:Vo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Wo,useReducer:So,useRef:Lo,useState:function(){return So(Io)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(xo(),fo.memoizedState,e)},useTransition:function(){return[So(Io)[0],xo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Go,useContext:Zi,useEffect:Vo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Wo,useReducer:To,useRef:Lo,useState:function(){return To(Io)},useDebugValue:Ko,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Ho(t,fo.memoizedState,e)},useTransition:function(){return[To(Io)[0],xo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,qs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function mu(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Di(t.type)&&Pi(),gu(t),null;case 3:return r=t.stateNode,eo(),Si(Ai),Si(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Pa&&(ac(Pa),Pa=null))),gu(t),null;case 5:no(t);var i=Ja(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Ja(Ya.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Xa.current),Ja(Ya.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Si(ro),r=t.memoizedState,Da&&null!==Ra&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ra;r;)r=ci(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Va(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Pa&&(ac(Pa),Pa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Va(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Rs&&(Rs=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&qr(t.stateNode.containerInfo),gu(t),null;case 10:return $i(t.type._context),gu(t),null;case 19:if(Si(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)mu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,mu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Vs&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),mu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Da)return gu(t),null}else 2*Xe()-o.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,Ti(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&As)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var bu=b.ReactCurrentOwner,wu=!1;function _u(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Wa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||wu?(Da&&n&&Ca(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Tu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ns,As),As|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ns,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ns,As),As|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ns,As),As|=r;return _u(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Di(n)?Ni:Ci.current;return a=Ri(t,a),Ji(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||wu?(Da&&r&&Ca(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Au(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ya(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Ri(t,c=Di(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ki(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Ri(t,s=Di(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Wa(t,e.child,null,a),t.child=Wa(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Za(e,t.containerInfo)}function Du(e,t,n,r,i){return ja(),Ba(i),t.flags|=256,_u(e,t,n,r),t.child}var Pu={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Pu,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,ju(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Wa(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Pu,u);if(0===(1&t.mode))t=ju(e,t,n,null);else if("$!"===r.data)t=ju(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Ts)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=ju(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ra=ci(r.nextSibling),Na=t,Da=!0,Pa=null,null!==n&&(wa[_a++]=Ia,wa[_a++]=Sa,wa[_a++]=xa,Ia=n.id,Sa=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Dc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Vu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Dc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Dc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ju(e,t,n,r){return null!==r&&Ba(r),Wa(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xi(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ps|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){switch(Aa(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Si(Ai),Si(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Si(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ro),null;case 4:return eo(),null;case 10:return $i(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Wu=!1,Hu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,Yu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Xu(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Ju=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Xu(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Hu||$u(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Xu(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Hu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Hu=(r=Hu)||null!==n.memoizedState,cs(e,t,n),Hu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=Xe()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hu=(f=Hu)||l,hs(t,e),Hu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Yu=e,e=e.child;null!==e;){for(l=Yu=e;null!==Yu;){switch(h=(f=Yu).child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:if($u(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:$u(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,Yu=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Yu=e,ys(e,t,n)}function ys(e,t,n){for(var r=0!==(1&e.mode);null!==Yu;){var i=Yu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Wu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Hu;u=Wu;var c=Hu;if(Wu=o,(Hu=s)&&!c)for(Yu=i;null!==Yu;)s=(o=Yu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Yu=s):ks(i);for(;null!==a;)Yu=a,ys(a,t,n),a=a.sibling;Yu=i,Wu=u,Hu=c}ms(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Yu=a):ms(e)}}function ms(e){for(;null!==Yu;){var t=Yu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Hu||512&t.flags&&ts(t)}catch(d){xc(t,t.return,d)}}if(t===e){Yu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yu=n;break}Yu=t.return}}function gs(e){for(;null!==Yu;){var t=Yu;if(t===e){Yu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yu=n;break}Yu=t.return}}function ks(e){for(;null!==Yu;){var t=Yu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Yu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Yu=u;break}Yu=t.return}}var bs,ws=Math.ceil,_s=b.ReactCurrentDispatcher,xs=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Ss=0,Ts=null,Es=null,Cs=0,As=0,Ns=Ii(0),Rs=0,Ds=null,Ps=0,Os=0,Ls=0,Ms=null,Fs=null,Us=0,Vs=1/0,js=null,Bs=!1,qs=null,zs=null,Ks=!1,Gs=null,Ws=0,Hs=0,Qs=null,Ys=-1,$s=0;function Xs(){return 0!==(6&Ss)?Xe():-1!==Ys?Ys:Ys=Xe()}function Js(e){return 0===(1&e.mode)?1:0!==(2&Ss)&&0!==Cs?Cs&-Cs:null!==zi.transition?(0===$s&&($s=vt()),$s):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function Zs(e,t,n){if(50<Hs)throw Hs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Ss)&&r===Ts||(r===Ts&&(0===(2&Ss)&&(Os|=t),4===Rs&&oc(r,Cs)),nc(r,n),1===t&&0===Ss&&0===(1&e.mode)&&(Vs=Xe()+500,Vi&&qi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ts||null!==ea)&&0!==(1&e.mode)&&0===(2&Ss)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ts?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===Ss&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ys=-1,$s=0,0!==(6&Ss))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ts?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Ss;Ss|=2;var o=dc();for(Ts===e&&Cs===t||(js=null,Vs=Xe()+500,fc(e,t));;)try{mc();break}catch(s){hc(e,s)}Yi(),_s.current=o,Ss=i,null!==Es?t=0:(Ts=null,Cs=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ds,fc(e,0),oc(e,r),nc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ds,fc(e,0),oc(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fs,js);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fs,js),t);break}bc(e,Fs,js);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fs,js),r);break}bc(e,Fs,js);break;default:throw Error(a(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Ss))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ds,fc(e,0),oc(e,t),nc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fs,js),nc(e,Xe()),null}function sc(e,t){var n=Ss;Ss|=1;try{return e(t)}finally{0===(Ss=n)&&(Vs=Xe()+500,Vi&&qi())}}function cc(e){null!==Gs&&0===Gs.tag&&0===(6&Ss)&&wc();var t=Ss;Ss|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Ss=t))&&qi()}}function lc(){As=Ns.current,Si(Ns)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Es)for(n=Es.return;null!==n;){var r=n;switch(Aa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:eo(),Si(Ai),Si(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Si(ro);break;case 10:$i(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ts=e,Es=e=Dc(e.current,null),Cs=As=t,Rs=0,Ds=null,Ls=Os=Ps=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Es;try{if(Yi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,yo=0,xs.current=null,null===n||null===n.return){Rs=1,Ds=t,Es=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,yu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Da&&1&s.mode){var m=vu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yu(m,u,s,0,t),Ba(c);break e}}o=c,4!==Rs&&(Rs=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zs||!zs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(b){t=b,Es===n&&null!==n&&(Es=n=n.return);continue}break}}function dc(){var e=_s.current;return _s.current=nu,null===e?nu:e}function pc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ts||0===(268435455&Ps)&&0===(268435455&Os)||oc(Ts,Cs)}function vc(e,t){var n=Ss;Ss|=2;var r=dc();for(Ts===e&&Cs===t||(js=null,fc(e,t));;)try{yc();break}catch(i){hc(e,i)}if(Yi(),Ss=n,_s.current=r,null!==Es)throw Error(a(261));return Ts=null,Cs=0,Rs}function yc(){for(;null!==Es;)gc(Es)}function mc(){for(;null!==Es&&!Ye();)gc(Es)}function gc(e){var t=bs(e.alternate,e,As);e.memoizedProps=e.pendingProps,null===t?kc(e):Es=t,xs.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,As)))return void(Es=n)}else{if(null!==(n=Gu(n,t)))return n.flags&=32767,void(Es=n);if(null===e)return Rs=6,void(Es=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Es=t);Es=t=e}while(null!==t);0===Rs&&(Rs=5)}function bc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Gs);if(0!==(6&Ss))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ts&&(Es=Ts=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Ss;Ss|=4,xs.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Yu=t;null!==Yu;)if(e=(t=Yu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yu=e;else for(;null!==Yu;){t=Yu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Ki(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Yu=e;break}Yu=t.return}v=Ju,Ju=!1}(e,n),ds(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),$e(),Ss=s,kt=u,Is.transition=o}else e.current=n;if(Ks&&(Ks=!1,Gs=e,Ws=i),0===(o=e.pendingLanes)&&(zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bs)throw Bs=!1,e=qs,qs=null,e;0!==(1&Ws)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Hs++:(Hs=0,Qs=e):Hs=0,qi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function wc(){if(null!==Gs){var e=bt(Ws),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Gs)var r=!1;else{if(e=Gs,Gs=null,Ws=0,0!==(6&Ss))throw Error(a(331));var i=Ss;for(Ss|=4,Yu=e.current;null!==Yu;){var o=Yu,u=o.child;if(0!==(16&Yu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Yu=l;null!==Yu;){var f=Yu;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Yu=h;else for(;null!==Yu;){var d=(f=Yu).sibling,p=f.return;if(ns(f),f===l){Yu=null;break}if(null!==d){d.return=p,Yu=d;break}Yu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Yu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Yu=u;else e:for(;null!==Yu;){if(0!==(2048&(o=Yu).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Yu=g;break e}Yu=o.return}}var k=e.current;for(Yu=k;null!==Yu;){var b=(u=Yu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Yu=b;else e:for(u=k;null!==Yu;){if(0!==(2048&(s=Yu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Yu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Yu=w;break e}Yu=s.return}}if(Ss=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function _c(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=Xs(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=Xs(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xs(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(Cs&n)===n&&(4===Rs||3===Rs&&(130023424&Cs)===Cs&&500>Xe()-Us?fc(e,0):Ls|=n),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Xs();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Nc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Nc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Nc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case E:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Nc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ei;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=ia(r=Xs(),i=Js(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=Xs(),o=Js(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}bs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),ja();break;case 5:to(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Gi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ti(ro,1&ro.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Da&&0!==(1048576&t.flags)&&Ea(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ri(t,Ci.current);Ji(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,Da&&o&&Ca(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=Ki(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Ki(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Au(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Du(e,t,r,n,i=Error(a(424)));break e}for(Ra=ci(t.stateNode.containerInfo.firstChild),Na=t,Da=!0,Pa=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=Ku(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wa(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(Gi,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Xi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Xi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Zi(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=Ki(r=t.type,t.pendingProps),Iu(e,t,r,i=Ki(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ji(t,n),pa(t,r,i),ya(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Tu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Xe()),0===(6&Ss)&&(Vs=Xe()+500,qi()))}break;case 13:var r=Xs();cc((function(){return Zs(e,1,r)})),Wc(e,1)}},_t=function(e){13===e.tag&&(Zs(e,134217728,Xs()),Wc(e,134217728))},xt=function(e){if(13===e.tag){var t=Xs(),n=Js(e);Zs(e,n,t),Wc(e,n)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ae=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ee,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,T=-1,E=5,C=-1;function A(){return!(t.unstable_now()-C<E)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=N,x=function(){D.postMessage(null)}}else x=function(){m(N,0)};function P(e){S=e,I||(I=!0,x())}function O(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ae},SDK_VERSION:function(){return At},_DEFAULT_ENTRY_NAME:function(){return yt},_addComponent:function(){return bt},_addOrOverwriteComponent:function(){return wt},_apps:function(){return gt},_clearComponents:function(){return St},_components:function(){return kt},_getProvider:function(){return xt},_registerComponent:function(){return _t},_removeServiceInstance:function(){return It},deleteApp:function(){return Pt},getApp:function(){return Rt},getApps:function(){return Dt},initializeApp:function(){return Nt},onLog:function(){return Mt},registerVersion:function(){return Lt},setLogLevel:function(){return Ft}});var t,r=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function y(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function _(e,t){if(!e)throw new Error(t)}function x(e,t,n){void 0===n&&(n="/");var r=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||_(!1),a.relativePath=a.relativePath.slice(r.length));var o=D([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&_(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:E(o,e.index),routesMeta:u})})),t}var S=/^:\w+$/,T=function(e){return"*"===e};function E(e,t){var n=e.split("/"),r=n.length;return n.some(T)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!T(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=A({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:P(D([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function N(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){F()||_(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=j(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):D([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function F(){return null!=(0,r.useContext)(b)}function U(){return F()||_(!1),(0,r.useContext)(b).location}function V(){F()||_(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=U().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=N(e,JSON.parse(o),a);"/"!==t&&(i.pathname=D([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function j(e){var t=(0,r.useContext)(w).matches,n=U().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return N(e,JSON.parse(i),n)}),[e,i,n])}function B(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function q(e){_(!1)}function z(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;F()&&_(!1);var d=P(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,y=v.pathname,m=void 0===y?"/":y,w=v.search,x=void 0===w?"":w,I=v.hash,S=void 0===I?"":I,T=v.state,E=void 0===T?null:T,C=v.key,A=void 0===C?"default":C,N=(0,r.useMemo)((function(){var e=R(m,d);return null==e?null:{pathname:e,search:x,hash:S,state:E,key:A}}),[d,m,x,S,E,A]);return null==N?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:N,navigationType:c}}))}function K(e){var t=e.children,n=e.location;return function(e,t){F()||_(!1);var n,i=(0,r.useContext)(w).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,U());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||_(!1),n=l}else n=s;var f=n.pathname||"/",h=x(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return B(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:D([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,e.pathnameBase])})})),i)}(G(t),n)}function G(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==q&&_(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=G(e.props.children)),t.push(n)}else t.push.apply(t,G(e.props.children))})),t}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function Y(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){E(-1*u)}},E(u))}}else T(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],b=v(),w=v();function _(e){return"string"===typeof e?e:m(e)}function x(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:y()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},_(e)]}function S(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function T(e){u=e;var t=a();c=t[0],k=t[1],b.call({action:u,location:k})}function E(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:_,push:function e(n,a){var o=t.Push,u=x(n,a);if(S(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}T(o)}},replace:function e(n,r){var a=t.Replace,o=x(n,r);if(S(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),T(a)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(h,p),function(){t(),w.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(z,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}var $=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=H(e,Q),f=M(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=V(),s=U(),c=j(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||m(s)===m(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",W({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ue(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t){if(t&&("object"===se(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function le(e){var t=ue();return function(){var n,r=oe(e);if(t){var i=oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ce(this,n)}}function fe(e,t,n){return fe=ue()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ie(i,n.prototype),i},fe.apply(null,arguments)}function he(e){var t="function"===typeof Map?new Map:void 0;return he=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return fe(e,arguments,oe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ie(n,e)},he(e)}var de=n(757),pe=n.n(de),ve=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ve(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},me=function(e){return function(e){var t=ve(e);return ye.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ge=function(e){try{return ye.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ke(e[n],t[n]));return e}var be=function(){function e(){var t=this;Z(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return te(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function we(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(a)),""].join(".")}function _e(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function xe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Se(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Te(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ee(){var e=_e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ce(){return"object"===typeof indexedDB}var Ae=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(re(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(re(a),Ne.prototype.create),a}return te(n)}(he(Error)),Ne=function(){function e(t,n,r){Z(this,e),this.service=t,this.serviceName=n,this.errors=r}return te(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Re(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ae(n,a,t);return o}}]),e}();function Re(e,t){return e.replace(De,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var De=/\{\$([^}]+)}/g;function Pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Oe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Le(u)&&Le(s)){if(!Oe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Le(e){return null!==e&&"object"===typeof e}function Me(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Fe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ue(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ve(e,t){var n=new je(e,t);return n.subscribe.bind(n)}var je=function(){function e(t,n){var r=this;Z(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return te(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ne(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Be),void 0===r.error&&(r.error=Be),void 0===r.complete&&(r.complete=Be);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Be(){}function qe(e){return e&&e._delegate?e._delegate:e}function ze(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Ke=function(){function e(t){Z(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return te(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new Ge(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new We(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Ge=function(){function e(t){var n=this;Z(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return te(e,[{key:"objectStore",value:function(e){return new We(this._transaction.objectStore(e))}}]),e}(),We=function(){function e(t){Z(this,e),this._store=t}return te(e,[{key:"index",value:function(e){return new He(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new He(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return ze(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return ze(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return ze(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return ze(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),He=function(){function e(t){Z(this,e),this._index=t}return te(e,[{key:"get",value:function(e){return ze(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function Qe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ye(e){return function(e){if(Array.isArray(e))return o(e)}(e)||Qe(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){$e(a,r,i,o,u,"next",e)}function u(e){$e(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Je=function(){function e(t,n,r){Z(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return te(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ze="[DEFAULT]",et=function(){function e(t,n){Z(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return te(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new be;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ze})}catch(s){}var t,n=ne(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Xe(de.mark((function e(){var t;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ye(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ye(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ne(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(L_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ze?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(L_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.component?this.component.multipleInstances?e:Ze:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var tt,nt,rt=function(){function e(t){Z(this,e),this.name=t,this.providers=new Map}return te(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new et(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),it=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(nt||(nt={}));var at,ot,ut={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},st=nt.INFO,ct=(X(tt={},nt.DEBUG,"log"),X(tt,nt.VERBOSE,"log"),X(tt,nt.INFO,"info"),X(tt,nt.WARN,"warn"),X(tt,nt.ERROR,"error"),tt),lt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ct[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ft=function(){function e(t){Z(this,e),this.name=t,this._logLevel=st,this._logHandler=lt,this._userLogHandler=null,it.push(this)}return te(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in nt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ut[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nt.DEBUG].concat(t)),this._logHandler.apply(this,[this,nt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,nt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nt.INFO].concat(t)),this._logHandler.apply(this,[this,nt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nt.WARN].concat(t)),this._logHandler.apply(this,[this,nt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nt.ERROR].concat(t)),this._logHandler.apply(this,[this,nt.ERROR].concat(t))}}]),e}();var ht=function(){function e(t){Z(this,e),this.container=t}return te(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var dt="@firebase/app",pt="0.7.22",vt=new ft("@firebase/app"),yt="[DEFAULT]",mt=(X(at={},dt,"fire-core"),X(at,"@firebase/app-compat","fire-core-compat"),X(at,"@firebase/analytics","fire-analytics"),X(at,"@firebase/analytics-compat","fire-analytics-compat"),X(at,"@firebase/app-check","fire-app-check"),X(at,"@firebase/app-check-compat","fire-app-check-compat"),X(at,"@firebase/auth","fire-auth"),X(at,"@firebase/auth-compat","fire-auth-compat"),X(at,"@firebase/database","fire-rtdb"),X(at,"@firebase/database-compat","fire-rtdb-compat"),X(at,"@firebase/functions","fire-fn"),X(at,"@firebase/functions-compat","fire-fn-compat"),X(at,"@firebase/installations","fire-iid"),X(at,"@firebase/installations-compat","fire-iid-compat"),X(at,"@firebase/messaging","fire-fcm"),X(at,"@firebase/messaging-compat","fire-fcm-compat"),X(at,"@firebase/performance","fire-perf"),X(at,"@firebase/performance-compat","fire-perf-compat"),X(at,"@firebase/remote-config","fire-rc"),X(at,"@firebase/remote-config-compat","fire-rc-compat"),X(at,"@firebase/storage","fire-gcs"),X(at,"@firebase/storage-compat","fire-gcs-compat"),X(at,"@firebase/firestore","fire-fst"),X(at,"@firebase/firestore-compat","fire-fst-compat"),X(at,"fire-js","fire-js"),X(at,"firebase","fire-js-all"),at),gt=new Map,kt=new Map;function bt(e,t){try{e.container.addComponent(t)}catch(n){vt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function wt(e,t){e.container.addOrOverwriteComponent(t)}function _t(e){var t=e.name;if(kt.has(t))return vt.debug("There were multiple attempts to register component ".concat(t,".")),!1;kt.set(t,e);var n,r=ne(gt.values());try{for(r.s();!(n=r.n()).done;){bt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function xt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function It(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yt;xt(e,t).clearInstance(n)}function St(){kt.clear()}var Tt=(X(ot={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X(ot,"bad-app-name","Illegal App name: '{$appName}"),X(ot,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),X(ot,"app-deleted","Firebase App named '{$appName}' already deleted"),X(ot,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),X(ot,"invalid-log-argument","First argument to `onLog` must be null or a function."),X(ot,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),X(ot,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),X(ot,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),X(ot,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ot),Et=new Ne("app","Firebase",Tt),Ct=function(){function e(t,n,r){var i=this;Z(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",(function(){return i}),"PUBLIC"))}return te(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Et.create("app-deleted",{appName:this._name})}}]),e}(),At="9.7.0";function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:yt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Et.create("bad-app-name",{appName:String(i)});var a=gt.get(i);if(a){if(Oe(e,a.options)&&Oe(r,a.config))return a;throw Et.create("duplicate-app",{appName:i})}var o,u=new rt(i),s=ne(kt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ct(e,r,u);return gt.set(i,l),l}function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=gt.get(e);if(!t)throw Et.create("no-app",{appName:e});return t}function Dt(){return Array.from(gt.values())}function Pt(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Xe(de.mark((function e(t){var n;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!gt.has(n)){e.next=6;break}return gt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(e,t,n){var r,i=null!==(r=mt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void vt.warn(u.join(" "))}_t(new Je("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Mt(e,t){if(null!==e&&"function"!==typeof e)throw Et.create("invalid-log-argument");!function(e,t){var n,r=ne(it);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ut[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:nt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ft(e){var t;t=e,it.forEach((function(e){e.setLogLevel(t)}))}var Ut="firebase-heartbeat-store",Vt=null;function jt(){var e,t,n;return Vt||(Vt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Ut)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Ke(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Ke(a.result),e.oldVersion,e.newVersion,new Ge(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Et.create("storage-open",{originalErrorMessage:e.message})}))),Vt}function Bt(e){return qt.apply(this,arguments)}function qt(){return qt=Xe(de.mark((function e(t){var n;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ut).objectStore(Ut).get(Gt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Et.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),qt.apply(this,arguments)}function zt(e,t){return Kt.apply(this,arguments)}function Kt(){return Kt=Xe(de.mark((function e(t,n){var r,i,a;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt();case 3:return r=e.sent,i=r.transaction(Ut,"readwrite"),a=i.objectStore(Ut),e.next=8,a.put(n,Gt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Et.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Kt.apply(this,arguments)}function Gt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Wt=function(){function e(t){var n=this;Z(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Xt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return te(e,[{key:"triggerHeartbeat",value:function(){var e=Xe(de.mark((function e(){var t,n,r;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ht(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Xe(de.mark((function e(){var t,n,r,i,a;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ht(),n=Qt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=me(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ht(){return(new Date).toISOString().substring(0,10)}function Qt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ne(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Jt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Jt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Yt,$t,Xt=function(){function e(t){Z(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return te(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Xe(de.mark((function e(){return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Xe(de.mark((function e(){var t;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Bt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Xe(de.mark((function e(t){var n,r;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Xe(de.mark((function e(t){var n,r;return de.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ye(r.heartbeats),Ye(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Jt(e){return me(JSON.stringify({version:2,heartbeats:e})).length}Yt="",_t(new Je("platform-logger",(function(e){return new ht(e)}),"PRIVATE")),_t(new Je("heartbeat",(function(e){return new Wt(e)}),"PRIVATE")),Lt(dt,pt,Yt),Lt(dt,pt,"esm2017"),Lt("fire-js","");var Zt=function(){function e(t,n){var r=this;Z(this,e),this._delegate=t,this.firebase=n,bt(t,new Je("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return te(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Pt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){bt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){wt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),en=(X($t={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X($t,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$t),tn=new Ne("app-compat","Firebase",en);var nn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Pe(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Lt,setLogLevel:Ft,onLog:Mt,apps:null,SDK_VERSION:At,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(_t(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw tn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ke(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Pe(n,e=e||yt))throw tn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Zt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ke(n,e)},createSubscribe:Ve,ErrorFactory:Ne,deepExtend:ke}),n}(),rn=new ft("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){rn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var an=self.firebase.SDK_VERSION;an&&an.indexOf("LITE")>=0&&rn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var on=nn;!function(e){Lt("@firebase/app-compat","0.1.23",e)}();function un(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}function sn(){return sn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=un(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},sn.apply(this,arguments)}on.registerVersion("firebase","9.7.0","app-compat");function cn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ln;Object.create;var fn="facebook.com",hn="github.com",dn="google.com",pn="password",vn="twitter.com",yn="EMAIL_SIGNIN",mn="PASSWORD_RESET",gn="RECOVER_EMAIL",kn="REVERT_SECOND_FACTOR_ADDITION",bn="VERIFY_AND_CHANGE_EMAIL",wn="VERIFY_EMAIL";function _n(){return X({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var xn=function(){var e;return X(e={},"admin-restricted-operation","This operation is restricted to administrators only."),X(e,"argument-error",""),X(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),X(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),X(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),X(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),X(e,"cordova-not-ready","Cordova framework is not ready."),X(e,"cors-unsupported","This browser is not supported."),X(e,"credential-already-in-use","This credential is already associated with a different user account."),X(e,"custom-token-mismatch","The custom token corresponds to a different audience."),X(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),X(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),X(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),X(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),X(e,"email-already-in-use","The email address is already in use by another account."),X(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),X(e,"expired-action-code","The action code has expired."),X(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),X(e,"internal-error","An internal AuthError has occurred."),X(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),X(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),X(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),X(e,"invalid-auth-event","An internal AuthError has occurred."),X(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),X(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),X(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),X(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),X(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),X(e,"invalid-email","The email address is badly formatted."),X(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),X(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),X(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),X(e,"invalid-credential","The supplied auth credential is malformed or has expired."),X(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),X(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),X(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),X(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),X(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),X(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),X(e,"wrong-password","The password is invalid or the user does not have a password."),X(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),X(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),X(e,"invalid-provider-id","The specified provider ID is invalid."),X(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),X(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),X(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),X(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),X(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),X(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),X(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),X(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),X(e,"missing-continue-uri","A continue URL must be provided in the request."),X(e,"missing-iframe-start","An internal AuthError has occurred."),X(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),X(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),X(e,"missing-multi-factor-info","No second factor identifier is provided."),X(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),X(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),X(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),X(e,"app-deleted","This instance of FirebaseApp has been deleted."),X(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),X(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),X(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),X(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),X(e,"no-auth-event","An internal AuthError has occurred."),X(e,"no-such-provider","User was not linked to an account with the given provider."),X(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),X(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),X(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),X(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),X(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),X(e,"provider-already-linked","User can only be linked to one identity for the given provider."),X(e,"quota-exceeded","The project's quota for this operation has been exceeded."),X(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),X(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),X(e,"rejected-credential","The request contains malformed or mismatching credentials."),X(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),X(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),X(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),X(e,"timeout","The operation has timed out."),X(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),X(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),X(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),X(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),X(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),X(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),X(e,"unverified-email","The operation requires a verified email."),X(e,"user-cancelled","The user did not grant your application the permissions it requested."),X(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),X(e,"user-disabled","The user account has been disabled by an administrator."),X(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),X(e,"user-signed-out",""),X(e,"weak-password","The password must be 6 characters long or more."),X(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),X(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},In=_n,Sn=new Ne("auth","Firebase",_n()),Tn=new ft("@firebase/auth");function En(e){if(Tn.logLevel<=nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Tn.error.apply(Tn,["Auth (".concat(At,"): ").concat(e)].concat(n))}}function Cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Dn.apply(void 0,[e].concat(n))}function An(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dn.apply(void 0,[e].concat(n))}function Nn(e,t,n){var r=Object.assign(Object.assign({},In()),X({},t,n));return new Ne("auth","Firebase",r).create(t,{appName:e.name})}function Rn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Cn(e,"argument-error"),Nn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ye(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ye(o)))}return Sn.create.apply(Sn,[e].concat(n))}function Pn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Dn.apply(void 0,[t].concat(r))}}function On(e){var t="INTERNAL ASSERTION FAILED: "+e;throw En(t),new Error(t)}function Ln(e,t){e||On(t)}var Mn=new Map;function Fn(e){Ln(e instanceof Function,"Expected a class definition");var t=Mn.get(e);return t?(Ln(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Mn.set(e,t),t)}function Un(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vn(){return"http:"===jn()||"https:"===jn()}function jn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Bn=function(){function e(t,n){Z(this,e),this.shortDelay=t,this.longDelay=n,Ln(n>t,"Short delay should be less than long delay!"),this.isMobile=xe()||Te()}return te(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Vn()||Se()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function qn(e,t){Ln(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var zn=function(){function e(){Z(this,e)}return te(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Kn=(X(ln={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),X(ln,"MISSING_CUSTOM_TOKEN","internal-error"),X(ln,"INVALID_IDENTIFIER","invalid-email"),X(ln,"MISSING_CONTINUE_URI","internal-error"),X(ln,"INVALID_PASSWORD","wrong-password"),X(ln,"MISSING_PASSWORD","internal-error"),X(ln,"EMAIL_EXISTS","email-already-in-use"),X(ln,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),X(ln,"INVALID_IDP_RESPONSE","invalid-credential"),X(ln,"INVALID_PENDING_TOKEN","invalid-credential"),X(ln,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),X(ln,"MISSING_REQ_TYPE","internal-error"),X(ln,"EMAIL_NOT_FOUND","user-not-found"),X(ln,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),X(ln,"EXPIRED_OOB_CODE","expired-action-code"),X(ln,"INVALID_OOB_CODE","invalid-action-code"),X(ln,"MISSING_OOB_CODE","internal-error"),X(ln,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),X(ln,"INVALID_ID_TOKEN","invalid-user-token"),X(ln,"TOKEN_EXPIRED","user-token-expired"),X(ln,"USER_NOT_FOUND","user-token-expired"),X(ln,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),X(ln,"INVALID_CODE","invalid-verification-code"),X(ln,"INVALID_SESSION_INFO","invalid-verification-id"),X(ln,"INVALID_TEMPORARY_PROOF","invalid-credential"),X(ln,"MISSING_SESSION_INFO","missing-verification-id"),X(ln,"SESSION_EXPIRED","code-expired"),X(ln,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),X(ln,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),X(ln,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),X(ln,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),X(ln,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),X(ln,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),X(ln,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),X(ln,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),X(ln,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),X(ln,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),X(ln,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ln),Gn=new Bn(3e4,6e4);function Wn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Hn(e,t,n,r){return Qn.apply(this,arguments)}function Qn(){return Qn=Xe(pe().mark((function e(t,n,r,i){var a,o=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Yn(t,a,Xe(pe().mark((function e(){var a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Me(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",zn.fetch()(Zn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Qn.apply(this,arguments)}function Yn(e,t,n){return $n.apply(this,arguments)}function $n(){return($n=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Kn),n),e.prev=2,a=new er(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw tr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw tr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw tr(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Nn(t,p,d);case 30:Cn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ae)){e.next=37;break}throw e.t0;case 37:Cn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Xn(e,t,n,r){return Jn.apply(this,arguments)}function Jn(){return Jn=Xe(pe().mark((function e(t,n,r,i){var a,o,u=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Hn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Cn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Zn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?qn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var er=function(){function e(t){var n=this;Z(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(An(n.auth,"network-request-failed"))}),Gn.get())}))}return te(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function tr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=An(e,t,r);return i.customData._tokenResponse=n,i}function nr(e,t){return rr.apply(this,arguments)}function rr(){return(rr=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e,t){return ar.apply(this,arguments)}function ar(){return(ar=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e,t){return ur.apply(this,arguments)}function ur(){return(ur=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function cr(){return cr=Xe(pe().mark((function e(t){var n,r,i,a,o,u,s=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=qe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Pn((a=fr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:sr(lr(a.auth_time)),issuedAtTime:sr(lr(a.iat)),expirationTime:sr(lr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),cr.apply(this,arguments)}function lr(e){return 1e3*Number(e)}function fr(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return En("JWT malformed, contained fewer than 3 sections"),null;try{var a=ge(r);return a?JSON.parse(a):(En("Failed to decode base64 JWT payload"),null)}catch(o){return En("Caught error parsing JWT payload as JSON",o),null}}function hr(e,t){return dr.apply(this,arguments)}function dr(){return dr=Xe(pe().mark((function e(t,n){var r=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ae&&pr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),dr.apply(this,arguments)}function pr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var vr=function(){function e(t){Z(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return te(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),yr=function(){function e(t,n){Z(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return te(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function mr(e){return gr.apply(this,arguments)}function gr(){return gr=Xe(pe().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,hr(t,or(r,{idToken:i}));case 6:Pn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?wr(o.providerUserInfo):[],s=br(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new yr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function kr(){return(kr=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qe(t),e.next=3,mr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function br(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ye(n),Ye(t))}function wr(e){return e.map((function(e){var t=e.providerId,n=cn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function _r(e,t){return xr.apply(this,arguments)}function xr(){return(xr=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t,{},Xe(pe().mark((function e(){var r,i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Me({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Zn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",zn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ir=function(){function e(){Z(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return te(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Pn(e.idToken,"internal-error"),Pn("undefined"!==typeof e.idToken,"internal-error"),Pn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=fr(e);return Pn(t,"internal-error"),Pn("undefined"!==typeof t.exp,"internal-error"),Pn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Xe(pe().mark((function e(t){var n,r=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Pn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return On("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Pn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Pn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Pn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Sr(e,t){Pn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Tr=function(){function e(t){Z(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=cn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ye(a.providerData):[],this.metadata=new yr(a.createdAt||void 0,a.lastLoginAt||void 0)}return te(e,[{key:"getIdToken",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Pn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return cr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return kr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Pn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Pn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Xe(pe().mark((function e(t){var n,r,i=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,mr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,hr(this,nr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Pn(k&&x,t,"internal-error");var I=Ir.fromJSON(this.name,x);Pn("string"===typeof k,t,"internal-error"),Sr(f,t.name),Sr(h,t.name),Pn("boolean"===typeof b,t,"internal-error"),Pn("boolean"===typeof w,t,"internal-error"),Sr(d,t.name),Sr(p,t.name),Sr(v,t.name),Sr(y,t.name),Sr(m,t.name),Sr(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=Xe(pe().mark((function t(n,r){var i,a,o,u=arguments;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Ir).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,mr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Er=function(){function e(){Z(this,e),this.type="NONE",this.storage={}}return te(e,[{key:"_isAvailable",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Er.type="NONE";var Cr=Er;function Ar(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Nr=function(){function e(t,n,r){Z(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ar(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ar("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return te(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Tr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Xe(pe().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Fn(Cr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Fn(Cr),u=Ar(i,n.config.apiKey,n.name),s=null,c=ne(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Tr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Rr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Lr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Dr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fr(t))return"Blackberry";if(Ur(t))return"Webos";if(Pr(t))return"Safari";if((t.includes("chrome/")||Or(t))&&!t.includes("edge/"))return"Chrome";if(Mr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/firefox\//i.test(e)}function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/crios\//i.test(e)}function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/iemobile/i.test(e)}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/android/i.test(e)}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/blackberry/i.test(e)}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/webos/i.test(e)}function Vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/iphone|ipad|ipod/i.test(e)}function jr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return Vr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Br(){return Ee()&&10===document.documentMode}function qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return Vr(e)||Mr(e)||Ur(e)||Fr(e)||/windows phone/i.test(e)||Lr(e)}function zr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Rr(_e());break;case"Worker":t="".concat(Rr(_e()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(At,"/").concat(r)}var Kr=function(){function e(t,n,r){Z(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wr(this),this.idTokenSubscription=new Wr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return te(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Fn(t)),this._initializationPromise=this.queue(Xe(pe().mark((function r(){var i,a;return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Nr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Xe(pe().mark((function e(t){var n,r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Pn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?qe(t):null)&&Pn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Xe(pe().mark((function e(t){var n=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Pn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Xe(pe().mark((function n(){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Fn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ne("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Pn(n=t&&Fn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Nr.create(this,[Fn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Xe(pe().mark((function e(t){var n=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Pn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Pn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Xe(pe().mark((function e(){var t,n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Gr(e){return qe(e)}var Wr=function(){function e(t){var n=this;Z(this,e),this.auth=t,this.observer=null,this.addObserver=Ve((function(e){return n.observer=e}))}return te(e,[{key:"next",get:function(){return Pn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Hr(e,t,n){var r=Gr(e);Pn(r._canInitEmulator,r,"emulator-config-failed"),Pn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Qr(t),o=function(e){var t=Qr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Yr(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Yr(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var $r=function(){function e(t,n){Z(this,e),this.providerId=t,this.signInMethod=n}return te(e,[{key:"toJSON",value:function(){return On("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return On("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return On("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return On("not implemented")}}]),e}();function Xr(e,t){return Jr.apply(this,arguments)}function Jr(){return(Jr=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:resetPassword",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zr(e,t){return ei.apply(this,arguments)}function ei(){return(ei=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:update",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ri(e,t){return ii.apply(this,arguments)}function ii(){return(ii=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithPassword",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ai(e,t){return oi.apply(this,arguments)}function oi(){return(oi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:sendOobCode",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ui(e,t){return si.apply(this,arguments)}function si(){return(si=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return(li=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(e,t){return hi.apply(this,arguments)}function hi(){return(hi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return(pi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithEmailLink",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithEmailLink",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ki=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Z(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return te(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ri(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",vi(t,{email:this._email,oobCode:this._password}));case 5:Cn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Zr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",mi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Cn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}($r);function bi(e,t){return wi.apply(this,arguments)}function wi(){return(wi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithIdp",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _i=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return te(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return bi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Me(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=cn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}($r);function xi(e,t){return Ii.apply(this,arguments)}function Ii(){return(Ii=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:sendVerificationCode",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Si(){return(Si=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithPhoneNumber",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ti(){return(Ti=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(t,"POST","/v1/accounts:signInWithPhoneNumber",Wn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw tr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ei=X({},"USER_NOT_FOUND","user-not-found");function Ci(){return(Ci=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithPhoneNumber",Wn(t,r),Ei));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ai=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"phone","phone")).params=e,r}return te(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Si.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ti.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ci.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}($r);var Ni=function(){function e(t){var n,r,i,a,o,u;Z(this,e);var s=Fe(Ue(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Pn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return te(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Fe(Ue(e)).link,n=t?Fe(Ue(t)).deep_link_id:null,r=Fe(Ue(e)).deep_link_id;return(r?Fe(Ue(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(L_){return null}}}]),e}();var Ri=function(){function e(){Z(this,e),this.providerId=e.PROVIDER_ID}return te(e,null,[{key:"credential",value:function(e,t){return ki._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ni.parseLink(t);return Pn(n,"argument-error"),ki._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ri.PROVIDER_ID="password",Ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Di=function(){function e(t){Z(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return te(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Pi=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments)).scopes=[],e}return te(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ye(this.scopes)}}]),n}(Di),Oi=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Pn(e.idToken||e.accessToken,"argument-error"),_i._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Pn("providerId"in t&&"signInMethod"in t,"argument-error"),_i._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Pi),Li=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,"facebook.com")}return te(n,null,[{key:"credential",value:function(e){return _i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(L_){return null}}}]),n}(Pi);Li.FACEBOOK_SIGN_IN_METHOD="facebook.com",Li.PROVIDER_ID="facebook.com";var Mi=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return te(n,null,[{key:"credential",value:function(e,t){return _i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(L_){return null}}}]),n}(Pi);Mi.GOOGLE_SIGN_IN_METHOD="google.com",Mi.PROVIDER_ID="google.com";var Fi=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,"github.com")}return te(n,null,[{key:"credential",value:function(e){return _i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(L_){return null}}}]),n}(Pi);Fi.GITHUB_SIGN_IN_METHOD="github.com",Fi.PROVIDER_ID="github.com";var Ui=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return te(n,[{key:"_getIdTokenResponse",value:function(e){return bi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($r),Vi=function(e){ae(n,e);var t=le(n);function n(e){return Z(this,n),Pn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return te(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ui.fromJSON(e);return Pn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ui._create(r,n)}catch(i){return null}}}]),n}(Di),ji=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,"twitter.com")}return te(n,null,[{key:"credential",value:function(e,t){return _i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(L_){return null}}}]),n}(Pi);function Bi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signUp",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ji.TWITTER_SIGN_IN_METHOD="twitter.com",ji.PROVIDER_ID="twitter.com";var zi=function(){function e(t){Z(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return te(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Xe(pe().mark((function t(n,r,i){var a,o,u,s,c=arguments;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Tr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ki(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Xe(pe().mark((function t(n,r,i){var a;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ki(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ki(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Gi(){return Gi=Xe(pe().mark((function e(t){var n,r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new zi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Bi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,zi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}var Wi=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o,u;return Z(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(re(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return te(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ae);function Hi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wi._fromErrorAndOperation(e,n,t,r);throw n}))}function Qi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Yi(e,t){return $i.apply(this,arguments)}function $i(){return $i=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,Zi(!0,r,n);case 3:return e.t0=ir,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Qi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=Xe(pe().mark((function e(t,n){var r,i,a=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=hr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",zi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Zi(e,t,n){return ea.apply(this,arguments)}function ea(){return(ea=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(n);case 2:i=Qi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Pn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,hr(t,Hi(i,a,n,t),r);case 6:return Pn((o=e.sent).idToken,i,"internal-error"),Pn(u=fr(o.idToken),i,"internal-error"),s=u.sub,Pn(t.uid===s,i,"user-mismatch"),e.abrupt("return",zi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Cn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),na.apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=Xe(pe().mark((function e(t,n){var r,i,a,o,u=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Hi(t,i,n);case 4:return a=e.sent,e.next=7,zi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return(oa=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra(Gr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t){return sa.apply(this,arguments)}function sa(){return(sa=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,Zi(!1,r,n.providerId);case 3:return e.abrupt("return",Xi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return(la=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(qe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return(ha=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xn(t,"POST","/v1/accounts:signInWithCustomToken",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function da(){return(da=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(t),e.next=3,fa(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,zi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pa=function(){function e(t,n){Z(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return te(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?va._fromServerResponse(e,t):Cn(e,"internal-error")}}]),e}(),va=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return te(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(pa);function ya(e,t,n){var r;Pn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Pn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ma(){return(ma=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),a={requestType:"PASSWORD_RESET",email:n},r&&ya(i,a,r),e.next=5,ci(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(){return(ga=Xe(pe().mark((function e(t,n,r){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xr(qe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(){return(ka=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ti(qe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){return wa.apply(this,arguments)}function wa(){return(wa=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,Xr(r,{oobCode:n});case 3:i=e.sent,Pn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Pn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Pn(i.mfaInfo,r,"internal-error");case 13:Pn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=pa._fromServerResponse(Gr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _a(){return(_a=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba(qe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t,n){return Ia.apply(this,arguments)}function Ia(){return(Ia=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gr(t),e.next=3,Bi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,zi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(){return(Sa=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),a={requestType:"EMAIL_SIGNIN",email:n},Pn(r.handleCodeInApp,i,"argument-error"),r&&ya(i,a,r),e.next=6,fi(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(){return(Ta=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),Pn((a=Ri.credentialWithLink(n,r||Un()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",aa(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:createAuthUri",Wn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(){return(Aa=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vn()?Un():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ea(qe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(){return(Na=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ya(r.auth,a,n),e.next=8,ui(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(){return(Ra=Xe(pe().mark((function e(t,n,r){var i,a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ya(i.auth,o,r),e.next=8,di(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(){return(Oa=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s,c;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=qe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,hr(a,Da(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t,n){return Ma.apply(this,arguments)}function Ma(){return(Ma=Xe(pe().mark((function e(t,n,r){var i,a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,hr(t,Zr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fa=te((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Z(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ua=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o;return Z(this,n),(o=t.call(this,e,r,i)).username=a,o}return te(n)}(Fa),Va=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"facebook.com",r)}return te(n)}(Fa),ja=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return te(n)}(Ua),Ba=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"google.com",r)}return te(n)}(Fa),qa=function(e){ae(n,e);var t=le(n);function n(e,r,i){return Z(this,n),t.call(this,e,"twitter.com",r,i)}return te(n)}(Ua);function za(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=fr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Fa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Va(a,i);case"github.com":return new ja(a,i);case"google.com":return new Ba(a,i);case"twitter.com":return new qa(a,i,e.screenName||null);case"custom":case"anonymous":return new Fa(a,null);default:return new Fa(a,r,i)}}(n)}var Ka=function(){function e(t,n){Z(this,e),this.type=t,this.credential=n}return te(e,[{key:"toJSON",value:function(){return{multiFactorSession:X({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ga=function(){function e(t,n,r){Z(this,e),this.session=t,this.hints=n,this.signInResolver=r}return te(e,[{key:"resolveSignIn",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Gr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return pa._fromServerResponse(r,e)}));Pn(i.mfaPendingCredential,r,"internal-error");var o=Ka._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Xe(pe().mark((function e(t){var a,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,zi._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Pn(n.user,r,"internal-error"),e.abrupt("return",zi._forOperation(n.user,n.operationType,u));case 17:Cn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Wa(e,t){return Hn(e,"POST","/v2/accounts/mfaEnrollment:start",Wn(e,t))}var Ha=function(){function e(t){var n=this;Z(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return pa._fromServerResponse(t.auth,e)})))}))}return te(e,[{key:"getSession",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ka,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,hr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Xe(pe().mark((function e(t){var n,r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,hr(this.user,Hn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Wn(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Qa=new WeakMap;var Ya="__sak",$a=function(){function e(t,n){Z(this,e),this.storageRetriever=t,this.type=n}return te(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ya,"1"),this.storage.removeItem(Ya),Promise.resolve(!0)):Promise.resolve(!1)}catch(L_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Xa=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=_e();return Pr(e)||Vr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=qr(),e._shouldAllowMigration=!0,e}return te(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Br()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Xe(pe().mark((function e(t,r){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(oe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe(pe().mark((function e(t){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(oe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(oe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}($a);Xa.type="LOCAL";var Ja=Xa,Za=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return te(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}($a);Za.type="SESSION";var eo=Za;function to(e){return Promise.all(e.map(function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var no=function(){function e(t){Z(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return te(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Xe(pe().mark((function e(t){var n,r,i,a,o,u,s,c;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,to(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ro(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}no.receivers=[];var io=function(){function e(t){Z(this,e),this.target=t,this.handlers=new Set}return te(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Xe(pe().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ro("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ao(){return window}function oo(){return"undefined"!==typeof ao().WorkerGlobalScope&&"function"===typeof ao().importScripts}function uo(){return so.apply(this,arguments)}function so(){return(so=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function co(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var lo="firebaseLocalStorageDb",fo="firebaseLocalStorage",ho="fbase_key",po=function(){function e(t){Z(this,e),this.request=t}return te(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function vo(e,t){return e.transaction([fo],t?"readwrite":"readonly").objectStore(fo)}function yo(){var e=indexedDB.deleteDatabase(lo);return new po(e).toPromise()}function mo(){var e=indexedDB.open(lo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(fo,{keyPath:ho})}catch(r){n(r)}})),e.addEventListener("success",Xe(pe().mark((function n(){var r;return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(fo)){n.next=12;break}return r.close(),n.next=5,yo();case 5:return n.t0=t,n.next=8,mo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vo(t,!0).put((X(i={},ho,n),X(i,"value",r),i)),e.abrupt("return",new po(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function bo(e,t){return wo.apply(this,arguments)}function wo(){return wo=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t,!1).get(n),e.next=3,new po(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function _o(e,t){var n=vo(e,!0).delete(t);return new po(n).toPromise()}var xo=function(){function e(){Z(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return te(e,[{key:"_openDb",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,mo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Xe(pe().mark((function e(){var t=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=no._getInstance(oo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Xe(pe().mark((function e(n,r){var i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Xe(pe().mark((function e(){var t,n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new io(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&co()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,mo();case 5:return t=e.sent,e.next=8,go(t,Ya,"1");case 8:return e.next=10,_o(t,Ya);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Xe(pe().mark((function e(t,n){var r=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return go(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return bo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe(pe().mark((function e(t){var n=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return _o(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Xe(pe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=vo(e,!1).getAll();return new po(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ne(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();xo.type="LOCAL";var Io=xo;function So(e,t){return Hn(e,"POST","/v2/accounts/mfaSignIn:start",Wn(e,t))}function To(e){return Eo.apply(this,arguments)}function Eo(){return(Eo=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=An("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ao(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var No=1e12,Ro=function(){function e(t){Z(this,e),this.auth=t,this.counter=No,this._widgets=new Map}return te(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Do(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||No;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||No;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||No,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Do=function(){function e(t,n,r){var i=this;Z(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Pn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return te(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Po=Ao("rcb"),Oo=new Bn(3e4,6e4),Lo="https://www.google.com/recaptcha/api.js?",Mo=function(){function e(){Z(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ao().grecaptcha}return te(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Pn(Fo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ao().grecaptcha):new Promise((function(r,i){var a=ao().setTimeout((function(){i(An(e,"network-request-failed"))}),Oo.get());ao()[Po]=function(){ao().clearTimeout(a),delete ao()[Po];var o=ao().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(An(e,"internal-error"))},Co("".concat(Lo,"?").concat(Me({onload:Po,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(An(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!ao().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Fo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Uo=function(){function e(){Z(this,e)}return te(e,[{key:"load",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ro(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Vo="recaptcha",jo={theme:"light",type:"image"},Bo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},jo),r=arguments.length>2?arguments[2]:void 0;Z(this,e),this.parameters=n,this.type=Vo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gr(r),this.isInvisible="invisible"===this.parameters.size,Pn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Pn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uo:new Mo,this.validateStartingState()}return te(e,[{key:"verify",value:function(){var e=Xe(pe().mark((function e(){var t,n,r,i=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Pn(!this.parameters.sitekey,this.auth,"argument-error"),Pn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ao()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Pn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Xe(pe().mark((function e(){var t,n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pn(Vn()&&!oo(),this.auth,"internal-error"),e.next=3,qo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,To(this.auth);case 8:Pn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Pn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var zo=function(){function e(t,n){Z(this,e),this.verificationId=t,this.onConfirmation=n}return te(e,[{key:"confirm",value:function(e){var t=Ai._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Ko(){return(Ko=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gr(t),e.next=3,Qo(i,n,qe(r));case 3:return a=e.sent,e.abrupt("return",new zo(a,(function(e){return aa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(e,t,n){return Wo.apply(this,arguments)}function Wo(){return(Wo=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,Zi(!1,i,"phone");case 3:return e.next=5,Qo(i.auth,n,qe(r));case 5:return a=e.sent,e.abrupt("return",new zo(a,(function(e){return ua(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(){return(Ho=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,Qo(i.auth,n,qe(r));case 3:return a=e.sent,e.abrupt("return",new zo(a,(function(e){return ca(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t,n){return Yo.apply(this,arguments)}function Yo(){return Yo=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Pn("string"===typeof a,t,"argument-error"),Pn(r.type===Vo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Pn("enroll"===u.type,t,"internal-error"),e.next=13,Wa(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Pn("signin"===u.type,t,"internal-error"),Pn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,So(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,xi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Yo.apply(this,arguments)}function $o(){return($o=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xi(qe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xo=function(){function e(t){Z(this,e),this.providerId=e.PROVIDER_ID,this.auth=Gr(t)}return te(e,[{key:"verifyPhoneNumber",value:function(e,t){return Qo(this.auth,e,qe(t))}}],[{key:"credential",value:function(e,t){return Ai._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ai._fromTokenResponse(n,r):null}}]),e}();function Jo(e,t){return t?Fn(t):(Pn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xo.PROVIDER_ID="phone",Xo.PHONE_SIGN_IN_METHOD="phone";var Zo=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"custom","custom")).params=e,r}return te(n,[{key:"_getIdTokenResponse",value:function(e){return bi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return bi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return bi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}($r);function eu(e){return ra(e.auth,new Zo(e),e.bypassAuthState)}function tu(e){var t=e.auth,n=e.user;return Pn(n,t,"internal-error"),ta(n,new Zo(e),e.bypassAuthState)}function nu(e){return ru.apply(this,arguments)}function ru(){return(ru=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Pn(r=t.user,n,"internal-error"),e.abrupt("return",Xi(r,new Zo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Z(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return te(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Xe(pe().mark((function t(n,r){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Xe(pe().mark((function e(t){var n,r,i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eu;case"linkViaPopup":case"linkViaRedirect":return nu;case"reauthViaPopup":case"reauthViaRedirect":return tu;default:Cn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),au=new Bn(2e3,1e4);function ou(e,t,n){return uu.apply(this,arguments)}function uu(){return(uu=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gr(t),Rn(t,n,Di),a=Jo(i,r),o=new fu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function su(){return(su=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn((i=qe(t)).auth,n,Di),a=Jo(i.auth,r),o=new fu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return(lu=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn((i=qe(t)).auth,n,Di),a=Jo(i.auth,r),o=new fu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fu=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o){var u;return Z(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=re(u),u}return te(n,[{key:"executeNotNull",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Pn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Xe(pe().mark((function e(){var t,n=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ln(1===this.filter.length,"Popup operations only handle one event"),t=ro(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(An(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(An(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(An(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,au.get())}()}}]),n}(iu);fu.currentPopupAction=null;var hu=new Map,du=function(e){ae(n,e);var t=le(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return te(n,[{key:"execute",value:function(){var e=Xe(pe().mark((function e(){var t,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,pu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,sn(oe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:hu.set(this.auth._key(),t);case 21:return this.bypassAuthState||hu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Xe(pe().mark((function e(t){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",sn(oe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",sn(oe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(iu);function pu(e,t){return vu.apply(this,arguments)}function vu(){return(vu=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ku(n),i=gu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e,t){return mu.apply(this,arguments)}function mu(){return(mu=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gu(t)._set(ku(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e){return Fn(e._redirectPersistence)}function ku(e){return Ar("pendingRedirect",e.config.apiKey,e.name)}function bu(e,t,n){return function(e,t,n){return wu.apply(this,arguments)}(e,t,n)}function wu(){return(wu=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gr(t),Rn(t,n,Di),a=Jo(i,r),e.next=5,yu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(e,t,n){return function(e,t,n){return xu.apply(this,arguments)}(e,t,n)}function xu(){return(xu=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn((i=qe(t)).auth,n,Di),a=Jo(i.auth,r),e.next=5,yu(a,i.auth);case 5:return e.next=7,Nu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e,t,n){return function(e,t,n){return Su.apply(this,arguments)}(e,t,n)}function Su(){return(Su=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn((i=qe(t)).auth,n,Di),a=Jo(i.auth,r),e.next=5,Zi(!1,i,n.providerId);case 5:return e.next=7,yu(a,i.auth);case 7:return e.next=9,Nu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(t)._initializationPromise;case 2:return e.abrupt("return",Cu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(e,t){return Au.apply(this,arguments)}function Au(){return Au=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Gr(t),a=Jo(i,n),o=new du(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Nu(e){return Ru.apply(this,arguments)}function Ru(){return(Ru=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ro("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Du=function(){function e(t){Z(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return te(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ou(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ou(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(An(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Pu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Pu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ou(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Lu(e){return Mu.apply(this,arguments)}function Mu(){return Mu=Xe(pe().mark((function e(t){var n,r=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Hn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}var Fu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uu=/^https?/;function Vu(){return(Vu=Xe(pe().mark((function e(t){var n,r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lu(t);case 4:n=e.sent,r=n.authorizedDomains,i=ne(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ju(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Cn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function ju(e){var t=Un(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Uu.test(r))return!1;if(Fu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bu=new Bn(3e4,6e4);function qu(){var e=ao().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ye(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var zu=null;function Ku(e){return zu=zu||function(e){return new Promise((function(t,n){var r,i,a;function o(){qu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){qu(),n(An(e,"network-request-failed"))},timeout:Bu.get()})}if(null===(i=null===(r=ao().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ao().gapi)||void 0===a?void 0:a.load)){var u=Ao("iframefcb");return ao()[u]=function(){gapi.load?o():n(An(e,"network-request-failed"))},Co("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw zu=null,e}))}(e),zu}var Gu=new Bn(5e3,15e3),Wu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qu(e){var t=e.config;Pn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?qn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:At},i=Hu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Me(r).slice(1))}function Yu(e){return $u.apply(this,arguments)}function $u(){return $u=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ku(t);case 2:return n=e.sent,Pn(r=ao().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Qu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wu,dontclear:!0},(function(e){return new Promise(function(){var n=Xe(pe().mark((function n(r,i){var a,o,u;return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ao().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=An(t,"network-request-failed"),o=ao().setTimeout((function(){i(a)}),Gu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}var Xu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ju="_blank",Zu="http://localhost",es=function(){function e(t){Z(this,e),this.window=t,this.associatedEvent=null}return te(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ts(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Xu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=_e().toLowerCase();n&&(u=Or(l)?Ju:n),Dr(l)&&(t=t||Zu,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(jr(l)&&"_self"!==u)return ns(t||"",u),new es(null);var h=window.open(t||"",u,f);Pn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new es(h)}function ns(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rs="__/auth/handler",is="emulator/auth/handler";function as(e,t,n,r,i,a){Pn(e.config.authDomain,e,"auth-domain-config-required"),Pn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:At,eventId:i};if(t instanceof Di){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Pi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(rs);return qn(t,is)}(e),"?").concat(Me(p).slice(1))}var os="webStorageSupport",us=function(){function e(){Z(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eo,this._completeRedirectFn=Cu}return te(e,[{key:"_openPopup",value:function(){var e=Xe(pe().mark((function e(t,n,r,i){var a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ln(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=as(t,n,r,Un(),i),e.abrupt("return",ts(t,o,ro()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Xe(pe().mark((function e(t,n,r,i){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=as(t,n,r,Un(),i),ao().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ln(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yu(t);case 2:return n=e.sent,r=new Du(t),n.register("authEvent",(function(e){return Pn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(os,{type:os},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Cn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return qr()||Pr()||Vr()}}]),e}(),ss=us,cs=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"phone")).credential=e,r}return te(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Hn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Wn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Hn(e,"POST","/v2/accounts/mfaSignIn:finalize",Wn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Z(this,e),this.factorId=t}return te(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return On("unexpected MultiFactorSessionType")}}}]),e}()),ls=function(){function e(){Z(this,e)}return te(e,null,[{key:"assertion",value:function(e){return cs._fromCredential(e)}}]),e}();ls.FACTOR_ID="phone";var fs,hs="@firebase/auth",ds="0.19.12",ps=function(){function e(t){Z(this,e),this.auth=t,this.internalListeners=new Map}return te(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Pn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function vs(){return window}fs="Browser",_t(new Je("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Pn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Pn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:fs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zr(fs)},i=new Kr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),_t(new Je("auth-internal",(function(e){return function(e){return new ps(e)}(Gr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(hs,ds,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(fs)),Lt(hs,ds,"esm2017");function ys(e,t,n){return ms.apply(this,arguments)}function ms(){return ms=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vs(),o=a.BuildInfo,Ln(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,xs(n.sessionId);case 4:return u=e.sent,s={},Vr()?s.ibi=o.packageName:Mr()?s.apn=o.packageName:Cn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",as(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}function gs(){return(gs=Xe(pe().mark((function e(t){var n,r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vs(),r=n.BuildInfo,i={},Vr()?i.iosBundleId=r.packageName:Mr()?i.androidPackageName=r.packageName:Cn(t,"operation-not-supported-in-this-environment"),e.next=5,Lu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ks(e){var t=vs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function bs(e,t,n){return ws.apply(this,arguments)}function ws(){return ws=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(An(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Mr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ws.apply(this,arguments)}function _s(e){var t,n,r,i,a,o,u,s,c,l,f=vs();Pn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function xs(e){return Is.apply(this,arguments)}function Is(){return(Is=Xe(pe().mark((function e(t){var n,r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ss(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e){if(Ln(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ts=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return te(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),sn(oe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Du);function Es(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Ds(),postBody:null,tenantId:e.tenantId,error:An(e,"no-auth-event")}}function Cs(e,t){return Ps()._set(Os(e),t)}function As(e){return Ns.apply(this,arguments)}function Ns(){return(Ns=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps()._get(Os(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ps()._remove(Os(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rs(e,t){var n,r,i=function(e){var t=Ls(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ls(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ls(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ls(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?An(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ds(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ps(){return Fn(Ja)}function Os(e){return Ar("authEvent",e.config.apiKey,e.name)}function Ls(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||Qe(t)||u(t)||s();r[0];return Fe(r.slice(1).join("?"))}var Ms=function(){function e(){Z(this,e),this._redirectPersistence=eo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cu}return te(e,[{key:"_initialize",value:function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ts(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Cn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Xe(pe().mark((function e(t,n,r,i){var a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),hu.clear(),e.next=10,this._originValidation(t);case 10:return o=Es(t,r,i),e.next=13,Cs(t,o);case 13:return e.next=15,ys(t,o,n);case 15:return u=e.sent,e.next=18,ks(u);case 18:return s=e.sent,e.abrupt("return",bs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return gs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=vs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Xe(pe().mark((function n(){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,As(e);case 2:t.onEvent(Us());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Xe(pe().mark((function n(r){var i,a;return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,As(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Rs(i,r.url)),t.onEvent(a||Us());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");vs().handleOpenURL=function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Fs=Ms;function Us(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:An("no-auth-event")}}function Vs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return!("file:"!==Vs()&&"ionic:"!==Vs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bs(){return Ee()&&11===(null===document||void 0===document?void 0:document.documentMode)}function qs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/Edge\/\d+/.test(e)}function zs(){try{var e=self.localStorage,t=ro();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return Bs()||qs(e)}()||Ce()}catch(n){return Ks()&&Ce()}return!1}function Ks(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Gs(){return("http:"===Vs()||"https:"===Vs()||Se()||js())&&!(Te()||Ie())&&zs()&&!Ks()}function Ws(){return js()&&"undefined"!==typeof document}function Hs(){return Qs.apply(this,arguments)}function Qs(){return(Qs=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ws()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ys={LOCAL:"local",NONE:"none",SESSION:"session"},$s=Pn,Xs="persistence";function Js(e,t){$s(Object.values(Ys).includes(t),e,"invalid-persistence-type"),Te()?$s(t!==Ys.SESSION,e,"unsupported-persistence-type"):Ie()?$s(t===Ys.NONE,e,"unsupported-persistence-type"):Ks()?$s(t===Ys.NONE||t===Ys.LOCAL&&Ce(),e,"unsupported-persistence-type"):$s(t===Ys.NONE||zs(),e,"unsupported-persistence-type")}function Zs(e){return ec.apply(this,arguments)}function ec(){return(ec=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=tc(),r=Ar(Xs,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var nc=Pn,rc=function(){function e(){Z(this,e),this.browserResolver=Fn(ss),this.cordovaResolver=Fn(Fs),this.underlyingResolver=null,this._redirectPersistence=eo,this._completeRedirectFn=Cu}return te(e,[{key:"_initialize",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Xe(pe().mark((function e(t,n,r,i){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Xe(pe().mark((function e(t,n,r,i){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ws()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return nc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Hs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ic(e){return e.unwrap()}function ac(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new lc(e,function(e,t){var n,r=qe(e),i=t;return Pn(t.customData.operationType,r,"argument-error"),Pn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ga._fromError(r,i)}(e,t));else if(r){var i=oc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function oc(e){var t=(e instanceof Ae?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ae)&&"temporaryProof"in t&&"phoneNumber"in t)return Xo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===pn)return null;switch(r){case dn:n=Mi;break;case fn:n=Li;break;case hn:n=Fi;break;case vn:n=ji;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ui._create(r,u):_i._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Oi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ae?n.credentialFromError(e):n.credentialFromResult(e)}function uc(e,t){return t.catch((function(t){throw t instanceof Ae&&ac(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,oc(t)),additionalUserInfo:za(e),user:fc.getOrCreate(r)}}))}function sc(e,t){return cc.apply(this,arguments)}function cc(){return(cc=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return uc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lc=function(){function e(t,n){Z(this,e),this.resolver=n,this.auth=t.wrapped()}return te(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return uc(ic(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),fc=function(){function e(t){Z(this,e),this._delegate=t,this.multiFactor=function(e){var t=qe(e);return Qa.has(t)||Qa.set(t,Ha._fromUser(t)),Qa.get(t)}(t)}return te(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(this.auth,ua(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sc(this.auth,Go(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(this.auth,cu(this._delegate,t,rc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zs(Gr(this.auth));case 2:return e.abrupt("return",Iu(this._delegate,t,rc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(this.auth,ca(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return sc(this.auth,function(e,t,n){return Ho.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return uc(this.auth,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,rc))}},{key:"reauthenticateWithRedirect",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zs(Gr(this.auth));case 2:return e.abrupt("return",_u(this._delegate,t,rc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Na.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return La(qe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return La(qe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return $o.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Oa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ra.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();fc.USER_MAP=new WeakMap;var hc=Pn,dc=function(){function e(t,n){if(Z(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;hc(r,"invalid-api-key",{appName:t.name}),hc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?rc:void 0;this._delegate=n.initialize({options:{persistence:vc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(xn),this.linkUnderlyingAuth()}return te(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?fc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Hr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ka.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ba(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ga.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(this._delegate,xa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Aa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ni.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hc(Gs(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Tu(this._delegate,rc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",uc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Gr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=pc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=pc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Sa.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ma.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Js(this._delegate,t),e.t0=t,e.next=e.t0===Ys.SESSION?4:e.t0===Ys.LOCAL?6:e.t0===Ys.NONE?11:13;break;case 4:return n=eo,e.abrupt("break",14);case 6:return e.next=8,Fn(Io)._isAvailable();case 8:return r=e.sent,n=r?Io:Ja,e.abrupt("break",14);case 11:return n=Cr,e.abrupt("break",14);case 13:return e.abrupt("return",Cn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return uc(this._delegate,function(e){return Gi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return uc(this._delegate,aa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return uc(this._delegate,function(e,t){return da.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return uc(this._delegate,function(e,t,n){return aa(qe(e),Ri.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return uc(this._delegate,function(e,t,n){return Ta.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return sc(this._delegate,function(e,t,n){return Ko.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hc(Gs(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",uc(this._delegate,ou(this._delegate,t,rc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hc(Gs(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Zs(this._delegate);case 3:return e.abrupt("return",bu(this._delegate,t,rc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return _a.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function pc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&fc.getOrCreate(e))},error:t,complete:n}}function vc(e,t){var n=function(e,t){var n=tc();if(!n)return[];var r=Ar(Xs,e,t);switch(n.getItem(r)){case Ys.NONE:return[Cr];case Ys.LOCAL:return[Io,eo];case Ys.SESSION:return[eo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Io)||n.push(Io),"undefined"!==typeof window)for(var r=0,i=[Ja,eo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Cr)||n.push(Cr),n}dc.Persistence=Ys;var yc=function(){function e(){Z(this,e),this.providerId="phone",this._delegate=new Xo(ic(on.auth()))}return te(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Xo.credential(e,t)}}]),e}();yc.PHONE_SIGN_IN_METHOD=Xo.PHONE_SIGN_IN_METHOD,yc.PROVIDER_ID=Xo.PROVIDER_ID;var mc,gc=Pn,kc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.app();Z(this,e),gc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Bo(t,n,i.auth()),this.type=this._delegate.type}return te(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(mc=on).INTERNAL.registerComponent(new Je("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new dc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:yn,PASSWORD_RESET:mn,RECOVER_EMAIL:gn,REVERT_SECOND_FACTOR_ADDITION:kn,VERIFY_AND_CHANGE_EMAIL:bn,VERIFY_EMAIL:wn}},EmailAuthProvider:Ri,FacebookAuthProvider:Li,GithubAuthProvider:Fi,GoogleAuthProvider:Mi,OAuthProvider:Oi,SAMLAuthProvider:Vi,PhoneAuthProvider:yc,PhoneMultiFactorGenerator:ls,RecaptchaVerifier:kc,TwitterAuthProvider:ji,Auth:dc,AuthCredential:$r,Error:Ae}).setInstantiationMode("LAZY").setMultipleInstances(!1)),mc.registerVersion("@firebase/auth-compat","0.2.12");var bc,wc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},_c={},xc=xc||{},Ic=wc||self;function Sc(){}function Tc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ec(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Cc="closure_uid_"+(1e9*Math.random()>>>0),Ac=0;function Nc(e,t,n){return e.call.apply(e.bind,arguments)}function Rc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Dc(e,t,n){return(Dc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nc:Rc).apply(null,arguments)}function Pc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Oc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Lc(){this.s=this.s,this.o=this.o}var Mc={};Lc.prototype.s=!1,Lc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Cc)&&e[Cc]||(e[Cc]=++Ac)}(this);delete Mc[e]}},Lc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Fc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Uc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Vc(e){return Array.prototype.concat.apply([],arguments)}function jc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Bc(e){return/^[\s\xa0]*$/.test(e)}var qc,zc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Kc(e,t){return-1!=e.indexOf(t)}function Gc(e,t){return e<t?-1:e>t?1:0}e:{var Wc=Ic.navigator;if(Wc){var Hc=Wc.userAgent;if(Hc){qc=Hc;break e}}qc=""}function Qc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Yc(e){var t={};for(var n in e)t[n]=e[n];return t}var $c="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<$c.length;a++)n=$c[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Jc(e){return Jc[" "](e),e}Jc[" "]=Sc;var Zc,el=Kc(qc,"Opera"),tl=Kc(qc,"Trident")||Kc(qc,"MSIE"),nl=Kc(qc,"Edge"),rl=nl||tl,il=Kc(qc,"Gecko")&&!(Kc(qc.toLowerCase(),"webkit")&&!Kc(qc,"Edge"))&&!(Kc(qc,"Trident")||Kc(qc,"MSIE"))&&!Kc(qc,"Edge"),al=Kc(qc.toLowerCase(),"webkit")&&!Kc(qc,"Edge");function ol(){var e=Ic.document;return e?e.documentMode:void 0}e:{var ul="",sl=function(){var e=qc;return il?/rv:([^\);]+)(\)|;)/.exec(e):nl?/Edge\/([\d\.]+)/.exec(e):tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):al?/WebKit\/(\S+)/.exec(e):el?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(sl&&(ul=sl?sl[1]:""),tl){var cl=ol();if(null!=cl&&cl>parseFloat(ul)){Zc=String(cl);break e}}Zc=ul}var ll,fl={};function hl(){return function(e){var t=fl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=zc(String(Zc)).split("."),n=zc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Gc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Gc(0==a[2].length,0==o[2].length)||Gc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ic.document&&tl){var dl=ol();ll=dl||(parseInt(Zc,10)||void 0)}else ll=void 0;var pl=ll,vl=function(){if(!Ic.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ic.addEventListener("test",Sc,t),Ic.removeEventListener("test",Sc,t)}catch(n){}return e}();function yl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ml(e,t){if(yl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(il){e:{try{Jc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:gl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ml.Z.h.call(this)}}yl.prototype.h=function(){this.defaultPrevented=!0},Oc(ml,yl);var gl={2:"touch",3:"pen",4:"mouse"};ml.prototype.h=function(){ml.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var kl="closure_listenable_"+(1e6*Math.random()|0),bl=0;function wl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++bl,this.ca=this.fa=!1}function _l(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function xl(e){this.src=e,this.g={},this.h=0}function Il(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Fc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(_l(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Sl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}xl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Sl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new wl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Tl="closure_lm_"+(1e6*Math.random()|0),El={};function Cl(e,t,n,r,i){if(r&&r.once)return Nl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Cl(e,t[a],n,r,i);return null}return n=Fl(n),e&&e[kl]?e.N(t,n,Ec(r)?!!r.capture:!!r,i):Al(e,t,n,!1,r,i)}function Al(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ec(i)?!!i.capture:!!i,u=Ll(e);if(u||(e[Tl]=u=new xl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ol;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Nl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Nl(e,t[a],n,r,i);return null}return n=Fl(n),e&&e[kl]?e.O(t,n,Ec(r)?!!r.capture:!!r,i):Al(e,t,n,!0,r,i)}function Rl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rl(e,t[a],n,r,i);else r=Ec(r)?!!r.capture:!!r,n=Fl(n),e&&e[kl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Sl(a=e.g[t],n,r,i))&&(_l(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ll(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Sl(t,n,r,i)),(n=-1<e?t[e]:null)&&Dl(n))}function Dl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[kl])Il(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ll(t))?(Il(n,e),0==n.h&&(n.src=null,t[Tl]=null)):_l(e)}}}function Pl(e){return e in El?El[e]:El[e]="on"+e}function Ol(e,t){if(e.ca)e=!0;else{t=new ml(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Dl(e),e=n.call(r,t)}return e}function Ll(e){return(e=e[Tl])instanceof xl?e:null}var Ml="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fl(e){return"function"===typeof e?e:(e[Ml]||(e[Ml]=function(t){return e.handleEvent(t)}),e[Ml])}function Ul(){Lc.call(this),this.i=new xl(this),this.P=this,this.I=null}function Vl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new yl(t,e);else if(t instanceof yl)t.target=t.target||e;else{var i=t;Xc(t=new yl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=jl(o,r,!0,t)&&i}if(i=jl(o=t.g=e,r,!0,t)&&i,i=jl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=jl(o=t.g=n[a],r,!1,t)&&i}function jl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Il(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Oc(Ul,Lc),Ul.prototype[kl]=!0,Ul.prototype.removeEventListener=function(e,t,n,r){Rl(this,e,t,n,r)},Ul.prototype.M=function(){if(Ul.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_l(n[r]);delete t.g[e],t.h--}}this.I=null},Ul.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ul.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Bl=Ic.JSON.stringify;function ql(){var e=$l,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var zl,Kl=function(){function e(){Z(this,e),this.h=this.g=null}return te(e,[{key:"add",value:function(e,t){var n=Gl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Gl=new(function(){function e(t,n){Z(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return te(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Wl}),(function(e){return e.reset()})),Wl=function(){function e(){Z(this,e),this.next=this.g=this.h=null}return te(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Hl(e){Ic.setTimeout((function(){throw e}),0)}function Ql(e,t){zl||function(){var e=Ic.Promise.resolve(void 0);zl=function(){e.then(Xl)}}(),Yl||(zl(),Yl=!0),$l.add(e,t)}var Yl=!1,$l=new Kl;function Xl(){for(var e;e=ql();){try{e.h.call(e.g)}catch(n){Hl(n)}var t=Gl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yl=!1}function Jl(e,t){Ul.call(this),this.h=e||1,this.g=t||Ic,this.j=Dc(this.kb,this),this.l=Date.now()}function Zl(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ef(e,t,n){if("function"===typeof e)n&&(e=Dc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Dc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ic.setTimeout(e,t||0)}function tf(e){e.g=ef((function(){e.g=null,e.i&&(e.i=!1,tf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Oc(Jl,Ul),(bc=Jl.prototype).da=!1,bc.S=null,bc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vl(this,"tick"),this.da&&(Zl(this),this.start()))}},bc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bc.M=function(){Jl.Z.M.call(this),Zl(this),delete this.g};var nf=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return te(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:tf(this)}},{key:"M",value:function(){sn(oe(n.prototype),"M",this).call(this),this.g&&(Ic.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Lc);function rf(e){Lc.call(this),this.h=e,this.g={}}Oc(rf,Lc);var af=[];function of(e,t,n,r){Array.isArray(n)||(n&&(af[0]=n.toString()),n=af);for(var i=0;i<n.length;i++){var a=Cl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function uf(e){Qc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Dl(e)}),e),e.g={}}function sf(){this.g=!0}function cf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Bl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}rf.prototype.M=function(){rf.Z.M.call(this),uf(this)},rf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sf.prototype.Aa=function(){this.g=!1},sf.prototype.info=function(){};var lf={},ff=null;function hf(){return ff=ff||new Ul}function df(e){yl.call(this,lf.Ma,e)}function pf(e){var t=hf();Vl(t,new df(t,e))}function vf(e,t){yl.call(this,lf.STAT_EVENT,e),this.stat=t}function yf(e){var t=hf();Vl(t,new vf(t,e))}function mf(e,t){yl.call(this,lf.Na,e),this.size=t}function gf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ic.setTimeout((function(){e()}),t)}lf.Ma="serverreachability",Oc(df,yl),lf.STAT_EVENT="statevent",Oc(vf,yl),lf.Na="timingevent",Oc(mf,yl);var kf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wf(){}function _f(e){return e.h||(e.h=e.i())}function xf(){}wf.prototype.h=null;var If,Sf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Tf(){yl.call(this,"d")}function Ef(){yl.call(this,"c")}function Cf(){}function Af(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new rf(this),this.P=Rf,e=rl?125:void 0,this.W=new Jl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Nf}function Nf(){this.i=null,this.g="",this.h=!1}Oc(Tf,yl),Oc(Ef,yl),Oc(Cf,wf),Cf.prototype.g=function(){return new XMLHttpRequest},Cf.prototype.i=function(){return{}},If=new Cf;var Rf=45e3,Df={},Pf={};function Of(e,t,n){e.K=1,e.v=rh(Xf(t)),e.s=n,e.U=!0,Lf(e,null)}function Lf(e,t){e.F=Date.now(),Vf(e),e.A=Xf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),yh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Nf,e.g=gd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new nf(Dc(e.Ia,e,e.g),e.O)),of(e.V,e.g,"readystatechange",e.gb),t=e.H?Yc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),pf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Mf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ff(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Uf(e,n))==Pf){4==t&&(e.o=4,yf(14),i=!1),cf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Df){e.o=4,yf(15),cf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}cf(e.j,e.m,r,null),Kf(e,r)}Mf(e)&&r!=Pf&&r!=Df&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,yf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ld(t),t.L=!0,yf(11))):(cf(e.j,e.m,n,"[Invalid Chunked Response]"),zf(e),qf(e))}function Uf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pf:(n=Number(t.substring(n,r)),isNaN(n)?Df:(r+=1)+n>t.length?Pf:(t=t.substr(r,n),e.C=r+n,t))}function Vf(e){e.Y=Date.now()+e.P,jf(e,e.P)}function jf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=gf(Dc(e.eb,e),t)}function Bf(e){e.B&&(Ic.clearTimeout(e.B),e.B=null)}function qf(e){0==e.l.G||e.I||dd(e.l,e)}function zf(e){Bf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Zl(e.W),uf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Kf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ih(n.i,e)))if(n.I=e.N,!e.J&&Ih(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hd(n),td(n)}cd(n),yf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=gf(Dc(n.ab,n),6e3));if(1>=xh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else vd(n,11)}else if((e.J||n.g==e)&&hd(n),!Bc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Kc(l,"spdy")||Kc(l,"quic")||Kc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Sh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,nh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=md(r,r.H?r.la:null,r.W),d.J){Th(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Bf(p),Vf(p)),r.g=d}else sd(r);0<n.l.length&&id(n)}else"stop"!=a[0]&&"close"!=a[0]||vd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?vd(n,7):ed(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}pf(4)}catch(a){}}function Gf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Tc(e)||"string"===typeof e)Uc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Tc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Tc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Wf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Wf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Hf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Qf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Qf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Qf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(bc=Af.prototype).setTimeout=function(e){this.P=e},bc.gb=function(e){e=e.target;var t=this.L;t&&3==Yh(e)?t.l():this.Ia(e)},bc.Ia=function(e){try{if(e==this.g)e:{var t=Yh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||rl||this.g&&(this.h.h||this.g.ga()||$h(this.g)))){this.I||4!=t||7==n||pf(8==n||0>=r?3:2),Bf(this);var i=this.g.ba();this.N=i;t:if(Mf(this)){var a=$h(this.g);e="";var o=a.length,u=4==Yh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){zf(this),qf(this);var s="";break t}this.h.i=new Ic.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,yf(12),zf(this),qf(this);break e}cf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kf(this,i)}this.U?(Ff(this,t,s),rl&&this.i&&3==t&&(of(this.V,this.W,"tick",this.fb),this.W.start())):(cf(this.j,this.m,s,null),Kf(this,s)),4==t&&zf(this),this.i&&!this.I&&(4==t?dd(this.l,this):(this.i=!1,Vf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,yf(12)):(this.o=0,yf(13)),zf(this),qf(this)}}}catch(t){}},bc.fb=function(){if(this.g){var e=Yh(this.g),t=this.g.ga();this.C<t.length&&(Bf(this),Ff(this,e,t),this.i&&4!=e&&Vf(this))}},bc.cancel=function(){this.I=!0,zf(this)},bc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(pf(3),yf(17)),zf(this),this.o=2,qf(this)):jf(this,this.Y-e)},(bc=Wf.prototype).R=function(){Hf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},bc.T=function(){return Hf(this),this.g.concat()},bc.get=function(e,t){return Qf(this.h,e)?this.h[e]:t},bc.set=function(e,t){Qf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},bc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Yf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $f(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof $f){this.g=void 0!==t?t:e.g,Jf(this,e.j),this.s=e.s,Zf(this,e.i),eh(this,e.m),this.l=e.l,t=e.h;var n=new hh;n.i=t.i,t.g&&(n.g=new Wf(t.g),n.h=t.h),th(this,n),this.o=e.o}else e&&(n=String(e).match(Yf))?(this.g=!!t,Jf(this,n[1]||"",!0),this.s=ih(n[2]||""),Zf(this,n[3]||"",!0),eh(this,n[4]),this.l=ih(n[5]||"",!0),th(this,n[6]||"",!0),this.o=ih(n[7]||"")):(this.g=!!t,this.h=new hh(null,this.g))}function Xf(e){return new $f(e)}function Jf(e,t,n){e.j=n?ih(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zf(e,t,n){e.i=n?ih(t,!0):t}function eh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function th(e,t,n){t instanceof hh?(e.h=t,function(e,t){t&&!e.j&&(dh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ph(this,t),yh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ah(t,lh)),e.h=new hh(t,e.g))}function nh(e,t,n){e.h.set(t,n)}function rh(e){return nh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ih(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ah(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,oh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$f.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ah(t,uh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ah(t,uh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ah(n,"/"==n.charAt(0)?ch:sh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ah(n,fh)),e.join("")};var uh=/[#\/\?@]/g,sh=/[#\?:]/g,ch=/[#\?]/g,lh=/[#\?@]/g,fh=/#/g;function hh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dh(e){e.g||(e.g=new Wf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ph(e,t){dh(e),t=mh(e,t),Qf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Qf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Hf(e)))}function vh(e,t){return dh(e),t=mh(e,t),Qf(e.g.h,t)}function yh(e,t,n){ph(e,t),0<n.length&&(e.i=null,e.g.set(mh(e,t),jc(n)),e.h+=n.length)}function mh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(bc=hh.prototype).add=function(e,t){dh(this),this.i=null,e=mh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},bc.forEach=function(e,t){dh(this),this.g.forEach((function(n,r){Uc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},bc.T=function(){dh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},bc.R=function(e){dh(this);var t=[];if("string"===typeof e)vh(this,e)&&(t=Vc(t,this.g.get(mh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Vc(t,e[n])}return t},bc.set=function(e,t){return dh(this),this.i=null,vh(this,e=mh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},bc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},bc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var gh=te((function e(t,n){Z(this,e),this.h=t,this.g=n}));function kh(e){this.l=e||wh,Ic.PerformanceNavigationTiming?e=0<(e=Ic.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ic.g&&Ic.g.Ea&&Ic.g.Ea()&&Ic.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bh,wh=10;function _h(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xh(e){return e.h?1:e.g?e.g.size:0}function Ih(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sh(e,t){e.g?e.g.add(t):e.h=t}function Th(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Eh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ne(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return jc(e.i)}function Ch(){}function Ah(){this.g=new Ch}function Nh(e,t,n){var r=n||"";try{Gf(e,(function(e,n){var i=e;Ec(e)&&(i=Bl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Dh(e){this.l=e.$b||null,this.j=e.ib||!1}function Ph(e,t){Ul.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Oh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kh.prototype.cancel=function(){if(this.i=Eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ne(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ch.prototype.stringify=function(e){return Ic.JSON.stringify(e,void 0)},Ch.prototype.parse=function(e){return Ic.JSON.parse(e,void 0)},Oc(Dh,wf),Dh.prototype.g=function(){return new Ph(this.l,this.j)},Dh.prototype.i=(bh={},function(){return bh}),Oc(Ph,Ul);var Oh=0;function Lh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Mh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fh(e)}function Fh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(bc=Ph.prototype).open=function(e,t){if(this.readyState!=Oh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fh(this)},bc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ic).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},bc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mh(this)),this.readyState=Oh},bc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fh(this)),this.g&&(this.readyState=3,Fh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ic.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},bc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Mh(this):Fh(this),3==this.readyState&&Lh(this)}},bc.Ua=function(e){this.g&&(this.response=this.responseText=e,Mh(this))},bc.Ta=function(e){this.g&&(this.response=e,Mh(this))},bc.ha=function(){this.g&&Mh(this)},bc.setRequestHeader=function(e,t){this.v.append(e,t)},bc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},bc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ph.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Uh=Ic.JSON.parse;function Vh(e){Ul.call(this),this.headers=new Wf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jh,this.K=this.L=!1}Oc(Vh,Ul);var jh="",Bh=/^https?$/i,qh=["POST","PUT"];function zh(e){return"content-type"==e.toLowerCase()}function Kh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Gh(e),Hh(e)}function Gh(e){e.D||(e.D=!0,Vl(e,"complete"),Vl(e,"error"))}function Wh(e){if(e.h&&"undefined"!=typeof xc&&(!e.C[1]||4!=Yh(e)||2!=e.ba()))if(e.v&&4==Yh(e))ef(e.Fa,0,e);else if(Vl(e,"readystatechange"),4==Yh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Yf)[1]||null;if(!a&&Ic.self&&Ic.self.location){var o=Ic.self.location.protocol;a=o.substr(0,o.length-1)}i=!Bh.test(a?a.toLowerCase():"")}t=i}if(t)Vl(e,"complete"),Vl(e,"success");else{e.m=6;try{var u=2<Yh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Gh(e)}}finally{Hh(e)}}}function Hh(e,t){if(e.g){Qh(e);var n=e.g,r=e.C[0]?Sc:null;e.g=null,e.C=null,t||Vl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Qh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ic.clearTimeout(e.A),e.A=null)}function Yh(e){return e.g?e.g.readyState:0}function $h(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case jh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Qc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):nh(e,t,n))}function Jh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zh(e){this.za=0,this.l=[],this.h=new sf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jh("baseRetryDelayMs",5e3,e),this.$a=Jh("retryDelaySeedMs",1e4,e),this.Ya=Jh("forwardChannelMaxRetries",2,e),this.ra=Jh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new kh(e&&e.concurrentRequestLimit),this.Ca=new Ah,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ed(e){if(nd(e),3==e.G){var t=e.V++,n=Xf(e.F);nh(n,"SID",e.J),nh(n,"RID",t),nh(n,"TYPE","terminate"),od(e,n),(t=new Af(e,e.h,t,void 0)).K=2,t.v=rh(Xf(n)),n=!1,Ic.navigator&&Ic.navigator.sendBeacon&&(n=Ic.navigator.sendBeacon(t.v.toString(),"")),!n&&Ic.Image&&((new Image).src=t.v,n=!0),n||(t.g=gd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Vf(t)}yd(e)}function td(e){e.g&&(ld(e),e.g.cancel(),e.g=null)}function nd(e){td(e),e.u&&(Ic.clearTimeout(e.u),e.u=null),hd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ic.clearTimeout(e.m),e.m=null)}function rd(e,t){e.l.push(new gh(e.Za++,t)),3==e.G&&id(e)}function id(e){_h(e.i)||e.m||(e.m=!0,Ql(e.Ha,e),e.C=0)}function ad(e,t){var n;n=t?t.m:e.V++;var r=Xf(e.F);nh(r,"SID",e.J),nh(r,"RID",n),nh(r,"AID",e.U),od(e,r),e.o&&e.s&&Xh(r,e.o,e.s),n=new Af(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ud(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Sh(e.i,n),Of(n,r,t)}function od(e,t){e.j&&Gf({},(function(e,n){nh(t,n,e)}))}function ud(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Dc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Nh(l,o,"req"+c+"_")}catch(Wd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function sd(e){e.g||e.u||(e.Y=1,Ql(e.Ga,e),e.A=0)}function cd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=gf(Dc(e.Ga,e),pd(e,e.A)),e.A++,!0)}function ld(e){null!=e.B&&(Ic.clearTimeout(e.B),e.B=null)}function fd(e){e.g=new Af(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Xf(e.oa);nh(t,"RID","rpc"),nh(t,"SID",e.J),nh(t,"CI",e.N?"0":"1"),nh(t,"AID",e.U),od(e,t),nh(t,"TYPE","xmlhttp"),e.o&&e.s&&Xh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=rh(Xf(t)),n.s=null,n.U=!0,Lf(n,e)}function hd(e){null!=e.v&&(Ic.clearTimeout(e.v),e.v=null)}function dd(e,t){var n=null;if(e.g==t){hd(e),ld(e),e.g=null;var r=2}else{if(!Ih(e.i,t))return;n=t.D,Th(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Vl(r=hf(),new mf(r,n,t,i)),id(e)}else sd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(xh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=gf(Dc(e.Ha,e,t),pd(e,e.C)),e.C++,!0))}(e,t)||2==r&&cd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:vd(e,5);break;case 4:vd(e,10);break;case 3:vd(e,6);break;default:vd(e,2)}}function pd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function vd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Dc(e.jb,e);n||(n=new $f("//www.google.com/images/cleardot.gif"),Ic.location&&"http"==Ic.location.protocol||Jf(n,"https"),rh(n)),function(e,t){var n=new sf;if(Ic.Image){var r=new Image;r.onload=Pc(Rh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pc(Rh,n,r,"TestLoadImage: error",!1,t),r.onabort=Pc(Rh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pc(Rh,n,r,"TestLoadImage: timeout",!1,t),Ic.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else yf(2);e.G=0,e.j&&e.j.va(t),yd(e),nd(e)}function yd(e){e.G=0,e.I=-1,e.j&&(0==Eh(e.i).length&&0==e.l.length||(e.i.i.length=0,jc(e.l),e.l.length=0),e.j.ua())}function md(e,t,n){var r=function(e){return e instanceof $f?Xf(e):new $f(e,void 0)}(n);if(""!=r.i)t&&Zf(r,t+"."+r.i),eh(r,r.m);else{var i=Ic.location;r=function(e,t,n,r){var i=new $f(null,void 0);return e&&Jf(i,e),t&&Zf(i,t),n&&eh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Qc(e.aa,(function(e,t){nh(r,t,e)})),t=e.D,n=e.sa,t&&n&&nh(r,t,n),nh(r,"VER",e.ma),od(e,r),r}function gd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Vh(new Dh({ib:!0})):new Vh(e.qa)).L=e.H,t}function kd(){}function bd(){if(tl&&!(10<=Number(pl)))throw Error("Environmental error: no available transport.")}function wd(e,t){Ul.call(this),this.g=new Zh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Bc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Bc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Id(this)}function _d(e){Tf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xd(){Ef.call(this),this.status=1}function Id(e){this.g=e}(bc=Vh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():If.g(),this.C=this.u?_f(this.u):_f(If),this.g.onreadystatechange=Dc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Kh(this,a)}e=n||"";var i=new Wf(this.headers);r&&Gf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=zh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ic.FormData&&e instanceof Ic.FormData,!(0<=Fc(qh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qh(this),0<this.B&&((this.K=function(e){return tl&&hl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dc(this.pa,this)):this.A=ef(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Kh(this,a)}},bc.pa=function(){"undefined"!=typeof xc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vl(this,"timeout"),this.abort(8))},bc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Vl(this,"complete"),Vl(this,"abort"),Hh(this))},bc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hh(this,!0)),Vh.Z.M.call(this)},bc.Fa=function(){this.s||(this.F||this.v||this.l?Wh(this):this.cb())},bc.cb=function(){Wh(this)},bc.ba=function(){try{return 2<Yh(this)?this.g.status:-1}catch(bh){return-1}},bc.ga=function(){try{return this.g?this.g.responseText:""}catch(bh){return""}},bc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Uh(t)}},bc.Da=function(){return this.m},bc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(bc=Zh.prototype).ma=8,bc.G=1,bc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},bc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Af(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Xc(n=Yc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ud(this,t,r),nh(i=Xf(this.F),"RID",e),nh(i,"CVER",22),this.D&&nh(i,"X-HTTP-Session-Id",this.D),od(this,i),this.o&&n&&Xh(i,this.o,n),Sh(this.i,t),this.Ra&&nh(i,"TYPE","init"),this.ja?(nh(i,"$req",r),nh(i,"SID","null"),t.$=!0,Of(t,i,null)):Of(t,i,r),this.G=2}}else 3==this.G&&(e?ad(this,e):0==this.l.length||_h(this.i)||ad(this))},bc.Ga=function(){if(this.u=null,fd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=gf(Dc(this.bb,this),e)}},bc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yf(10),td(this),fd(this))},bc.ab=function(){null!=this.v&&(this.v=null,td(this),cd(this),yf(19))},bc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),yf(2)):(this.h.info("Failed to ping google.com"),yf(1))},(bc=kd.prototype).xa=function(){},bc.wa=function(){},bc.va=function(){},bc.ua=function(){},bc.Oa=function(){},bd.prototype.g=function(e,t){return new wd(e,t)},Oc(wd,Ul),wd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ql(Dc(e.hb,e,t))),yf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=md(e,null,e.W),id(e)},wd.prototype.close=function(){ed(this.g)},wd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,rd(this.g,t)}else this.v?((t={}).__data__=Bl(e),rd(this.g,t)):rd(this.g,e)},wd.prototype.M=function(){this.g.j=null,delete this.j,ed(this.g),delete this.g,wd.Z.M.call(this)},Oc(_d,Tf),Oc(xd,Ef),Oc(Id,kd),Id.prototype.xa=function(){Vl(this.g,"a")},Id.prototype.wa=function(e){Vl(this.g,new _d(e))},Id.prototype.va=function(e){Vl(this.g,new xd(e))},Id.prototype.ua=function(){Vl(this.g,"b")},bd.prototype.createWebChannel=bd.prototype.g,wd.prototype.send=wd.prototype.u,wd.prototype.open=wd.prototype.m,wd.prototype.close=wd.prototype.close,kf.NO_ERROR=0,kf.TIMEOUT=8,kf.HTTP_ERROR=6,bf.COMPLETE="complete",xf.EventType=Sf,Sf.OPEN="a",Sf.CLOSE="b",Sf.ERROR="c",Sf.MESSAGE="d",Ul.prototype.listen=Ul.prototype.N,Vh.prototype.listenOnce=Vh.prototype.O,Vh.prototype.getLastError=Vh.prototype.La,Vh.prototype.getLastErrorCode=Vh.prototype.Da,Vh.prototype.getStatus=Vh.prototype.ba,Vh.prototype.getResponseJson=Vh.prototype.Qa,Vh.prototype.getResponseText=Vh.prototype.ga,Vh.prototype.send=Vh.prototype.ea;var Sd=_c.createWebChannelTransport=function(){return new bd},Td=_c.getStatEventTarget=function(){return hf()},Ed=_c.ErrorCode=kf,Cd=_c.EventType=bf,Ad=_c.Event=lf,Nd=_c.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Rd=_c.FetchXmlHttpFactory=Dh,Dd=_c.WebChannel=xf,Pd=_c.XhrIo=Vh,Od="@firebase/firestore",Ld=function(){function e(t){Z(this,e),this.uid=t}return te(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ld.UNAUTHENTICATED=new Ld(null),Ld.GOOGLE_CREDENTIALS=new Ld("google-credentials-uid"),Ld.FIRST_PARTY=new Ld("first-party-uid"),Ld.MOCK_USER=new Ld("mock-user");var Md="9.6.11",Fd=new ft("@firebase/firestore");function Ud(){return Fd.logLevel}function Vd(e){if(Fd.logLevel<=nt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(qd);Fd.debug.apply(Fd,["Firestore (".concat(Md,"): ").concat(e)].concat(Ye(i)))}}function jd(e){if(Fd.logLevel<=nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(qd);Fd.error.apply(Fd,["Firestore (".concat(Md,"): ").concat(e)].concat(Ye(i)))}}function Bd(e){if(Fd.logLevel<=nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(qd);Fd.warn.apply(Fd,["Firestore (".concat(Md,"): ").concat(e)].concat(Ye(i)))}}function qd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function zd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Md,") INTERNAL ASSERTION FAILED: ")+e;throw jd(t),new Error(t)}function Kd(e,t){e||zd()}function Gd(e,t){return e}var Wd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hd=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return te(n)}(Ae),Qd=te((function e(){var t=this;Z(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Yd=te((function e(t,n){Z(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),$d=function(){function e(){Z(this,e)}return te(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ld.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Xd=function(){function e(t){Z(this,e),this.token=t,this.changeListener=null}return te(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Jd=function(){function e(t){Z(this,e),this.t=t,this.currentUser=Ld.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return te(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Vd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Vd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Vd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Kd("string"==typeof n.accessToken),new Yd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Kd(null===e||"string"==typeof e),new Ld(e)}}]),e}(),Zd=te((function e(t,n,r){Z(this,e),this.type="FirstParty",this.user=Ld.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),ep=function(){function e(t,n,r){Z(this,e),this.h=t,this.l=n,this.m=r}return te(e,[{key:"getToken",value:function(){return Promise.resolve(new Zd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ld.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),tp=te((function e(t){Z(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),np=function(){function e(t){Z(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return te(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Vd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Vd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Vd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Vd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Kd("string"==typeof t.token),e.p=t.token,new tp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),rp=function(){function e(t,n){var r=this;Z(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return te(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function ip(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}rp.A=-1;var ap=function(){function e(){Z(this,e)}return te(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ip(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function op(e,t){return e<t?-1:e>t?1:0}function up(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function sp(e){return e+"\0"}var cp=function(){function e(t,n){if(Z(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return te(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?op(this.nanoseconds,e.nanoseconds):op(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),lp=function(){function e(t){Z(this,e),this.timestamp=t}return te(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new cp(0,0))}},{key:"max",value:function(){return new e(new cp(253402300799,999999999))}}]),e}();function fp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var pp=function(){function e(t,n,r){Z(this,e),void 0===n?n=0:n>t.length&&zd(),void 0===r?r=t.length-n:r>t.length-n&&zd(),this.segments=t,this.offset=n,this.len=r}return te(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),vp=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ye(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(pp),yp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mp=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return yp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Hd(Wd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hd(Wd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Hd(Wd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(pp),gp=function(){function e(t){Z(this,e),this.fields=t,t.sort(mp.comparator)}return te(e,[{key:"covers",value:function(e){var t,n=ne(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return up(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var kp=function(e){function t(e){Z(this,t),this.binaryString=e}return te(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return op(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();kp.EMPTY_BYTE_STRING=new kp("");var bp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wp(e){if(Kd(!!e),"string"==typeof e){var t=0,n=bp.exec(e);if(Kd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_p(e.seconds),nanos:_p(e.nanos)}}function _p(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xp(e){return"string"==typeof e?kp.fromBase64String(e):kp.fromUint8Array(e)}function Ip(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sp(e){var t=e.mapValue.fields.__previous_value__;return Ip(t)?Sp(t):t}function Tp(e){var t=wp(e.mapValue.fields.__local_write_time__.timestampValue);return new cp(t.seconds,t.nanos)}var Ep=te((function e(t,n,r,i,a,o,u,s){Z(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Cp=function(){function e(t,n){Z(this,e),this.projectId=t,this.database=n||"(default)"}return te(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ap(e){return null==e}function Np(e){return 0===e&&1/e==-1/0}function Rp(e){return"number"==typeof e&&Number.isInteger(e)&&!Np(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Dp=function(){function e(t){Z(this,e),this.path=t}return te(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===vp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(vp.fromString(t))}},{key:"fromName",value:function(t){return new e(vp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(vp.emptyPath())}},{key:"comparator",value:function(e,t){return vp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new vp(t.slice()))}}]),e}(),Pp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Op={nullValue:"NULL_VALUE"};function Lp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ip(e)?4:Yp(e)?9:10:zd()}function Mp(e,t){if(e===t)return!0;var n=Lp(e);if(n!==Lp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tp(e).isEqual(Tp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=wp(e.timestampValue),r=wp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xp(e.bytesValue).isEqual(xp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _p(e.geoPointValue.latitude)===_p(t.geoPointValue.latitude)&&_p(e.geoPointValue.longitude)===_p(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _p(e.integerValue)===_p(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=_p(e.doubleValue),r=_p(t.doubleValue);return n===r?Np(n)===Np(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return up(e.arrayValue.values||[],t.arrayValue.values||[],Mp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fp(n)!==fp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mp(n[i],r[i])))return!1;return!0}(e,t);default:return zd()}}function Fp(e,t){return void 0!==(e.values||[]).find((function(e){return Mp(e,t)}))}function Up(e,t){if(e===t)return 0;var n=Lp(e),r=Lp(t);if(n!==r)return op(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return op(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=_p(e.integerValue||e.doubleValue),r=_p(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vp(e.timestampValue,t.timestampValue);case 4:return Vp(Tp(e),Tp(t));case 5:return op(e.stringValue,t.stringValue);case 6:return function(e,t){var n=xp(e),r=xp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=op(n[i],r[i]);if(0!==a)return a}return op(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=op(_p(e.latitude),_p(t.latitude));return 0!==n?n:op(_p(e.longitude),_p(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Up(n[i],r[i]);if(a)return a}return op(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=op(r[o],a[o]);if(0!==u)return u;var s=Up(n[r[o]],i[a[o]]);if(0!==s)return s}return op(r.length,a.length)}(e.mapValue,t.mapValue);default:throw zd()}}function Vp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return op(e,t);var n=wp(e),r=wp(t),i=op(n.seconds,r.seconds);return 0!==i?i:op(n.nanos,r.nanos)}function jp(e){return Bp(e)}function Bp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=wp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?xp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Dp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ne(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Bp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ne(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Bp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):zd();var t,n}function qp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zp(e){return!!e&&"integerValue"in e}function Kp(e){return!!e&&"arrayValue"in e}function Gp(e){return!!e&&"nullValue"in e}function Wp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hp(e){return!!e&&"mapValue"in e}function Qp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return hp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Qp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Qp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Yp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function $p(e){return"nullValue"in e?Op:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qp(Cp.empty(),Dp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zd()}function Xp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qp(Cp.empty(),Dp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Pp:zd()}function Jp(e,t){return void 0===e?t:void 0===t||Up(e,t)>0?e:t}function Zp(e,t){return void 0===e?t:void 0===t||Up(e,t)<0?e:t}var ev=function(){function e(t){Z(this,e),this.value=t}return te(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qp(t)}},{key:"setAll",value:function(e){var t=this,n=mp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Qp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Mp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){hp(t,(function(t,n){return e[t]=n}));var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Qp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function tv(e){var t=[];return hp(e.fields,(function(e,n){var r=new mp([e]);if(Hp(n)){var i=tv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ne(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new gp(t)}var nv=function(){function e(t,n,r,i,a,o){Z(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return te(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ev.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ev.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,lp.min(),lp.min(),ev.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,lp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,lp.min(),ev.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,lp.min(),ev.empty(),2)}}]),e}(),rv=te((function e(t,n,r,i){Z(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function iv(e){return e.fields.find((function(e){return 2===e.kind}))}function av(e){return e.fields.filter((function(e){return 2!==e.kind}))}rv.UNKNOWN_ID=-1;var ov=te((function e(t,n){Z(this,e),this.fieldPath=t,this.kind=n})),uv=function(){function e(t,n){Z(this,e),this.sequenceNumber=t,this.offset=n}return te(e,null,[{key:"empty",value:function(){return new e(0,lv.min())}}]),e}();function sv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=lp.fromTimestamp(1e9===r?new cp(n+1,0):new cp(n,r));return new lv(i,Dp.empty(),t)}function cv(e){return new lv(e.readTime,e.key,-1)}var lv=function(){function e(t,n,r){Z(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return te(e,null,[{key:"min",value:function(){return new e(lp.min(),Dp.empty(),-1)}},{key:"max",value:function(){return new e(lp.max(),Dp.empty(),-1)}}]),e}();function fv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Dp.comparator(e.documentKey,t.documentKey))?n:op(e.largestBatchId,t.largestBatchId)}var hv=te((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Z(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function dv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new hv(e,t,n,r,i,a,o)}function pv(e){var t=Gd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+jp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ap(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return jp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return jp(e)})).join(",")),t.P=n}return t.P}function vv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Rv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Mp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Pv(e.startAt,t.startAt)&&Pv(e.endAt,t.endAt)}function yv(e){return Dp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function mv(e,t){return e.filters.filter((function(e){return e instanceof bv&&e.field.isEqual(t)}))}function gv(e,t,n){var r,i,a=!0,o=ne(mv(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=$p(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Op}Jp(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Jp(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}function kv(e,t,n){var r,i,a=!0,o=ne(mv(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=Xp(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Pp}Zp(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Zp(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}var bv=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return te(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Up(t,this.value)):null!==t&&Lp(this.value)===Lp(t)&&this.v(Up(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new wv(e,t,r):"array-contains"===t?new Sv(e,r):"in"===t?new Tv(e,r):"not-in"===t?new Ev(e,r):"array-contains-any"===t?new Cv(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new _v(e,n):new xv(e,n)}}]),n}(function(){return te((function e(){Z(this,e)}))}()),wv=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,e,r,i)).key=Dp.fromName(i.referenceValue),a}return te(n,[{key:"matches",value:function(e){var t=Dp.comparator(e.key,this.key);return this.v(t)}}]),n}(bv),_v=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,"in",r)).keys=Iv("in",r),i}return te(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bv),xv=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,"not-in",r)).keys=Iv("not-in",r),i}return te(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bv);function Iv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Dp.fromName(e.referenceValue)}))}var Sv=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"array-contains",r)}return te(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Kp(t)&&Fp(t.arrayValue,this.value)}}]),n}(bv),Tv=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"in",r)}return te(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Fp(this.value.arrayValue,t)}}]),n}(bv),Ev=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"not-in",r)}return te(n,[{key:"matches",value:function(e){if(Fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Fp(this.value.arrayValue,t)}}]),n}(bv),Cv=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"array-contains-any",r)}return te(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Fp(t.value.arrayValue,e)}))}}]),n}(bv),Av=te((function e(t,n){Z(this,e),this.position=t,this.inclusive=n})),Nv=te((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Z(this,e),this.field=t,this.dir=n}));function Rv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Dv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Dp.comparator(Dp.fromName(o.referenceValue),n.key):Up(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Pv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Mp(e.position[n],t.position[n]))return!1;return!0}var Ov=te((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Z(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Lv(e,t,n,r,i,a,o,u){return new Ov(e,t,n,r,i,a,o,u)}function Mv(e){return new Ov(e)}function Fv(e){return!Ap(e.limit)&&"F"===e.limitType}function Uv(e){return!Ap(e.limit)&&"L"===e.limitType}function Vv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function jv(e){var t,n=ne(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Bv(e){return null!==e.collectionGroup}function qv(e){var t=Gd(e);if(null===t.D){t.D=[];var n=jv(t),r=Vv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Nv(n)),t.D.push(new Nv(mp.keyField(),"asc"));else{var i,a=!1,o=ne(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Nv(mp.keyField(),s))}}}return t.D}function zv(e){var t=Gd(e);if(!t.C)if("F"===t.limitType)t.C=dv(t.path,t.collectionGroup,qv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ne(qv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Nv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Av(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Av(t.startAt.position,!t.startAt.inclusive):null;t.C=dv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Kv(e,t,n){return new Ov(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gv(e,t){return vv(zv(e),zv(t))&&e.limitType===t.limitType}function Wv(e){return"".concat(pv(zv(e)),"|lt:").concat(e.limitType)}function Hv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(jp(t.value));var t})).join(", "),"]")),Ap(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return jp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return jp(e)})).join(",")),"Target(".concat(t,")")}(zv(e)),"; limitType=").concat(e.limitType,")")}function Qv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Dp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ne(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Dv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,qv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Dv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,qv(e),t))}(e,t)}function Yv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $v(e){return function(t,n){var r,i=!1,a=ne(qv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Xv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Xv(e,t,n){var r=e.field.isKeyField()?Dp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Up(r,i):zd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zd()}}function Jv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Np(t)?"-0":t}}function Zv(e){return{integerValue:""+e}}function ey(e,t){return Rp(t)?Zv(t):Jv(e,t)}var ty=te((function e(){Z(this,e),this._=void 0}));function ny(e,t,n){return e instanceof ay?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof oy?uy(e,t):e instanceof sy?cy(e,t):function(e,t){var n=iy(e,t),r=fy(n)+fy(e.k);return zp(n)&&zp(e.k)?Zv(r):Jv(e.M,r)}(e,t)}function ry(e,t,n){return e instanceof oy?uy(e,t):e instanceof sy?cy(e,t):n}function iy(e,t){return e instanceof ly?zp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var ay=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n)}(ty),oy=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).elements=e,r}return te(n)}(ty);function uy(e,t){var n,r=hy(t),i=ne(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Mp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sy=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).elements=e,r}return te(n)}(ty);function cy(e,t){var n,r=hy(t),i=ne(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Mp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ly=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).M=e,i.k=r,i}return te(n)}(ty);function fy(e){return _p(e.integerValue||e.doubleValue)}function hy(e){return Kp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var dy=te((function e(t,n){Z(this,e),this.field=t,this.transform=n}));var py=te((function e(t,n){Z(this,e),this.version=t,this.transformResults=n})),vy=function(){function e(t,n){Z(this,e),this.updateTime=t,this.exists=n}return te(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function yy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var my=te((function e(){Z(this,e)}));function gy(e,t,n){e instanceof xy?function(e,t,n){var r=e.value.clone(),i=Ty(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Iy?function(e,t,n){if(yy(e.precondition,t)){var r=Ty(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Sy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ky(e,t,n){e instanceof xy?function(e,t,n){if(yy(e.precondition,t)){var r=e.value.clone(),i=Ey(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(_y(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Iy?function(e,t,n){if(yy(e.precondition,t)){var r=Ey(e.fieldTransforms,n,t),i=t.data;i.setAll(Sy(e)),i.setAll(r),t.convertToFoundDocument(_y(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){yy(e.precondition,t)&&t.convertToNoDocument(lp.min())}(e,t)}function by(e,t){var n,r=null,i=ne(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=iy(a.transform,o||null);null!=u&&(null==r&&(r=ev.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function wy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&up(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof oy&&t instanceof oy||e instanceof sy&&t instanceof sy?up(e.elements,t.elements,Mp):e instanceof ly&&t instanceof ly?Mp(e.k,t.k):e instanceof ay&&t instanceof ay}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function _y(e){return e.isFoundDocument()?e.version:lp.min()}var xy=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Z(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return te(n)}(my),Iy=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Z(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return te(n)}(my);function Sy(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ty(e,t,n){var r=new Map;Kd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ry(o,u,n[i]))}return r}function Ey(e,t,n){var r,i=new Map,a=ne(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ny(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Cy,Ay,Ny=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return te(n)}(my),Ry=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return te(n)}(my),Dy=te((function e(t){Z(this,e),this.count=t}));function Py(e){switch(e){default:return zd();case Wd.CANCELLED:case Wd.UNKNOWN:case Wd.DEADLINE_EXCEEDED:case Wd.RESOURCE_EXHAUSTED:case Wd.INTERNAL:case Wd.UNAVAILABLE:case Wd.UNAUTHENTICATED:return!1;case Wd.INVALID_ARGUMENT:case Wd.NOT_FOUND:case Wd.ALREADY_EXISTS:case Wd.PERMISSION_DENIED:case Wd.FAILED_PRECONDITION:case Wd.ABORTED:case Wd.OUT_OF_RANGE:case Wd.UNIMPLEMENTED:case Wd.DATA_LOSS:return!0}}function Oy(e){if(void 0===e)return jd("GRPC error has no .code"),Wd.UNKNOWN;switch(e){case Cy.OK:return Wd.OK;case Cy.CANCELLED:return Wd.CANCELLED;case Cy.UNKNOWN:return Wd.UNKNOWN;case Cy.DEADLINE_EXCEEDED:return Wd.DEADLINE_EXCEEDED;case Cy.RESOURCE_EXHAUSTED:return Wd.RESOURCE_EXHAUSTED;case Cy.INTERNAL:return Wd.INTERNAL;case Cy.UNAVAILABLE:return Wd.UNAVAILABLE;case Cy.UNAUTHENTICATED:return Wd.UNAUTHENTICATED;case Cy.INVALID_ARGUMENT:return Wd.INVALID_ARGUMENT;case Cy.NOT_FOUND:return Wd.NOT_FOUND;case Cy.ALREADY_EXISTS:return Wd.ALREADY_EXISTS;case Cy.PERMISSION_DENIED:return Wd.PERMISSION_DENIED;case Cy.FAILED_PRECONDITION:return Wd.FAILED_PRECONDITION;case Cy.ABORTED:return Wd.ABORTED;case Cy.OUT_OF_RANGE:return Wd.OUT_OF_RANGE;case Cy.UNIMPLEMENTED:return Wd.UNIMPLEMENTED;case Cy.DATA_LOSS:return Wd.DATA_LOSS;default:return zd()}}(Ay=Cy||(Cy={}))[Ay.OK=0]="OK",Ay[Ay.CANCELLED=1]="CANCELLED",Ay[Ay.UNKNOWN=2]="UNKNOWN",Ay[Ay.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ay[Ay.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ay[Ay.NOT_FOUND=5]="NOT_FOUND",Ay[Ay.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ay[Ay.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ay[Ay.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ay[Ay.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ay[Ay.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ay[Ay.ABORTED=10]="ABORTED",Ay[Ay.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ay[Ay.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ay[Ay.INTERNAL=13]="INTERNAL",Ay[Ay.UNAVAILABLE=14]="UNAVAILABLE",Ay[Ay.DATA_LOSS=15]="DATA_LOSS";var Ly=function(){function e(t,n){Z(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return te(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){hp(this.inner,(function(t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return dp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),My=function(){function e(t,n){Z(this,e),this.comparator=t,this.root=n||Uy.EMPTY}return te(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Uy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Uy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Fy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Fy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Fy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Fy(this.root,e,this.comparator,!0)}}]),e}(),Fy=function(){function e(t,n,r,i){Z(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return te(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Uy=function(){function e(t,n,r,i,a){Z(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return te(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw zd();if(this.right.isRed())throw zd();var e=this.left.check();if(e!==this.right.check())throw zd();return e+(this.isRed()?0:1)}}]),e}();Uy.EMPTY=null,Uy.RED=!0,Uy.BLACK=!1,Uy.EMPTY=new(function(){function e(){Z(this,e),this.size=0}return te(e,[{key:"key",get:function(){throw zd()}},{key:"value",get:function(){throw zd()}},{key:"color",get:function(){throw zd()}},{key:"left",get:function(){throw zd()}},{key:"right",get:function(){throw zd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Uy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Vy=function(){function e(t){Z(this,e),this.comparator=t,this.data=new My(this.comparator)}return te(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new jy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new jy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),jy=function(){function e(t){Z(this,e),this.iter=t}return te(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function By(e){return e.hasNext()?e.getNext():void 0}var qy=new My(Dp.comparator);function zy(){return qy}var Ky=new My(Dp.comparator);function Gy(){return Ky}function Wy(){return new Ly((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Hy=new My(Dp.comparator),Qy=new Vy(Dp.comparator);function Yy(){for(var e=Qy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var $y=new Vy(op);function Xy(){return $y}var Jy=function(){function e(t,n,r,i,a){Z(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return te(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Zy.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(lp.min(),r,Xy(),zy(),Yy())}}]),e}(),Zy=function(){function e(t,n,r,i,a){Z(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return te(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(kp.EMPTY_BYTE_STRING,n,Yy(),Yy(),Yy())}}]),e}(),em=te((function e(t,n,r,i){Z(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),tm=te((function e(t,n){Z(this,e),this.targetId=t,this.$=n})),nm=te((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Z(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),rm=function(){function e(){Z(this,e),this.B=0,this.L=om(),this.U=kp.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return te(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Yy(),t=Yy(),n=Yy();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zd()}})),new Zy(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=om()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),im=function(){function e(t){Z(this,e),this.nt=t,this.st=new Map,this.it=zy(),this.rt=am(),this.ot=new Vy(op)}return te(e,[{key:"ut",value:function(e){var t,n=ne(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=ne(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:zd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(yv(i))if(0===n){var a=new Dp(i.path);this.ct(t,a,nv.newNoDocument(a,lp.min()))}else Kd(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&yv(a.target)){var o=new Dp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,nv.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Yy();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Jy(e,n,this.ot,this.it,r);return this.it=zy(),this.rt=am(),this.ot=new Vy(op),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new rm,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Vy(op),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Vd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new rm),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function am(){return new My(Dp.comparator)}function om(){return new My(Dp.comparator)}var um={asc:"ASCENDING",desc:"DESCENDING"},sm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cm=te((function e(t,n){Z(this,e),this.databaseId=t,this.N=n}));function lm(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fm(e,t){return e.N?t.toBase64():t.toUint8Array()}function hm(e,t){return lm(e,t.toTimestamp())}function dm(e){return Kd(!!e),lp.fromTimestamp(function(e){var t=wp(e);return new cp(t.seconds,t.nanos)}(e))}function pm(e,t){return function(e){return new vp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function vm(e){var t=vp.fromString(e);return Kd(Um(t)),t}function ym(e,t){return pm(e.databaseId,t.path)}function mm(e,t){var n=vm(t);if(n.get(1)!==e.databaseId.projectId)throw new Hd(Wd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hd(Wd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Dp(wm(n))}function gm(e,t){return pm(e.databaseId,t)}function km(e){var t=vm(e);return 4===t.length?vp.emptyPath():wm(t)}function bm(e){return new vp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wm(e){return Kd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _m(e,t,n){return{name:ym(e,t),fields:n.value.mapValue.fields}}function xm(e,t,n){var r=mm(e,t.name),i=dm(t.updateTime),a=new ev({mapValue:{fields:t.fields}}),o=nv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Im(e,t){return"found"in t?function(e,t){Kd(!!t.found),t.found.name,t.found.updateTime;var n=mm(e,t.found.name),r=dm(t.found.updateTime),i=new ev({mapValue:{fields:t.found.fields}});return nv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Kd(!!t.missing),Kd(!!t.readTime);var n=mm(e,t.missing),r=dm(t.readTime);return nv.newNoDocument(n,r)}(e,t):zd()}function Sm(e,t){var n;if(t instanceof xy)n={update:_m(e,t.key,t.value)};else if(t instanceof Ny)n={delete:ym(e,t.key)};else if(t instanceof Iy)n={update:_m(e,t.key,t.data),updateMask:Fm(t.fieldMask)};else{if(!(t instanceof Ry))return zd();n={verify:ym(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof ay)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof oy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof sy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ly)return{fieldPath:t.field.canonicalString(),increment:n.k};throw zd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zd()}(e,t.precondition)),n}function Tm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?vy.updateTime(dm(e.updateTime)):void 0!==e.exists?vy.exists(e.exists):vy.none()}(t.currentDocument):vy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Kd("REQUEST_TIME"===t.setToServerValue),n=new ay;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new oy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new sy(i)}else"increment"in t?n=new ly(e,t.increment):zd();var a=mp.fromServerFormat(t.fieldPath);return new dy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=mm(e,t.update.name),a=new ev({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new gp(t.map((function(e){return mp.fromServerFormat(e)})))}(t.updateMask);return new Iy(i,a,o,n,r)}return new xy(i,a,n,r)}if(t.delete){var u=mm(e,t.delete);return new Ny(u,n)}if(t.verify){var s=mm(e,t.verify);return new Ry(s,n)}return zd()}function Em(e,t){return{documents:[gm(e,t.path)]}}function Cm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=gm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Wp(e.value))return{unaryFilter:{field:Pm(e.field),op:"IS_NAN"}};if(Gp(e.value))return{unaryFilter:{field:Pm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wp(e.value))return{unaryFilter:{field:Pm(e.field),op:"IS_NOT_NAN"}};if(Gp(e.value))return{unaryFilter:{field:Pm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pm(e.field),op:Dm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Pm(e.field),direction:Rm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Ap(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Am(e){var t=km(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Nm(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Nv(Om(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ap(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Av(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Av(n,t)}(n.endAt)),Lv(t,i,u,o,s,"F",c,l)}function Nm(e){return e?void 0!==e.unaryFilter?[Mm(e)]:void 0!==e.fieldFilter?[Lm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Nm(e)})).reduce((function(e,t){return e.concat(t)})):zd():[]}function Rm(e){return um[e]}function Dm(e){return sm[e]}function Pm(e){return{fieldPath:e.canonicalString()}}function Om(e){return mp.fromServerFormat(e.fieldPath)}function Lm(e){return bv.create(Om(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zd()}}(e.fieldFilter.op),e.fieldFilter.value)}function Mm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Om(e.unaryFilter.field);return bv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Om(e.unaryFilter.field);return bv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Om(e.unaryFilter.field);return bv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Om(e.unaryFilter.field);return bv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zd()}}function Fm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Um(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Vm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Bm(t)),t=jm(e.get(n),t);return Bm(t)}function jm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Bm(e){return e+"\x01\x01"}function qm(e){var t=e.length;if(Kd(t>=2),2===t)return Kd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),vp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&zd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:zd()}a=o+2}return new vp(r)}var zm=["userId","batchId"];function Km(e,t){return[e,Vm(t)]}function Gm(e,t,n){return[e,Vm(t),n]}var Wm={},Hm=["prefixPath","collectionGroup","readTime","documentId"],Qm=["prefixPath","collectionGroup","documentId"],Ym=["collectionGroup","readTime","prefixPath","documentId"],$m=["canonicalId","targetId"],Xm=["targetId","path"],Jm=["path","targetId"],Zm=["collectionId","parent"],eg=["indexId","uid"],tg=["uid","sequenceNumber"],ng=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rg=["indexId","uid","orderedDocumentKey"],ig=["userId","collectionPath","documentId"],ag=["userId","collectionPath","largestBatchId"],og=["userId","collectionGroup","largestBatchId"],ug=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),sg=[].concat(Ye(ug),["documentOverlays"]),cg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lg=[].concat(cg,["indexConfiguration","indexState","indexEntries"]),fg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hg=function(){function e(){Z(this,e),this.onCommittedListeners=[]}return te(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),dg=function(){function e(t){var n=this;Z(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return te(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&zd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ne(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),pg=function(){function e(t,n){var r=this;Z(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Qd,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new mg(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=_g(e.target.error);r.At.reject(new mg(t,n))}}return te(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Vd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new kg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new mg(n,t)}}}]),e}(),vg=function(){function e(t,n,r){Z(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(_e())&&jd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return te(e,[{key:"Nt",value:function(){var e=Xe(pe().mark((function e(t){var n=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Vd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new mg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Hd(Wd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Hd(Wd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new mg(t,n))},i.onupgradeneeded=function(e){Vd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Vd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Xe(pe().mark((function e(t,n,r,i){var a,o,u,s,c=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(pe().mark((function e(){var n,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=pg.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),dg.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Vd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Vd("SimpleDb","Removing database:",e),bg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Ce())return!1;if(e.St())return!0;var t=_e(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyD475cqEFc2Y8t3DJW2-T6UPPats8iuKLo",REACT_APP_APP_ID:"1:241562361155:web:c807053b56f55a544023f6",REACT_APP_AUTH_DOMAIN:"nwitter-48bcd.firebaseapp.com",REACT_APP_MEASURE_ID:"G-5CXMSLYRYM",REACT_APP_MESSAGEIN_ID:"241562361155",REACT_APP_PROJECT_ID:"nwitter-48bcd",REACT_APP_STORAGE_BUCKET:"nwitter-48bcd.appspot.com"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),yg=function(){function e(t){Z(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return te(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return bg(this.Ft.delete())}}]),e}(),mg=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,Wd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return te(n)}(Hd);function gg(e){return"IndexedDbTransactionError"===e.name}var kg=function(){function e(t){Z(this,e),this.store=t}return te(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Vd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),bg(n)}},{key:"add",value:function(e){return Vd("SimpleDb","ADD",this.store.name,e,e),bg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return bg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Vd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Vd("SimpleDb","DELETE",this.store.name,e),bg(this.store.delete(e))}},{key:"count",value:function(){return Vd("SimpleDb","COUNT",this.store.name),bg(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new dg((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new dg((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Vd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new dg((function(n,r){t.onerror=function(e){var t=_g(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new dg((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new yg(i),o=t(i.primaryKey,i.value,a);if(o instanceof dg){var u=o.catch((function(e){return a.done(),dg.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return dg.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function bg(e){return new dg((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=_g(e.target.error);n(t)}}))}var wg=!1;function _g(e){var t=vg.Vt(_e());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Hd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return wg||(wg=!0,setTimeout((function(){throw r}),0)),r}}return e}var xg=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return te(n)}(hg);function Ig(e,t){var n=Gd(e);return vg.xt(n.Ht,t)}var Sg=function(){function e(t,n,r,i){Z(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return te(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&gy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ne(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ky(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=ne(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&ky(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(lp.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Yy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&up(this.mutations,e.mutations,(function(e,t){return wy(e,t)}))&&up(this.baseMutations,e.baseMutations,(function(e,t){return wy(e,t)}))}}]),e}(),Tg=function(){function e(t,n,r,i){Z(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return te(e,null,[{key:"from",value:function(t,n,r){Kd(t.mutations.length===r.length);for(var i=Hy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Eg=function(){function e(t,n){Z(this,e),this.largestBatchId=t,this.mutation=n}return te(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Cg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:lp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kp.EMPTY_BYTE_STRING;Z(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return te(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ag=te((function e(t){Z(this,e),this.Jt=t}));function Ng(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Rg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ym(e,t.key),fields:t.data.value.mapValue.fields,updateTime:lm(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Dg(t.version)};else{if(!t.isUnknownDocument())return zd();r.unknownDocument={path:n.path.toArray(),version:Dg(t.version)}}return r}function Rg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Dg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Pg(e){var t=new cp(e.seconds,e.nanoseconds);return lp.fromTimestamp(t)}function Og(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Tm(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Tm(e.Jt,t)})),u=cp.fromMillis(t.localWriteTimeMs);return new Sg(t.batchId,u,n,o)}function Lg(e){var t,n,r=Pg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Pg(e.lastLimboFreeSnapshotVersion):lp.min();return void 0!==e.query.documents?(Kd(1===(n=e.query).documents.length),t=zv(Mv(km(n.documents[0])))):t=function(e){return zv(Am(e))}(e.query),new Cg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,kp.fromBase64String(e.resumeToken))}function Mg(e,t){var n,r=Dg(t.snapshotVersion),i=Dg(t.lastLimboFreeSnapshotVersion);n=yv(t.target)?Em(e.Jt,t.target):Cm(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:pv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Fg(e){var t=Am({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Kv(t,t.limit,"L"):t}function Ug(e,t){return new Eg(t.largestBatchId,Tm(e.Jt,t.overlayMutation))}function Vg(e,t){var n=t.path.lastSegment();return[e,Vm(t.path.popLast()),n]}var jg=function(){function e(){Z(this,e)}return te(e,[{key:"getBundleMetadata",value:function(e,t){return Bg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Pg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Bg(e).put({bundleId:(n=t).id,createTime:Dg(dm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return qg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Fg(t.bundledQuery),readTime:Pg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return qg(e).put(function(e){return{name:e.name,readTime:Dg(dm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Bg(e){return Ig(e,"bundles")}function qg(e){return Ig(e,"namedQueries")}var zg=function(){function e(t,n){Z(this,e),this.M=t,this.userId=n}return te(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kg(e).get(Vg(this.userId,t)).next((function(e){return e?Ug(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Eg(t,a);i.push(r.Xt(e,o))})),dg.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Vm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Kg(e).Qt("collectionPathOverlayIndex",i))})),dg.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Wy(),a=Vm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ug(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Wy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kg(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ug(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Kg(e).put(function(e,t,n){var r=c(Vg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Sm(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kg(e){return Ig(e,"documentOverlays")}var Gg=function(){function e(){Z(this,e)}return te(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(_p(e.integerValue));else if("doubleValue"in e){var n=_p(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Np(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(xp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Yp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):zd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Dp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Wg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Hg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Wg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Gg.fe=new Gg;var Qg=function(){function e(){Z(this,e),this.buffer=new Uint8Array(1024),this.position=0}return te(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Hg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Hg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Yg=function(){function e(t){Z(this,e),this.De=t}return te(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),$g=function(){function e(t){Z(this,e),this.De=t}return te(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Xg=function(){function e(){Z(this,e),this.De=new Qg,this.Ce=new Yg(this.De),this.xe=new $g(this.De)}return te(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Jg=function(){function e(t,n,r,i){Z(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return te(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Zg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=ek(e.arrayValue,t.arrayValue))?n:0!==(n=ek(e.directionalValue,t.directionalValue))?n:Dp.comparator(e.documentKey,t.documentKey)}function ek(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var tk=function(){function e(t){Z(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=ne(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return te(e,[{key:"$e",value:function(e){var t=iv(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=av(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=ne(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),nk=function(){function e(){Z(this,e),this.qe=new rk}return te(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),dg.resolve()}},{key:"getCollectionParents",value:function(e,t){return dg.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return dg.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return dg.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return dg.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return dg.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return dg.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return dg.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return dg.resolve()}},{key:"updateIndexEntries",value:function(e,t){return dg.resolve()}}]),e}(),rk=function(){function e(){Z(this,e),this.index={}}return te(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Vy(vp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Vy(vp.comparator)).toArray()}}]),e}(),ik=new Uint8Array(0),ak=function(){function e(t,n){Z(this,e),this.user=t,this.databaseId=n,this.Ke=new rk,this.Ge=new Ly((function(e){return pv(e)}),(function(e,t){return vv(e,t)})),this.uid=t.uid||""}return te(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Vm(i)};return ok(e).put(a)}return dg.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[sp(t),""],!1,!0);return ok(e).qt(r).next((function(e){var r,i=ne(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(qm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=sk(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=sk(e),r=ck(e),i=uk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=uk(e),i=!0,a=new Map;return dg.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Yy(),o=[];return dg.forEach(a,(function(i,a){var u;Vd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(pv(t)));var s=function(e,t){var n=iv(t);if(void 0===n)return null;var r,i=ne(mv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ne(av(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ne(mv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ne(av(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?gv(e,o.fieldPath,e.startAt):kv(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Av(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=ne(av(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?kv(e,o.fieldPath,e.endAt):gv(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Av(r,i)}(a,i),h=n.je(i,a,l),d=n.je(i,a,f),p=n.We(i,a,c),v=n.ze(i.indexId,s,h,!!l&&l.inclusive,d,!!f&&f.inclusive,p);return dg.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Dp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return dg.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):ik,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Ye(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new Jg(e,Dp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Jg(e,Dp.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Jg(e,Dp.empty(),ik,ik)}},{key:"getFieldIndex",value:function(e,t){var n=new tk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Xg,i=ne(av(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Gg.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Xg;return Gg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Xg;return Gg.fe.Zt(qp(this.databaseId,t),n.Ne(function(e){var t=av(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Xg);var i,a=0,o=ne(av(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ne(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&Kp(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);Gg.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Ye(e),a=[],o=ne(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ne(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Xg;f.seed(l.Se()),Gg.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof bv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=sk(e),i=ck(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return dg.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new uv(t.sequenceNumber,new lv(Pg(t.readTime),new Dp(qm(t.documentKey)),t.largestBatchId)):uv.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new ov(mp.fromServerFormat(n),r)}));return new rv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:op(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=sk(e),a=ck(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return dg.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Dg(r.readTime),documentKey:Vm(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return dg.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?dg.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),dg.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?dg.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return uk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return uk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=uk(e),i=new Vy(Zg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Jg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Vy(Zg),r=this.Ze(t,e);if(null==r)return n;var i=iv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Kp(a)){var o,u=ne(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Jg(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Jg(t.indexId,e.key,ik,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Vd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=By(a),s=By(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=By(o)):l?(i(u),u=By(a)):(u=By(a),s=By(o))}}(r,i,Zg,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),dg.waitFor(o)}},{key:"rn",value:function(e){var t=1;return ck(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Zg(e,t)})).filter((function(e,t,n){return!t||0!==Zg(e,n[t-1])}));var r=[];r.push(e);var i,a=ne(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Zg(o,e),s=Zg(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,ik,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,ik,[]]));return c}}]),e}();function ok(e){return Ig(e,"collectionParents")}function uk(e){return Ig(e,"indexEntries")}function sk(e){return Ig(e,"indexConfiguration")}function ck(e){return Ig(e,"indexState")}var lk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fk=function(){function e(t,n,r){Z(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return te(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function hk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Kd(1===u)})));var c,l=[],f=ne(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Gm(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return dg.waitFor(a).next((function(){return l}))}function dk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zd();t=e.noDocument}return JSON.stringify(t).length}fk.DEFAULT_COLLECTION_PERCENTILE=10,fk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fk.DEFAULT=new fk(41943040,fk.DEFAULT_COLLECTION_PERCENTILE,fk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fk.DISABLED=new fk(-1,0,0);var pk=function(){function e(t,n,r,i){Z(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return te(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yk(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=mk(e),o=yk(e);return o.add({}).next((function(u){Kd("number"==typeof u);var s,c=new Sg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Sm(e.Jt,t)})),i=n.mutations.map((function(t){return Sm(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Vy((function(e,t){return op(e.canonicalString(),t.canonicalString())})),d=ne(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Gm(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Wm))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),dg.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return yk(e).get(t).next((function(e){return e?(Kd(e.userId===n.userId),Og(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?dg.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return yk(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Kd(t.batchId>=r),a=Og(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yk(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yk(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Og(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Km(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return mk(e).Wt({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=qm(l);if(s===n.userId&&t.path.isEqual(h))return yk(e).get(f).next((function(e){if(!e)throw zd();Kd(e.userId===n.userId),a.push(Og(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Vy(op),i=[];return t.forEach((function(t){var a=Km(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=mk(e).Wt({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=qm(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),dg.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Km(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Vy(op);return mk(e).Wt({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=qm(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(yk(e).get(t).next((function(e){if(null===e)throw zd();Kd(e.userId===n.userId),r.push(Og(n.M,e))})))})),dg.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return hk(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),dg.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return dg.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return mk(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=qm(e[1]);i.push(a)}else r.done()})).next((function(){Kd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return vk(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return gk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Kd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function vk(e,t,n){var r=Km(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return mk(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function yk(e){return Ig(e,"mutations")}function mk(e){return Ig(e,"documentMutations")}function gk(e){return Ig(e,"mutationQueues")}var kk=function(){function e(t){Z(this,e),this.mn=t}return te(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),bk=function(){function e(t,n){Z(this,e),this.referenceDelegate=t,this.M=n}return te(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new kk(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return lp.fromTimestamp(new cp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return wk(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Kd(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return wk(e).Wt((function(o,u){var s=Lg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return dg.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return wk(e).Wt((function(e,n){var r=Lg(n);t(r)}))}},{key:"pn",value:function(e){return _k(e).get("targetGlobalKey").next((function(e){return Kd(null!==e),e}))}},{key:"In",value:function(e,t){return _k(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return wk(e).put(Mg(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=pv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return wk(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Lg(n);vv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=xk(e);return t.forEach((function(t){var o=Vm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),dg.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=xk(e);return dg.forEach(t,(function(t){var a=Vm(t.path);return dg.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=xk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=xk(e),i=Yy();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=qm(e[1]),a=new Dp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Vm(t.path),r=IDBKeyRange.bound([n],[sp(n)],!1,!0),i=0;return xk(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return wk(e).get(t).next((function(e){return e?Lg(e):null}))}}]),e}();function wk(e){return Ig(e,"targets")}function _k(e){return Ig(e,"targetGlobal")}function xk(e){return Ig(e,"targetDocuments")}function Ik(e){return Sk.apply(this,arguments)}function Sk(){return Sk=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Wd.FAILED_PRECONDITION&&t.message===fg){e.next=2;break}throw t;case 2:Vd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Sk.apply(this,arguments)}function Tk(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=op(r,o);return 0===s?op(i,u):s}var Ek=function(){function e(t){Z(this,e),this.An=t,this.buffer=new Vy(Tk),this.Rn=0}return te(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Tk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ck=function(){function e(t,n){Z(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return te(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Vd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Xe(pe().mark((function n(){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!gg(n.t0)){n.next=12;break}Vd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Ik(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Ak=function(){function e(t,n){Z(this,e),this.Dn=t,this.params=n}return te(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return dg.resolve(rp.A);var r=new Ek(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vd("LruGarbageCollector","Garbage collection skipped; disabled"),dg.resolve(lk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Vd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),lk):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Vd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ud()<=nt.DEBUG&&Vd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),dg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Nk=function(){function e(t,n){Z(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ak(e,t)}(this,n)}return te(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Rk(e,n)}},{key:"removeReference",value:function(e,t,n){return Rk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Rk(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return gk(e).zt((function(r){return vk(e,r,t).next((function(e){return e&&(n=!0),dg.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,lp.min()),xk(e).delete([0,Vm(o.path)])}))}));i.push(s)}})).next((function(){return dg.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Rk(e,t)}},{key:"Mn",value:function(e,t){var n,r=xk(e),i=rp.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==rp.A&&t(new Dp(qm(n)),i),i=s,n=u):i=rp.A})).next((function(){i!==rp.A&&t(new Dp(qm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Rk(e,t){return xk(e).put(function(e,t){return{targetId:0,path:Vm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Dk=function(){function e(){Z(this,e),this.changes=new Ly((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return te(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,nv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?dg.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Pk=function(){function e(t){Z(this,e),this.M=t}return te(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Mk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Mk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Rg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=nv.newInvalidDocument(t);return Mk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Fk(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:nv.newInvalidDocument(t)};return Mk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Fk(t))},(function(e,i){r={document:n.$n(t,i),size:dk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=zy();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=zy(),i=new My(Dp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,dk(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return dg.resolve();var r=new Vy(Vk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Fk(r.first()),Fk(r.last())),a=r.getIterator(),o=a.getNext();return Mk(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Dp.fromSegments([].concat(Ye(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Vk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Fk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Rg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mk(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=zy(),i=ne(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Dp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=zy(),o=Uk(t,n),u=Uk(t,lv.max());return Mk(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Dp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Ok(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Lk(e).get("remoteDocumentGlobalKey").next((function(e){return Kd(!!e),e}))}},{key:"Fn",value:function(e,t){return Lk(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=xm(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Dp.fromSegments(t.noDocument.path),i=Pg(t.noDocument.readTime);n=nv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zd();var a=Dp.fromSegments(t.unknownDocument.path),o=Pg(t.unknownDocument.version);n=nv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new cp(e[0],e[1]);return lp.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(lp.min()))return n}return nv.newInvalidDocument(e)}}]),e}(),Ok=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Ly((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return te(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Vy((function(e,t){return op(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Ng(t.Kn.M,o);i=i.add(a.path.popLast());var c=dk(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Ng(t.Kn.M,o.convertToNoDocument(lp.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),dg.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Dk);function Lk(e){return Ig(e,"remoteDocumentGlobal")}function Mk(e){return Ig(e,"remoteDocumentsV14")}function Fk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Uk(e,t){var n=t.documentKey.path.toArray();return[e,Rg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Vk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=op(n[a],r[a]))return i;return(i=op(n.length,r.length))||((i=op(n[n.length-2],r[r.length-2]))||op(n[n.length-1],r[r.length-1]))}var jk=function(){function e(t){Z(this,e),this.M=t}return te(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new pg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zm,{unique:!0}),e.createObjectStore("documentMutations")}(e),Bk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=dg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Bk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:lp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return dg.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ig});t.createIndex("collectionPathOverlayIndex",ag,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",og,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Hm});t.createIndex("documentKeyIndex",Qm),t.createIndex("collectionGroupIndex",Ym)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:eg}).createIndex("sequenceNumberIndex",tg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ng}).createIndex("documentKeyIndex",rg,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=dk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return dg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return dg.forEach(r,(function(r){Kd(r.userId===n.userId);var i=Og(t.M,r);return hk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new vp(n),o=function(e){return[0,Vm(e)]}(a);r.push(t.get(o).next((function(n){return n?dg.resolve():function(n){return t.put({targetId:0,path:Vm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return dg.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Zm});var n=t.store("collectionParents"),r=new rk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Vm(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new vp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],qm(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Lg(r),a=Mg(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Dp(vp.fromString(i.document.name).popFirst(5)):i.noDocument?Dp.fromSegments(i.noDocument.path):i.unknownDocument?Dp.fromSegments(i.unknownDocument.path):zd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return dg.waitFor(r)}))}}]),e}();function Bk(e){e.createObjectStore("targetDocuments",{keyPath:Xm}).createIndex("documentTargetsIndex",Jm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$m,{unique:!0}),e.createObjectStore("targetGlobal")}var qk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zk=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(Z(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Hd(Wd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nk(this,i),this.hs=n+"main",this.M=new Ag(s),this.ls=new vg(this.hs,this.ts,new jk(this.M)),this.fs=new bk(this.referenceDelegate,this.M),this.ds=function(e){return new Pk(e)}(this.M),this._s=new jg,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&jd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return te(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Hd(Wd.FAILED_PRECONDITION,qk);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new rp(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Xe(pe().mark((function n(r){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Xe(pe().mark((function t(n){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Gk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(gg(t))return Vd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Vd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return Kk(e).get("owner").next((function(e){return dg.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return Gk(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Xe(pe().mark((function e(){var t,n,r,i,a=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ig(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return dg.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=ne(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?dg.resolve(!0):Kk(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Hd(Wd.FAILED_PRECONDITION,qk);return!1}}return!(!t.networkEnabled||!t.inForeground)||Gk(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Vd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Xe(pe().mark((function e(){var t=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new xg(e,rp.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Gk(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return pk.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new ak(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return zg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Vd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?lg:13===i?cg:12===i?sg:11===i?ug:void zd();return this.ls.runTransaction(e,o,u,(function(i){return a=new xg(i,r.es?r.es.next():rp.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw jd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Hd(Wd.FAILED_PRECONDITION,fg);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return Kk(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Hd(Wd.FAILED_PRECONDITION,qk)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kk(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=Kk(e);return n.get("owner").next((function(e){return t.bs(e)?(Vd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):dg.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(jd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Vd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return jd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Oc){jd("Failed to set zombie client id.",Oc)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Oc){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return vg.vt()}}]),e}();function Kk(e){return Ig(e,"owner")}function Gk(e){return Ig(e,"clientMetadata")}function Wk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Hk=function(){function e(t,n,r){Z(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return te(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=ne(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=ne(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Dp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Bv(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Dp(t)).next((function(e){var t=Gy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Gy();return this.indexManager.getCollectionParents(e,i).next((function(o){return dg.forEach(o,(function(o){var u=function(e,t){return new Ov(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=ne(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=nv.newInvalidDocument(s),r=r.insert(s,c)),ky(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Qv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Qk=function(){function e(t,n,r,i){Z(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return te(e,null,[{key:"Ys",value:function(t,n){var r,i=Yy(),a=Yy(),o=ne(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Yk=function(){function e(){Z(this,e)}return te(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(lp.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(Fv(t)||Uv(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(Ud()<=nt.DEBUG&&Vd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Hv(t)),i.Zs.Qs(e,t,sv(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new Vy($v(e));return t.forEach((function(t,r){Qv(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return Ud()<=nt.DEBUG&&Vd("QueryEngine","Using full collection scan to execute query:",Hv(t)),this.Zs.Qs(e,t,lv.min())}}]),e}(),$k=function(){function e(t,n,r,i){Z(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new My(op),this.ri=new Ly((function(e){return pv(e)}),vv),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return te(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Hk(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function Xk(e,t,n,r){return new $k(e,t,n,r)}function Jk(e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Yy(),s=ne(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ne(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ne(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ne(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Zk.apply(this,arguments)}function eb(e,t){var n=Gd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=dg.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Kd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function tb(e){var t=Gd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function nb(e,t){var n=Gd(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(kp.EMPTY_BYTE_STRING,lp.min()).withLastLimboFreeSnapshotVersion(lp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=zy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(lp.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return dg.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function rb(e,t,n){var r=Yy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=zy();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(lp.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Vd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function ib(e,t){var n=Gd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function ab(e,t){var n=Gd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,dg.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new Cg(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function ob(e,t,n){return ub.apply(this,arguments)}function ub(){return ub=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gd(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),gg(e.t1)){e.next=12;break}throw e.t1;case 12:Vd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ub.apply(this,arguments)}function sb(e,t,n){var r=Gd(e),i=lp.min(),a=Yy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Gd(e),i=r.ri.get(n);return void 0!==i?dg.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,zv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:lp.min(),n?a:Yy())})).next((function(e){return fb(r,Yv(t),e),{documents:e,li:a}}))}))}function cb(e,t){var n=Gd(e),r=Gd(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function lb(e,t){var n=Gd(e),r=n.oi.get(t)||lp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,sv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return fb(n,t,e),e}))}function fb(e,t,n){var r=lp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function hb(e,t,n,r){return db.apply(this,arguments)}function db(){return db=Xe(pe().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Gd(t),o=Yy(),u=zy(),s=ne(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.fi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.di(l)).setReadTime(n._i(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,ab(a,function(e){return zv(Mv(vp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return rb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=Xe(pe().mark((function e(t,n){var r,i,a,o=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Yy(),e.next=3,ab(t,zv(Fg(n.bundledQuery)));case 3:return i=e.sent,a=Gd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=dm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(kp.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}var yb=function(){function e(t){Z(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return te(e,[{key:"getBundleMetadata",value:function(e,t){return dg.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:dm(n.createTime)}),dg.resolve()}},{key:"getNamedQuery",value:function(e,t){return dg.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:Fg(e.bundledQuery),readTime:dm(e.readTime)}}(t)),dg.resolve()}}]),e}(),mb=function(){function e(){Z(this,e),this.overlays=new My(Dp.comparator),this.gi=new Map}return te(e,[{key:"getOverlay",value:function(e,t){return dg.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),dg.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),dg.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Wy(),i=t.length+1,a=new Dp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return dg.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new My((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Wy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Wy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return dg.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Eg(t,n));var a=this.gi.get(t);void 0===a&&(a=Yy(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),gb=function(){function e(){Z(this,e),this.yi=new Vy(kb.pi),this.Ii=new Vy(kb.Ti)}return te(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new kb(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new kb(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new Dp(new vp([])),r=new kb(n,e),i=new kb(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new Dp(new vp([])),n=new kb(t,e),r=new kb(t,e+1),i=Yy();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new kb(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),kb=function(){function e(t,n){Z(this,e),this.key=t,this.vi=n}return te(e,null,[{key:"pi",value:function(e,t){return Dp.comparator(e.key,t.key)||op(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return op(e.vi,t.vi)||Dp.comparator(e.key,t.key)}}]),e}(),bb=function(){function e(t,n){Z(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Vy(kb.pi)}return te(e,[{key:"checkEmpty",value:function(e){return dg.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Sg(i,t,n,r);this.Bs.push(a);var o,u=ne(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new kb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return dg.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return dg.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return dg.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return dg.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return dg.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new kb(t,0),i=new kb(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),dg.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Vy(op);return t.forEach((function(e){var t=new kb(e,0),i=new kb(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),dg.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Dp.isDocumentKey(i)||(i=i.child(""));var a=new kb(new Dp(i),0),o=new Vy(op);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),dg.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Kd(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return dg.forEach(t.mutations,(function(i){var a=new kb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new kb(t,0),r=this.Di.firstAfterOrEqual(n);return dg.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,dg.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),wb=function(){function e(t){Z(this,e),this.Mi=t,this.docs=new My(Dp.comparator),this.size=0}return te(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return dg.resolve(n?n.document.mutableCopy():nv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=zy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():nv.newInvalidDocument(e))})),dg.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=zy(),i=new Dp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||fv(cv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return dg.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){zd()}},{key:"Oi",value:function(e,t){return dg.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _b(this)}},{key:"getSize",value:function(e){return dg.resolve(this.size)}}]),e}(),_b=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).Kn=e,r}return te(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),dg.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Dk),xb=function(){function e(t){Z(this,e),this.persistence=t,this.Fi=new Ly((function(e){return pv(e)}),vv),this.lastRemoteSnapshotVersion=lp.min(),this.highestTargetId=0,this.$i=0,this.Bi=new gb,this.targetCount=0,this.Li=kk.gn()}return te(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),dg.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return dg.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return dg.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),dg.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),dg.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new kk(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,dg.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),dg.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,dg.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),dg.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return dg.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return dg.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),dg.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),dg.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),dg.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return dg.resolve(n)}},{key:"containsKey",value:function(e,t){return dg.resolve(this.Bi.containsKey(t))}}]),e}(),Ib=function(){function e(t,n){var r=this;Z(this,e),this.Ui={},this.overlays={},this.es=new rp(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new xb(this),this.indexManager=new nk,this.ds=new wb((function(e){return r.referenceDelegate.qi(e)})),this.M=new Ag(n),this._s=new yb(this.M)}return te(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new mb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new bb(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Vd("MemoryPersistence","Starting transaction:",e);var i=new Sb(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return dg.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Sb=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return te(n)}(hg),Tb=function(){function e(t){Z(this,e),this.persistence=t,this.ji=new gb,this.Wi=null}return te(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw zd()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),dg.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),dg.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),dg.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dg.forEach(this.Hi,(function(r){var i=Dp.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,lp.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return dg.or([function(){return dg.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function Eb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Cb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ab(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Nb=function(){function e(t,n,r,i){Z(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return te(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Hd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(jd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Rb=function(){function e(t,n,r){Z(this,e),this.targetId=t,this.state=n,this.error=r}return te(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hd(i.error.code,i.error.message))),a?new e(t,i.state,r):(jd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Db=function(){function e(t,n){Z(this,e),this.clientId=t,this.activeTargetIds=n}return te(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Xy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Rp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(jd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Pb=function(){function e(t,n){Z(this,e),this.clientId=t,this.onlineState=n}return te(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(jd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Ob=function(){function e(){Z(this,e),this.activeTargetIds=Xy()}return te(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Lb=function(){function e(t,n,r,i,a){Z(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new My(op),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=Eb(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new Ob),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return te(e,[{key:"start",value:function(){var e=Xe(pe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=ne(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Eb(this.persistenceKey,i)))&&(o=Db.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=ne(this.rr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.sr(f)}catch(d){c.e(d)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ab(this.persistenceKey,e));if(n){var r=Rb.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ab(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Vd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Vd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Vd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Vd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void jd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Xe(pe().mark((function e(){var r,i,a,o,u,s,c;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=rp.A;if(null!=e)try{var n=JSON.parse(e);Kd("number"==typeof n),t=n}catch(e){jd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==rp.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new Nb(this.currentUser,e,t,n),i=Cb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=Cb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=Ab(this.persistenceKey,e),i=new Rb(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return Db.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Nb.Yi(new Ld(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return Rb.Yi(r,t)}},{key:"mr",value:function(e){return Pb.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:Vd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=Xy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Mb=function(){function e(){Z(this,e),this.$r=new Ob,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return te(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new Ob,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Fb=function(){function e(){Z(this,e)}return te(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ub=function(){function e(){var t=this;Z(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return te(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){Vd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ne(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Vd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ne(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jb=function(){function e(t){Z(this,e),this.Wr=t.Wr,this.zr=t.zr}return te(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),Bb=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return te(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Pd;o.listenOnce(Cd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ed.NO_ERROR:var t=o.getResponseJson();Vd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ed.TIMEOUT:Vd("Connection",'RPC "'+e+'" timed out'),a(new Hd(Wd.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:var n=o.getStatus();if(Vd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wd).indexOf(t)>=0?t:Wd.UNKNOWN}(r.status);a(new Hd(u,r.message))}else a(new Hd(Wd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Hd(Wd.UNAVAILABLE,"Connection failed."));break;default:zd()}}finally{Vd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Sd(),a=Td(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Rd({})),this.ao(o.initMessageHeaders,t,n),xe()||Te()||_e().indexOf("Electron/")>=0||Ee()||_e().indexOf("MSAppHost/")>=0||Se()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Vd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new jb({Wr:function(e){l?Vd("Connection","Not sending because WebChannel is closed:",e):(c||(Vd("Connection","Opening WebChannel transport."),s.open(),c=!0),Vd("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Dd.EventType.OPEN,(function(){l||Vd("Connection","WebChannel transport opened.")})),h(s,Dd.EventType.CLOSE,(function(){l||(l=!0,Vd("Connection","WebChannel transport closed"),f.no())})),h(s,Dd.EventType.ERROR,(function(e){l||(l=!0,Bd("Connection","WebChannel transport errored:",e),f.no(new Hd(Wd.UNAVAILABLE,"The operation could not be completed")))})),h(s,Dd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Kd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Vd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Cy[e];if(void 0!==t)return Oy(t)}(a),u=i.message;void 0===o&&(o=Wd.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new Hd(o,u)),s.close()}else Vd("Connection","WebChannel received:",n),f.so(n)}})),h(a,Ad.STAT_EVENT,(function(e){e.stat===Nd.PROXY?Vd("Connection","Detected buffering proxy"):e.stat===Nd.NOPROXY&&Vd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){Z(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return te(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);Vd("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return Vd("RestConnection","Received: ",e),e}),(function(t){throw Bd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Md,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=Vb[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function qb(){return"undefined"!=typeof window?window:null}function zb(){return"undefined"!=typeof document?document:null}function Kb(e){return new cm(e,!0)}var Gb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Z(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return te(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&Vd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),Wb=function(){function e(t,n,r,i,a,o,u,s){Z(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Gb(t,n)}return te(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===Wd.RESOURCE_EXHAUSTED?(jd(n.toString()),jd("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===Wd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new Hd(Wd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return Vd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(Vd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Hb=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o,u){var s;return Z(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return te(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Kd(void 0===t||"string"==typeof t),kp.fromBase64String(t||"")):(Kd(void 0===t||t instanceof Uint8Array),kp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Wd.UNKNOWN:Oy(e.code);return new Hd(t,e.message||"")}(o);n=new nm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=mm(e,s.document.name),l=dm(s.document.updateTime),f=new ev({mapValue:{fields:s.document.fields}}),h=nv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new em(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=mm(e,v.document),m=v.readTime?dm(v.readTime):lp.min(),g=nv.newNoDocument(y,m),k=v.removedTargetIds||[];n=new em([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=mm(e,b.document),_=b.removedTargetIds||[];n=new em([],_,w,null)}else{if(!("filter"in t))return zd();t.filter;var x=t.filter;x.targetId;var I=x.count||0,S=new Dy(I),T=x.targetId;n=new tm(T,S)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return lp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?lp.min():t.readTime?dm(t.readTime):lp.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=bm(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=yv(r)?{documents:Em(e,r)}:{query:Cm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=fm(e,t.resumeToken):t.snapshotVersion.compareTo(lp.min())>0&&(n.readTime=lm(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=bm(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(Wb),Qb=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o,u){var s;return Z(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return te(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,sn(oe(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(Kd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(Kd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?dm(e.updateTime):dm(t);return n.isEqual(lp.min())&&(n=dm(t)),new py(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=dm(e.commitTime);return this.listener.Yo(n,t)}return Kd(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=bm(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Sm(t.M,e)}))};this.Fo(n)}}]),n}(Wb),Yb=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o;return Z(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return te(n,[{key:"eu",value:function(){if(this.tu)throw new Hd(Wd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hd(Wd.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hd(Wd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return te((function e(){Z(this,e)}))}()),$b=function(){function e(t,n){Z(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return te(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(jd(t),this.iu=!1):Vd("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),Xb=te((function e(t,n,r,i,a){var o=this;Z(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr((function(e){r.enqueueAndForget(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=sw(o),!e.t0){e.next=5;break}return Vd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gd(t)).fu.add(4),e.next=4,ew(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,Jb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new $b(r,i)}));function Jb(e){return Zb.apply(this,arguments)}function Zb(){return Zb=Xe(pe().mark((function e(t){var n,r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sw(t)){e.next=18;break}n=ne(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Zb.apply(this,arguments)}function ew(e){return tw.apply(this,arguments)}function tw(){return tw=Xe(pe().mark((function e(t){var n,r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ne(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),tw.apply(this,arguments)}function nw(e,t){var n=Gd(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),uw(n)?ow(n):Fw(n).xo()&&iw(n,t))}function rw(e,t){var n=Gd(e),r=Fw(n);n.lu.delete(t),r.xo()&&aw(n,t),0===n.lu.size&&(r.xo()?r.Mo():sw(n)&&n.wu.set("Unknown"))}function iw(e,t){e.mu.Z(t.targetId),Fw(e).jo(t)}function aw(e,t){e.mu.Z(t),Fw(e).Wo(t)}function ow(e){e.mu=new im({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),Fw(e).start(),e.wu.ru()}function uw(e){return sw(e)&&!Fw(e).Co()&&e.lu.size>0}function sw(e){return 0===Gd(e).fu.size}function cw(e){e.mu=void 0}function lw(e){return fw.apply(this,arguments)}function fw(){return fw=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){iw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return dw.apply(this,arguments)}function dw(){return dw=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cw(t),uw(t)?(t.wu.au(n),ow(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t,n){return vw.apply(this,arguments)}function vw(){return vw=Xe(pe().mark((function e(t,n,r){var i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof nm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ne(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Vd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,yw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof em?t.mu.ut(n):n instanceof tm?t.mu._t(n):t.mu.ht(n),r.isEqual(lp.min())){e.next=29;break}return e.prev=14,e.next=17,tb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(kp.EMPTY_BYTE_STRING,n.snapshotVersion)),aw(e,t);var r=new Cg(n.target,t,1,n.sequenceNumber);iw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Vd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,yw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),vw.apply(this,arguments)}function yw(e,t,n){return mw.apply(this,arguments)}function mw(){return mw=Xe(pe().mark((function e(t,n,r){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gg(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,ew(t);case 5:t.wu.set("Offline"),r||(r=function(){return tb(t.localStore)}),t.asyncQueue.enqueueRetryable(Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,Jb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}function gw(e,t){return t().catch((function(n){return yw(e,n,t)}))}function kw(e){return bw.apply(this,arguments)}function bw(){return bw=Xe(pe().mark((function e(t){var n,r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gd(t),r=Uw(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!ww(n)){e.next=19;break}return e.prev=3,e.next=6,ib(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,_w(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,yw(n,e.t0);case 17:e.next=2;break;case 19:xw(n)&&Iw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bw.apply(this,arguments)}function ww(e){return sw(e)&&e.hu.length<10}function _w(e,t){e.hu.push(t);var n=Uw(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function xw(e){return sw(e)&&!Uw(e).Co()&&e.hu.length>0}function Iw(e){Uw(e).start()}function Sw(e){return Tw.apply(this,arguments)}function Tw(){return Tw=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Uw(t).Zo();case 1:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Ew(e){return Cw.apply(this,arguments)}function Cw(){return Cw=Xe(pe().mark((function e(t){var n,r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Uw(t),r=ne(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Aw(e,t,n){return Nw.apply(this,arguments)}function Nw(){return Nw=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=Tg.from(i,n,r),e.next=3,gw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,kw(t);case 5:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Rw(e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=Xe(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Uw(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Py(i=n.code)||i===Wd.ABORTED){e.next=7;break}return r=t.hu.shift(),Uw(t).ko(),e.next=5,gw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,kw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:xw(t)&&Iw(t);case 5:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Pw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gd(t)).asyncQueue.verifyOperationInProgress(),Vd("RemoteStore","RemoteStore received new credentials"),i=sw(r),r.fu.add(3),e.next=6,ew(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,Jb(r);case 12:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Lw(e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,Jb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,ew(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e){return e.gu||(e.gu=function(e,t,n){var r=Gd(e);return r.eu(),new Hb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:lw.bind(null,e),Yr:hw.bind(null,e),Qo:pw.bind(null,e)}),e.du.push(function(){var t=Xe(pe().mark((function t(n){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),uw(e)?ow(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:cw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function Uw(e){return e.yu||(e.yu=function(e,t,n){var r=Gd(e);return r.eu(),new Qb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Sw.bind(null,e),Yr:Rw.bind(null,e),Xo:Ew.bind(null,e),Yo:Aw.bind(null,e)}),e.du.push(function(){var t=Xe(pe().mark((function t(n){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,kw(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(Vd("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var Vw=function(){function e(t,n,r,i,a){Z(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return te(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hd(Wd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function jw(e,t){if(jd("AsyncQueue","".concat(t,": ").concat(e)),gg(e))return new Hd(Wd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Bw=function(){function e(t){Z(this,e),this.comparator=t?function(e,n){return t(e,n)||Dp.comparator(e.key,n.key)}:function(e,t){return Dp.comparator(e.key,t.key)},this.keyedMap=Gy(),this.sortedSet=new My(this.comparator)}return te(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),qw=function(){function e(){Z(this,e),this.pu=new My(Dp.comparator)}return te(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):zd():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),zw=function(){function e(t,n,r,i,a,o,u,s){Z(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return te(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Bw.emptySet(n),a,r,i,!0,!1)}}]),e}(),Kw=te((function e(){Z(this,e),this.Tu=void 0,this.listeners=[]})),Gw=te((function e(){Z(this,e),this.queries=new Ly((function(e){return Wv(e)}),Gv),this.onlineState="Unknown",this.Eu=new Set}));function Ww(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=Xe(pe().mark((function e(t,n){var r,i,a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Kw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=jw(e.t0,"Initialization of query '".concat(Hv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&Jw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Hw.apply(this,arguments)}function Qw(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=Xe(pe().mark((function e(t,n){var r,i,a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function $w(e,t){var n,r=Gd(e),i=!1,a=ne(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ne(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Tu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Jw(r)}function Xw(e,t,n){var r=Gd(e),i=r.queries.get(t);if(i){var a,o=ne(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Jw(e){e.Eu.forEach((function(e){e.next()}))}var Zw=function(){function e(t,n,r){Z(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return te(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ne(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new zw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=zw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),e_=function(){function e(t,n){Z(this,e),this.payload=t,this.byteLength=n}return te(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),t_=function(){function e(t){Z(this,e),this.M=t}return te(e,[{key:"fi",value:function(e){return mm(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?xm(this.M,e.document,!1):nv.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return dm(e)}}]),e}(),n_=function(){function e(t,n,r){Z(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=r_(t)}return te(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=vp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new t_(this.M),i=ne(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=ne(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Yy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Xe(pe().mark((function e(){var t,n,r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hb(this.localStore,new t_(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=ne(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,pb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function r_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var i_=te((function e(t){Z(this,e),this.key=t})),a_=te((function e(t){Z(this,e),this.key=t})),o_=function(){function e(t,n){Z(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=Yy(),this.mutatedKeys=Yy(),this.Uu=$v(t),this.qu=new Bw(this.Uu)}return te(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new qw,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Fv(this.query)&&i.size===this.query.limit?i.last():null,c=Uv(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Qv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Fv(this.query)||Uv(this.query))for(;o.size>this.query.limit;){var l=Fv(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zd()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new zw(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new qw,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=Yy(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new a_(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new i_(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=Yy();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return zw.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),u_=te((function e(t,n,r){Z(this,e),this.query=t,this.targetId=n,this.view=r})),s_=te((function e(t){Z(this,e),this.key=t,this.Zu=!1})),c_=function(){function e(t,n,r,i,a,o){Z(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new Ly((function(e){return Wv(e)}),Gv),this.na=new Map,this.sa=new Set,this.ia=new My(Dp.comparator),this.ra=new Map,this.oa=new gb,this.ua={},this.aa=new Map,this.ca=kk.yn(),this.onlineState="Unknown",this.ha=void 0}return te(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rx(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,ab(r.localStore,zv(n));case 8:return u=e.sent,r.isPrimaryClient&&nw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,h_(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e,t,n,r){return d_.apply(this,arguments)}function d_(){return d_=Xe(pe().mark((function e(t,n,r,i){var a,o,u,s,c,l;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=Xe(pe().mark((function e(t,n,r,i){var a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,sb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(P_(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,sb(t.localStore,n,!0);case 3:return a=e.sent,o=new o_(n,a.li),u=o.Gu(a.documents),s=Zy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),P_(t,r,c.Hu),l=new u_(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t){return v_.apply(this,arguments)}function v_(){return v_=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!Gv(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ob(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),rw(r.remoteStore,i.targetId),R_(r,i.targetId)})).catch(Ik);case 9:e.next=14;break;case 11:return R_(r,i.targetId),e.next=14,ob(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function y_(e,t,n){return m_.apply(this,arguments)}function m_(){return m_=Xe(pe().mark((function e(t,n,r){var i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ix(t),e.prev=1,e.next=4,function(e,t){var n,r=Gd(e),i=cp.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Yy());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=ne(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=by(c,n.get(c.key));null!=l&&u.push(new Iy(c.key,l,tv(l.value.mapValue),vy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new My(op)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,M_(i,a.changes);case 9:return e.next=11,kw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=jw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),m_.apply(this,arguments)}function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.prev=1,e.next=4,nb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(Kd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?Kd(n.Zu):e.removedDocuments.size>0&&(Kd(n.Zu),n.Zu=!1))})),e.next=8,M_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ik(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),k_.apply(this,arguments)}function b_(e,t,n){var r=Gd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ne(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Jw(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function w_(e,t,n){return __.apply(this,arguments)}function __(){return __=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s,c;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new My(Dp.comparator)).insert(o,nv.newNoDocument(o,lp.min())),s=Yy().add(o),c=new Jy(lp.min(),new Map,new Vy(op),u,s),e.next=9,g_(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),L_(i),e.next=16;break;case 14:return e.next=16,ob(i.localStore,n,!1).then((function(){return R_(i,n,r)})).catch(Ik);case 16:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function x_(e,t){return I_.apply(this,arguments)}function I_(){return I_=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=n.batch.batchId,e.prev=1,e.next=4,eb(r.localStore,n);case 4:return a=e.sent,N_(r,i,null),A_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,M_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ik(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),I_.apply(this,arguments)}function S_(e,t,n){return T_.apply(this,arguments)}function T_(){return T_=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gd(t),e.prev=1,e.next=4,function(e,t){var n=Gd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Kd(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,N_(i,n,r),A_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,M_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ik(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),T_.apply(this,arguments)}function E_(e,t){return C_.apply(this,arguments)}function C_(){return C_=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sw((r=Gd(t)).remoteStore)||Vd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Gd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=jw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),C_.apply(this,arguments)}function A_(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function N_(e,t,n){var r=Gd(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function R_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ne(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||D_(e,t)}))}function D_(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(rw(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),L_(e))}function P_(e,t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof i_?(e.oa.addReference(a.key,t),O_(e,a)):a instanceof a_?(Vd("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||D_(e,a.key)):zd()}}catch(o){i.e(o)}finally{i.f()}}function O_(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(Vd("SyncEngine","New document in limbo: "+n),e.sa.add(r),L_(e))}function L_(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new Dp(vp.fromString(t)),r=e.ca.next();e.ra.set(r,new s_(n)),e.ia=e.ia.insert(n,r),nw(e.remoteStore,new Cg(zv(Mv(n.path)),r,2,rp.A))}}function M_(e,t,n){return F_.apply(this,arguments)}function F_(){return F_=Xe(pe().mark((function e(t,n,r){var i,a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gd(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Qk.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return dg.forEach(n,(function(t){return dg.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return dg.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),gg(e.t0)){e.next=10;break}throw e.t0;case 10:Vd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ne(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e,t){return V_.apply(this,arguments)}function V_(){return V_=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gd(t)).currentUser.isEqual(n)){e.next=11;break}return Vd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Jk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new Hd(Wd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,M_(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function j_(e,t){var n=Gd(e),r=n.ra.get(t);if(r&&r.Zu)return Yy().add(r.key);var i=Yy(),a=n.na.get(t);if(!a)return i;var o,u=ne(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(l){u.e(l)}finally{u.f()}return i}function B_(e,t){return q_.apply(this,arguments)}function q_(){return q_=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.next=3,sb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&P_(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function z_(e,t){return K_.apply(this,arguments)}function K_(){return K_=Xe(pe().mark((function e(t,n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.abrupt("return",lb(r.localStore,n).then((function(e){return M_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e,t,n,r){return W_.apply(this,arguments)}function W_(){return W_=Xe(pe().mark((function e(t,n,r,i){var a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gd(t),e.next=3,function(e,t){var n=Gd(e),r=Gd(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):dg.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,kw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(N_(a,n,i||null),A_(a,n),function(e,t){Gd(Gd(e).Bs)._n(t)}(a.localStore,n)):zd();case 11:return e.next=13,M_(a,o);case 13:e.next=16;break;case 15:Vd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function H_(e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rx(r=Gd(t)),ix(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Y_(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,Lw(r.remoteStore,!0);case 9:o=ne(a);try{for(o.s();!(u=o.n()).done;)s=u.value,nw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],l=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return R_(r,t),ob(r.localStore,t,!0)})),rw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Y_(r,c);case 21:return function(e){var t=Gd(e);t.ra.forEach((function(e,n){rw(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new My(Dp.comparator)}(r),r.ha=!1,e.next=25,Lw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t,n){return $_.apply(this,arguments)}function $_(){return $_=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Gd(t),a=[],o=[],u=ne(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.na.get(c))||0===f.length){e.next=34;break}return e.next=11,ab(i.localStore,zv(f[0]));case 11:l=e.sent,h=ne(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ea.get(p),e.next=20,B_(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,cb(i.localStore,c);case 36:return m=e.sent,e.next=39,ab(i.localStore,m);case 39:return l=e.sent,e.next=42,h_(i,X_(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),$_.apply(this,arguments)}function X_(e){return Lv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function J_(e){var t=Gd(e);return Gd(Gd(t.localStore).persistence).Fs()}function Z_(e,t,n,r){return ex.apply(this,arguments)}function ex(){return ex=Xe(pe().mark((function e(t,n,r,i){var a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Gd(t)).ha){e.next=3;break}return e.abrupt("return",void Vd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,lb(a.localStore,Yv(o[0]));case 10:return u=e.sent,s=Jy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,M_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ob(a.localStore,n,!0);case 17:return R_(a,n,i),e.abrupt("break",20);case 19:zd();case 20:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t,n){return nx.apply(this,arguments)}function nx(){return nx=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=rx(t)).ha){e.next=45;break}a=ne(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return Vd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,cb(i.localStore,u);case 12:return s=e.sent,e.next=15,ab(i.localStore,s);case 15:return c=e.sent,e.next=18,h_(i,X_(s),c.targetId,!1);case 18:nw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ne(r),e.prev=30,h=pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,ob(i.localStore,t,!1).then((function(){rw(i.remoteStore,t),R_(i,t)})).catch(Ik);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),nx.apply(this,arguments)}function rx(e){var t=Gd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=g_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=j_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=w_.bind(null,t),t.ta.Qo=$w.bind(null,t.eventManager),t.ta.fa=Xw.bind(null,t.eventManager),t}function ix(e){var t=Gd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=x_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=S_.bind(null,t),t}function ax(e,t,n){var r=Gd(e);(function(){var e=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Gd(e),r=dm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(r_(i)),a=new n_(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,M_(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=Gd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Bd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ox=function(){function e(){Z(this,e),this.synchronizeTabs=!1}return te(e,[{key:"initialize",value:function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Kb(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return Xk(this.persistence,new Yk,e.initialUser,this.M)}},{key:"wa",value:function(e){return new Ib(Tb.zi,this.M)}},{key:"_a",value:function(e){return new Mb}},{key:"terminate",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ux=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return te(n,[{key:"initialize",value:function(){var e=Xe(pe().mark((function e(t){var r=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(oe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,ix(this.ya.syncEngine);case 6:return e.next=8,kw(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return Xk(this.persistence,new Yk,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Ck(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=Wk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?fk.withCacheSize(this.cacheSizeBytes):fk.DEFAULT;return new zk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,qb(),zb(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new Mb}}]),n}(ox),sx=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return te(n,[{key:"initialize",value:function(){var e=Xe(pe().mark((function e(t){var r,i=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(oe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof Lb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:G_.bind(null,r),Or:Z_.bind(null,r),Fr:tx.bind(null,r),Fs:J_.bind(null,r),kr:z_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H_(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=qb();if(!Lb.vt(t))throw new Hd(Wd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Wk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ux),cx=function(){function e(){Z(this,e)}return te(e,[{key:"initialize",value:function(){var e=Xe(pe().mark((function e(t,n){var r=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return b_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=U_.bind(null,this.syncEngine),e.next=12,Lw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Gw}},{key:"createDatastore",value:function(e){var t,n=Kb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Bb(t));return function(e,t,n,r){return new Yb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return b_(o.syncEngine,e,0)},a=Ub.vt()?new Ub:new Fb,new Xb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new c_(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gd(t),Vd("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,ew(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function lx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Xe(pe().mark((function r(){var i;return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var fx=function(){function e(t){Z(this,e),this.observer=t,this.muted=!1}return te(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),hx=function(){function e(t,n){var r=this;Z(this,e),this.Ta=t,this.M=n,this.metadata=new Qd,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return te(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=Xe(pe().mark((function e(){var t,n,r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new e_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=Xe(pe().mark((function e(){var t,n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=Xe(pe().mark((function e(){var t,n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),dx=function(){function e(t){Z(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return te(e,[{key:"lookup",value:function(){var e=Xe(pe().mark((function e(t){var n,r=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Hd(Wd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Xe(pe().mark((function e(t,n){var r,i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=bm(r.M)+"/documents",a={documents:n.map((function(e){return ym(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Im(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Kd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ny(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Xe(pe().mark((function e(){var t,n=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Dp.fromPath(t);n.mutations.push(new Ry(r,n.precondition(r)))})),e.next=7,function(){var e=Xe(pe().mark((function e(t,n){var r,i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=bm(r.M)+"/documents",a={writes:n.map((function(e){return Sm(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zd();t=lp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hd(Wd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vy.updateTime(t):vy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(lp.min()))throw new Hd(Wd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vy.updateTime(t)}return vy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),px=function(){function e(t,n,r,i){Z(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Gb(this.asyncQueue,"transaction_retry")}return te(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(Xe(pe().mark((function t(){var n,r;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new dx(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!Ap(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Py(t)}return!1}}]),e}(),vx=function(){function e(t,n,r,i){var a=this;Z(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ld.UNAUTHENTICATED,this.clientId=ap.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Vd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return te(e,[{key:"getConfiguration",value:function(){var e=Xe(pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hd(Wd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Xe(pe().mark((function n(){var r;return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=jw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function yx(e,t){return mx.apply(this,arguments)}function mx(){return mx=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Vd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Jk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function gx(e,t){return kx.apply(this,arguments)}function kx(){return kx=Xe(pe().mark((function e(t,n){var r,i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,bx(t);case 3:return r=e.sent,Vd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Pw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Pw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function bx(e){return wx.apply(this,arguments)}function wx(){return wx=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Vd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,yx(t,new ox);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function _x(e){return xx.apply(this,arguments)}function xx(){return xx=Xe(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Vd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,gx(t,new cx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(e){return bx(e).then((function(e){return e.persistence}))}function Sx(e){return bx(e).then((function(e){return e.localStore}))}function Tx(e){return _x(e).then((function(e){return e.remoteStore}))}function Ex(e){return _x(e).then((function(e){return e.syncEngine}))}function Cx(e){return Ax.apply(this,arguments)}function Ax(){return Ax=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_x(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=l_.bind(null,n.syncEngine),r.onUnlisten=p_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Nx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function i(){return pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new fx({next:function(a){t.enqueueAndForget((function(){return Qw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Hd(Wd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Hd(Wd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Zw(Mv(n.path),a,{includeMetadataChanges:!0,Cu:!0});return Ww(e,o)},i.next=3,Cx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Rx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function i(){return pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new fx({next:function(n){t.enqueueAndForget((function(){return Qw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hd(Wd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Zw(n,a,{includeMetadataChanges:!0,Cu:!0});return Ww(e,o)},i.next=3,Cx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Dx=new Map;function Px(e,t,n){if(!n)throw new Hd(Wd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ox(e,t,n,r){if(!0===t&&!0===r)throw new Hd(Wd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Lx(e){if(!Dp.isDocumentKey(e))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Mx(e){if(Dp.isDocumentKey(e))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":zd()}function Ux(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hd(Wd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fx(e);throw new Hd(Wd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Vx(e,t){if(t<=0)throw new Hd(Wd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var jx=function(){function e(t){var n;if(Z(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hd(Wd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hd(Wd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ox("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return te(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Bx=function(){function e(t,n,r){Z(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1,t instanceof Cp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hd(Wd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cp(e.options.projectId)}(t))}return te(e,[{key:"app",get:function(){if(!this._app)throw new Hd(Wd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hd(Wd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $d;switch(e.type){case"gapi":var t=e.client;return Kd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ep(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Hd(Wd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Dx.get(e);t&&(Vd("ComponentProvider","Removing Datastore"),Dx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function qx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ux(e,Bx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Bd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ld.MOCK_USER;else{o=we(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Hd(Wd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ld(s)}e._authCredentials=new Xd(new Yd(o,u))}}var zx=function(){function e(t,n,r){Z(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return te(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Gx(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Kx=function(){function e(t,n,r){Z(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return te(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Gx=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,e,r,Mv(i)))._path=i,a.type="collection",a}return te(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new zx(this.firestore,null,new Dp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Kx);function Wx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qe(e),Px("collection","path",t),e instanceof Bx){var a=vp.fromString.apply(vp,[t].concat(r));return Mx(a),new Gx(e,null,a)}if(!(e instanceof zx||e instanceof Gx))throw new Hd(Wd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(vp.fromString.apply(vp,[t].concat(r)));return Mx(o),new Gx(e.firestore,null,o)}function Hx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qe(e),1===arguments.length&&(t=ap.R()),Px("doc","path",t),e instanceof Bx){var a=vp.fromString.apply(vp,[t].concat(r));return Lx(a),new zx(e,null,new Dp(a))}if(!(e instanceof zx||e instanceof Gx))throw new Hd(Wd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(vp.fromString.apply(vp,[t].concat(r)));return Lx(o),new zx(e.firestore,e instanceof Gx?e.converter:null,new Dp(o))}function Qx(e,t){return e=qe(e),t=qe(t),(e instanceof zx||e instanceof Gx)&&(t instanceof zx||t instanceof Gx)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Yx(e,t){return e=qe(e),t=qe(t),e instanceof Kx&&t instanceof Kx&&e.firestore===t.firestore&&Gv(e._query,t._query)&&e.converter===t.converter}var $x=function(){function e(){var t=this;Z(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Gb(this,"async_queue_retry"),this.qa=function(){var e=zb();e&&Vd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=zb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return te(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=zb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new Qd;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=Xe(pe().mark((function e(){var t=this;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),gg(e.t0)){e.next=12;break}throw e.t0;case 12:Vd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=Vw.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&zd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=ne(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ne(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function Xx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ne(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Jx=function(){function e(){Z(this,e),this._progressObserver={},this._taskCompletionResolver=new Qd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return te(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Zx=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new $x,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return te(n,[{key:"_terminate",value:function(){return this._firestoreClient||tI(this),this._firestoreClient.terminate()}}]),n}(Bx);function eI(e){return e._firestoreClient||tI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ep(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new vx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function nI(e,t,n){var r=new Qd;return e.asyncQueue.enqueue(Xe(pe().mark((function i(){return pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,yx(e,n);case 3:return i.next=5,gx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Wd.FAILED_PRECONDITION||e.code===Wd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function rI(e){return function(e){return e.asyncQueue.enqueue(Xe(pe().mark((function t(){var n,r;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ix(e);case 2:return n=t.sent,t.next=5,Tx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Gd(e);return t.fu.delete(0),Jb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(eI(e=Ux(e,Zx)))}function iI(e){return function(e){return e.asyncQueue.enqueue(Xe(pe().mark((function t(){var n,r;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ix(e);case 2:return n=t.sent,t.next=5,Tx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gd(t)).fu.add(0),e.next=4,ew(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(eI(e=Ux(e,Zx)))}function aI(e,t){var n=eI(e=Ux(e,Zx)),r=new Jx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new hx(e,t)}(function(e,t){if(e instanceof Uint8Array)return lx(e,t);if(e instanceof ArrayBuffer)return lx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Kb(t));e.asyncQueue.enqueueAndForget(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ax,t.next=3,Ex(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function oI(e,t){return function(e,t){return e.asyncQueue.enqueue(Xe(pe().mark((function n(){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Gd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Sx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(eI(e=Ux(e,Zx)),t).then((function(t){return t?new Kx(e,null,t.query):null}))}function uI(e){if(e._initialized||e._terminated)throw new Hd(Wd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sI=function(){function e(){Z(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mp(n)}return te(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var cI=function(){function e(t){Z(this,e),this._byteString=t}return te(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(kp.fromBase64String(t))}catch(t){throw new Hd(Wd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(kp.fromUint8Array(t))}}]),e}(),lI=te((function e(t){Z(this,e),this._methodName=t})),fI=function(){function e(t,n){if(Z(this,e),!isFinite(t)||t<-90||t>90)throw new Hd(Wd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hd(Wd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return te(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return op(this._lat,e._lat)||op(this._long,e._long)}}]),e}(),hI=/^__.*__$/,dI=function(){function e(t,n,r){Z(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return te(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Iy(e,this.data,this.fieldMask,t,this.fieldTransforms):new xy(e,this.data,t,this.fieldTransforms)}}]),e}(),pI=function(){function e(t,n,r){Z(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return te(e,[{key:"toMutation",value:function(e,t){return new Iy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function vI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zd()}}var yI=function(){function e(t,n,r,i,a,o){Z(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return te(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return MI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(vI(this.Xa)&&hI.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),mI=function(){function e(t,n,r){Z(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Kb(t)}return te(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yI({Xa:e,methodName:t,uc:n,path:mp.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function gI(e){var t=e._freezeSettings(),n=Kb(e._databaseId);return new mI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);DI("Data must be an object, but it was:",o,r);var u,s,c=NI(r,o);if(a.merge)u=new gp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ne(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=PI(t,d,n);if(!o.contains(p))throw new Hd(Wd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));FI(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new gp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new dI(new ev(c),u,s)}var bI=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lI);function wI(e,t,n){return new yI({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var _I=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"_toFieldTransform",value:function(e){return new dy(e.path,new ay)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lI),xI=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e)).cc=r,i}return te(n,[{key:"_toFieldTransform",value:function(e){var t=wI(this,e,!0),n=this.cc.map((function(e){return AI(e,t)})),r=new oy(n);return new dy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lI),II=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e)).cc=r,i}return te(n,[{key:"_toFieldTransform",value:function(e){var t=wI(this,e,!0),n=this.cc.map((function(e){return AI(e,t)})),r=new sy(n);return new dy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lI),SI=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e)).hc=r,i}return te(n,[{key:"_toFieldTransform",value:function(e){var t=new ly(e.M,ey(e.M,this.hc));return new dy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lI);function TI(e,t,n,r){var i=e.ac(1,t,n);DI("Data must be an object, but it was:",i,r);var a=[],o=ev.empty();hp(r,(function(e,r){var u=LI(t,e,n);r=qe(r);var s=i.sc(u);if(r instanceof bI)a.push(u);else{var c=AI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new gp(a);return new pI(o,u,i.fieldTransforms)}function EI(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[PI(t,r,n)],s=[i];if(a.length%2!=0)throw new Hd(Wd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(PI(t,a[c])),s.push(a[c+1]);for(var l=[],f=ev.empty(),h=u.length-1;h>=0;--h)if(!FI(l,u[h])){var d=u[h],p=s[h];p=qe(p);var v=o.sc(d);if(p instanceof bI)l.push(d);else{var y=AI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new gp(l);return new pI(f,m,o.fieldTransforms)}function CI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return AI(n,e.ac(r?4:3,t))}function AI(e,t){if(RI(e=qe(e)))return DI("Unsupported field value:",t,e),NI(e,t);if(e instanceof lI)return function(e,t){if(!vI(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ne(e);try{for(a.s();!(n=a.n()).done;){var o=AI(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=qe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ey(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=cp.fromDate(e);return{timestampValue:lm(t.M,n)}}if(e instanceof cp){var r=new cp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lm(t.M,r)}}if(e instanceof fI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cI)return{bytesValue:fm(t.M,e._byteString)};if(e instanceof zx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:pm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(Fx(e)))}(e,t)}function NI(e,t){var n={};return dp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hp(e,(function(e,r){var i=AI(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function RI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof cp||e instanceof fI||e instanceof cI||e instanceof zx||e instanceof lI)}function DI(e,t,n){if(!RI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Fx(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function PI(e,t,n){if((t=qe(t))instanceof sI)return t._internalPath;if("string"==typeof t)return LI(e,t);throw MI("Field path arguments must be of type string or ",e,!1,void 0,n)}var OI=new RegExp("[~\\*/\\[\\]]");function LI(e,t,n){if(t.search(OI)>=0)throw MI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return fe(sI,Ye(t.split(".")))._internalPath}catch(r){throw MI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function MI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Hd(Wd.INVALID_ARGUMENT,u+e+s)}function FI(e,t){return e.some((function(e){return e.isEqual(t)}))}var UI=function(){function e(t,n,r,i,a){Z(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return te(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new zx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),VI=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"data",value:function(){return sn(oe(n.prototype),"data",this).call(this)}}]),n}(UI);function jI(e,t){return"string"==typeof t?LI(e,t):t instanceof sI?t._internalPath:t._delegate._internalPath}var BI=function(){function e(t,n){Z(this,e),this.hasPendingWrites=t,this.fromCache=n}return te(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),qI=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o,u){var s;return Z(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return te(n,[{key:"exists",value:function(){return sn(oe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new zI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(UI),zI=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return sn(oe(n.prototype),"data",this).call(this,e)}}]),n}(qI),KI=function(){function e(t,n,r,i){Z(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new BI(i.hasPendingWrites,i.fromCache),this.query=r}return te(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new zI(n._firestore,n._userDataWriter,r.key,r,new BI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Hd(Wd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new zI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new BI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new zI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new BI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:GI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function GI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zd()}}function WI(e,t){return e instanceof qI&&t instanceof qI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof KI&&t instanceof KI&&e._firestore===t._firestore&&Yx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function HI(e){if(Uv(e)&&0===e.explicitOrderBy.length)throw new Hd(Wd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var QI=te((function e(){Z(this,e)}));function YI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var $I=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return te(n,[{key:"_apply",value:function(e){var t=gI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){uS(o,a);var s,c=[],l=ne(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(oS(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=oS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||uS(o,a),u=CI(n,"where",o,"in"===a||"not-in"===a);var h=bv.create(i,a,u);return function(e,t){if(t.S()){var n=jv(e);if(null!==n&&!n.isEqual(t.field))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Vv(e);null!==r&&sS(e,t.field,r)}var i=function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Kx(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ov(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(QI);var XI=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return te(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Nv(t,n);return function(e,t){if(null===Vv(e)){var n=jv(e);null!==n&&sS(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new Kx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ov(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(QI);var JI=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return te(n,[{key:"_apply",value:function(e){return new Kx(e.firestore,e.converter,Kv(e._query,this.wc,this.mc))}}]),n}(QI);var ZI=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return te(n,[{key:"_apply",value:function(e){var t=aS(e,this.type,this.gc,this.yc);return new Kx(e.firestore,e.converter,function(e,t){return new Ov(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(QI);function eS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("startAt",t,!0)}function tS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("startAfter",t,!1)}var nS=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return te(n,[{key:"_apply",value:function(e){var t=aS(e,this.type,this.gc,this.yc);return new Kx(e.firestore,e.converter,function(e,t){return new Ov(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(QI);function rS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nS("endBefore",t,!1)}function iS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nS("endAt",t,!0)}function aS(e,t,n,r){if(n[0]=qe(n[0]),n[0]instanceof UI)return function(e,t,n,r,i){if(!r)throw new Hd(Wd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ne(qv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(qp(t,r.key));else{var c=r.data.field(s.field);if(Ip(c))throw new Hd(Wd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Av(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=gI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Hd(Wd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Bv(e)&&-1!==c.indexOf("/"))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(vp.fromString(c));if(!Dp.isDocumentKey(l))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Dp(l);u.push(qp(t,f))}else{var h=CI(n,r,c);u.push(h)}}return new Av(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function oS(e,t,n){if("string"==typeof(n=qe(n))){if(""===n)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(t)&&-1!==n.indexOf("/"))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(vp.fromString(n));if(!Dp.isDocumentKey(r))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qp(e,new Dp(r))}if(n instanceof zx)return qp(e,n._key);throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Fx(n),"."))}function uS(e,t){if(!Array.isArray(e)||0===e.length)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function sS(e,t,n){if(!n.isEqual(t))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var cS=function(){function e(){Z(this,e)}return te(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Lp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _p(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return hp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new fI(_p(e.latitude),_p(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Sp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=wp(e);return new cp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=vp.fromString(e);Kd(Um(n));var r=new Cp(n.get(1),n.get(3)),i=new Dp(n.popFirst(5));return r.isEqual(t)||jd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function lS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var fS=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).firestore=e,r}return te(n,[{key:"convertBytes",value:function(e){return new cI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new zx(this.firestore,null,t)}}]),n}(cS),hS=function(){function e(t,n){Z(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gI(t)}return te(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dS(e,this._firestore),i=lS(r.converter,t,n),a=kI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,vy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=qe(t))||t instanceof sI?EI(this._dataReader,"WriteBatch.update",i._key,t,n,o):TI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,vy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dS(e,this._firestore);return this._mutations=this._mutations.concat(new Ny(t._key,vy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Hd(Wd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dS(e,t){if((e=qe(e)).firestore!==t)throw new Hd(Wd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pS=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).firestore=e,r}return te(n,[{key:"convertBytes",value:function(e){return new cI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new zx(this.firestore,null,t)}}]),n}(cS);function vS(e){e=Ux(e,zx);var t=Ux(e.firestore,Zx),n=eI(t),r=new pS(t);return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function r(){return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Xe(pe().mark((function e(t,n,r){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Gd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Hd(Wd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=jw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Sx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new qI(t,r,e._key,n,new BI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function yS(e){e=Ux(e,Kx);var t=Ux(e.firestore,Zx),n=eI(t),r=new pS(t);return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function r(){return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Xe(pe().mark((function e(t,n,r){var i,a,o,u,s;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sb(t,n,!0);case 3:i=e.sent,a=new o_(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=jw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Sx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new KI(t,r,e,n)}))}function mS(e,t,n){e=Ux(e,zx);var r=Ux(e.firestore,Zx),i=lS(e.converter,t,n);return wS(r,[kI(gI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,vy.none())])}function gS(e,t,n){e=Ux(e,zx);for(var r=Ux(e.firestore,Zx),i=gI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return wS(r,[("string"==typeof(t=qe(t))||t instanceof sI?EI(i,"updateDoc",e._key,t,n,o):TI(i,"updateDoc",e._key,t)).toMutation(e._key,vy.exists(!0))])}function kS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=qe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Xx(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Xx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof zx)l=Ux(e.firestore,Zx),f=Mv(e._key.path),c={next:function(t){n[s]&&n[s](_S(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Ux(e,Kx);l=Ux(p.firestore,Zx),f=p._query;var v=new pS(l);c={next:function(e){n[s]&&n[s](new KI(l,v,p,e))},error:n[s+1],complete:n[s+2]},HI(e._query)}return function(e,t,n,r){var i=new fx(r),a=new Zw(t,i,n);return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ww,t.next=3,Cx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Qw,t.next=3,Cx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(eI(l),f,h,c)}function bS(e,t){return function(e,t){var n=new fx(t);return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gd(e).Eu.add(t),t.next()},t.next=3,Cx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(Xe(pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gd(e).Eu.delete(t)},t.next=3,Cx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(eI(e=Ux(e,Zx)),Xx(t)?t:{next:t})}function wS(e,t){return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function r(){return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=y_,r.next=3,Ex(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(eI(e),t)}function _S(e,t,n){var r=n.docs.get(t._key),i=new pS(e);return new qI(e,i,t._key,r,new BI(n.hasPendingWrites,n.fromCache),t.converter)}var xS=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r))._firestore=e,i}return te(n,[{key:"get",value:function(e){var t=this,r=dS(e,this._firestore),i=new pS(this._firestore);return sn(oe(n.prototype),"get",this).call(this,e).then((function(e){return new qI(t._firestore,i,r._key,e._document,new BI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Z(this,e),this._firestore=t,this._transaction=n,this._dataReader=gI(t)}return te(e,[{key:"get",value:function(e){var t=this,n=dS(e,this._firestore),r=new fS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return zd();var i=e[0];if(i.isFoundDocument())return new UI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new UI(t._firestore,r,n._key,null,n.converter);throw zd()}))}},{key:"set",value:function(e,t,n){var r=dS(e,this._firestore),i=lS(r.converter,t,n),a=kI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=qe(t))||t instanceof sI?EI(this._dataReader,"Transaction.update",i._key,t,n,o):TI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function IS(e,t){return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function r(){var i;return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return _x(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new px(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(eI(e=Ux(e,Zx)),(function(n){return t(new xS(e,n))}))}function SS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xI("arrayUnion",t)}function TS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new II("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Md=e}(At),_t(new Je("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Zx(i,new Jd(e.getProvider("auth-internal")),new np(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Lt(Od,"3.4.8",e),Lt(Od,"3.4.8","esm2017")}();function ES(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Hd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function CS(){if("undefined"===typeof Uint8Array)throw new Hd("unimplemented","Uint8Arrays are not available in this environment.")}function AS(){if("undefined"==typeof atob)throw new Hd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var NS=function(){function e(t){Z(this,e),this._delegate=t}return te(e,[{key:"toBase64",value:function(){return AS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return CS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return AS(),new e(cI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return CS(),new e(cI.fromUint8Array(t))}}]),e}();function RS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ne(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var DS=function(){function e(){Z(this,e)}return te(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){uI(e=Ux(e,Zx));var n=eI(e),r=e._freezeSettings(),i=new cx;return nI(n,i,new ux(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){uI(e=Ux(e,Zx));var t=eI(e),n=e._freezeSettings(),r=new cx;return nI(t,r,new sx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Hd(Wd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qd;return e._queue.enqueueAndForgetEvenWhileRestricted(Xe(pe().mark((function n(){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Xe(pe().mark((function e(t){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vg.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,vg.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Wk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),PS=function(){function e(t,n,r){var i=this;Z(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Cp||(this._appCompat=t)}return te(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Bd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return rI(this._delegate)}},{key:"disableNetwork",value:function(){return iI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Ox("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Qd;return e.asyncQueue.enqueueAndForget(Xe(pe().mark((function n(){return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=E_,n.next=3,Ex(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(eI(e=Ux(e,Zx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return bS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Hd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new HS(this,Wx(this._delegate,e))}catch(t){throw VS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new US(this,Hx(this._delegate,e))}catch(t){throw VS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new KS(this,function(e,t){if(e=Ux(e,Bx),Px("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Kx(e,null,function(e){return new Ov(vp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw VS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return IS(this._delegate,(function(n){return e(new LS(t,n))}))}},{key:"batch",value:function(){var e=this;return eI(this._delegate),new MS(new hS(this._delegate,(function(t){return wS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return aI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return oI(this._delegate,e).then((function(e){return e?new KS(t,e):null}))}}]),e}(),OS=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).firestore=e,r}return te(n,[{key:"convertBytes",value:function(e){return new NS(new cI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return US.forKey(t,this.firestore,null)}}]),n}(cS);var LS=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new OS(t)}return te(e,[{key:"get",value:function(e){var t=this,n=QS(e);return this._delegate.get(n).then((function(e){return new qS(t._firestore,new qI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=QS(e);return n?(ES("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=QS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=QS(e);return this._delegate.delete(t),this}}]),e}(),MS=function(){function e(t){Z(this,e),this._delegate=t}return te(e,[{key:"set",value:function(e,t,n){var r=QS(e);return n?(ES("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=QS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=QS(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),FS=function(){function e(t,n,r){Z(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return te(e,[{key:"fromFirestore",value:function(e,t){var n=new zI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new OS(t),n),i.set(n,a)),a}}]),e}();FS.INSTANCES=new WeakMap;var US=function(){function e(t,n){Z(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new OS(t)}return te(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new HS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new HS(this.firestore,Wx(this._delegate,e))}catch(t){throw VS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=qe(e))instanceof zx&&Qx(this._delegate,e)}},{key:"set",value:function(e,t){t=ES("DocumentReference.set",t);try{return t?mS(this._delegate,e,t):mS(this._delegate,e)}catch(n){throw VS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?gS(this._delegate,e):gS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw VS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return wS(Ux(e.firestore,Zx),[new Ny(e._key,vy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=jS(n),a=BS(n,(function(t){return new qS(e.firestore,new qI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return kS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ux(e,zx);var t=Ux(e.firestore,Zx);return Nx(eI(t),e._key,{source:"server"}).then((function(n){return _S(t,e,n)}))}(this._delegate):function(e){e=Ux(e,zx);var t=Ux(e.firestore,Zx);return Nx(eI(t),e._key).then((function(n){return _S(t,e,n)}))}(this._delegate),t.then((function(e){return new qS(n.firestore,new qI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(FS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Hd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new zx(n._delegate,r,new Dp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new zx(n._delegate,r,t))}}]),e}();function VS(e,t,n){return e.message=e.message.replace(t,n),e}function jS(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!RS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function BS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=RS(e[0])?e[0]:RS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qS=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n}return te(e,[{key:"ref",get:function(){return new US(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return WI(this._delegate,e._delegate)}}]),e}(),zS=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||zd()}(void 0!==t),t}}]),n}(qS),KS=function(){function e(t,n){Z(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new OS(t)}return te(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,YI(this._delegate,function(e,t,n){var r=t,i=jI("where",e);return new $I(i,r,n)}(t,n,r)))}catch(i){throw VS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,YI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jI("orderBy",e);return new XI(n,t)}(t,n)))}catch(r){throw VS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,YI(this._delegate,function(e){return Vx("limit",e),new JI("limit",e,"F")}(t)))}catch(n){throw VS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,YI(this._delegate,function(e){return Vx("limitToLast",e),new JI("limitToLast",e,"L")}(t)))}catch(n){throw VS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,YI(this._delegate,eS.apply(void 0,arguments)))}catch(t){throw VS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,YI(this._delegate,tS.apply(void 0,arguments)))}catch(t){throw VS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,YI(this._delegate,rS.apply(void 0,arguments)))}catch(t){throw VS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,YI(this._delegate,iS.apply(void 0,arguments)))}catch(t){throw VS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Yx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?yS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ux(e,Kx);var t=Ux(e.firestore,Zx),n=eI(t),r=new pS(t);return Rx(n,e._query,{source:"server"}).then((function(n){return new KI(t,r,e,n)}))}(this._delegate):function(e){e=Ux(e,Kx);var t=Ux(e.firestore,Zx),n=eI(t),r=new pS(t);return HI(e._query),Rx(n,e._query).then((function(n){return new KI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new WS(n.firestore,new KI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=jS(n),a=BS(n,(function(t){return new WS(e.firestore,new KI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return kS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(FS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),GS=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n}return te(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new zS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),WS=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n}return te(e,[{key:"query",get:function(){return new KS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new zS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new GS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new zS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return WI(this._delegate,e._delegate)}}]),e}(),HS=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return te(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new US(this.firestore,e):null}},{key:"doc",value:function(e){try{return new US(this.firestore,void 0===e?Hx(this._delegate):Hx(this._delegate,e))}catch(t){throw VS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ux(e.firestore,Zx),r=Hx(e),i=lS(e.converter,t);return wS(n,[kI(gI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,vy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new US(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Qx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(FS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(KS);function QS(e){return Ux(e,zx)}var YS=function(){function e(){Z(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=fe(sI,n)}return te(e,[{key:"isEqual",value:function(e){return(e=qe(e))instanceof sI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(mp.keyField().canonicalString())}}]),e}(),$S=function(){function e(t){Z(this,e),this._delegate=t}return te(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new _I("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new bI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=SS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=TS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new SI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),XS={Firestore:PS,GeoPoint:fI,Timestamp:cp,Blob:NS,Transaction:LS,WriteBatch:MS,DocumentReference:US,DocumentSnapshot:qS,Query:KS,QueryDocumentSnapshot:zS,QuerySnapshot:WS,CollectionReference:HS,FieldPath:YS,FieldValue:$S,setLogLevel:function(e){!function(e){Fd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Je("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},XS)))}(e,(function(e,t){return new PS(e,t,new DS)})),e.registerVersion("@firebase/firestore-compat","0.1.17")}(on);var JS="firebasestorage.googleapis.com",ZS=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,eT(e),"Firebase Storage: ".concat(r," (").concat(eT(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(re(i),n.prototype),i}return te(n,[{key:"_codeEquals",value:function(e){return eT(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ae);function eT(e){return"storage/"+e}function tT(){return new ZS("unknown","An unknown error occurred, please check the error payload for server response.")}function nT(){return new ZS("canceled","User canceled the upload/download.")}function rT(){return new ZS("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iT(e){return new ZS("invalid-argument",e)}function aT(){return new ZS("app-deleted","The Firebase app was deleted.")}function oT(e){return new ZS("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uT(e,t){return new ZS("invalid-format","String does not match format '"+e+"': "+t)}function sT(e){throw new ZS("internal-error","Internal error: "+e)}var cT,lT=function(){function e(t,n){Z(this,e),this.bucket=t,this.path_=n}return te(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new ZS("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===JS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new ZS("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),fT=function(){function e(t){Z(this,e),this.promise_=Promise.reject(t)}return te(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function hT(e){return"string"===typeof e||e instanceof String}function dT(e){return pT()&&e instanceof Blob}function pT(){return"undefined"!==typeof Blob}function vT(e,t,n,r){if(r<t)throw iT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw iT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function yT(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function mT(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(cT||(cT={}));var gT=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;Z(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return te(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=tT();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?aT():nT());else i(new ZS("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new kT(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new kT(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===cT.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new kT(o,r))}else{var u=r.getErrorCode()===cT.ABORT;t(!1,new kT(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),kT=te((function e(t,n,r){Z(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function bT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function wT(){for(var e=bT(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(pT())return new Blob(n);throw new ZS("unsupported-environment","This browser doesn't seem to support creating Blobs")}var _T={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},xT=te((function e(t,n){Z(this,e),this.data=t,this.contentType=n||null}));function IT(e,t){switch(e){case _T.RAW:return new xT(ST(t));case _T.BASE64:case _T.BASE64URL:return new xT(TT(e,t));case _T.DATA_URL:return new xT(function(e){var t=new ET(e);return t.base64?TT(_T.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw uT(_T.DATA_URL,"Malformed data URL.")}return ST(t)}(t.rest)}(t),new ET(t).contentType)}throw tT()}function ST(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function TT(e,t){switch(e){case _T.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw uT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _T.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw uT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw uT(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var ET=te((function e(t){Z(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw uT(_T.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var CT=function(){function e(t,n){Z(this,e);var r=0,i="";dT(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return te(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(dT(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(pT()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(wT.apply(null,i))}var a=n.map((function(e){return hT(e)?IT(_T.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function AT(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function NT(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function RT(e,t){return t}var DT=te((function e(t,n,r,i){Z(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||RT})),PT=null;function OT(){if(PT)return PT;var e=[];e.push(new DT("bucket")),e.push(new DT("generation")),e.push(new DT("metageneration")),e.push(new DT("name","fullPath",!0));var t=new DT("name");t.xform=function(e,t){return function(e){return!hT(e)||e.length<2?e:NT(e)}(t)},e.push(t);var n=new DT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new DT("timeCreated")),e.push(new DT("updated")),e.push(new DT("md5Hash",null,!0)),e.push(new DT("cacheControl",null,!0)),e.push(new DT("contentDisposition",null,!0)),e.push(new DT("contentEncoding",null,!0)),e.push(new DT("contentLanguage",null,!0)),e.push(new DT("contentType",null,!0)),e.push(new DT("metadata","customMetadata",!0)),PT=e}function LT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new lT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function MT(e,t,n){var r=AT(t);return null===r?null:LT(e,r,n)}function FT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function UT(e,t,n){var r=AT(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=ne(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new lT(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=ne(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new lT(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var VT=te((function e(t,n,r,i){Z(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function jT(e){if(!e)throw tT()}function BT(e,t){return function(n,r){var i=MT(e,r,t);return jT(null!==i),i}}function qT(e,t){return function(n,r){var i=MT(e,r,t);return jT(null!==i),function(e,t,n,r){var i=AT(t);if(null===i)return null;if(!hT(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return yT("/b/"+o(i)+"/o/"+o(a),n,r)+mT({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function zT(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ZS("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ZS("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new ZS("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ZS("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function KT(e){var t=zT(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new ZS("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function GT(e,t,n){var r=yT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new VT(r,"GET",BT(e,n),i);return a.errorHandler=KT(t),a}function WT(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=yT(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new VT(o,"GET",function(e,t){return function(n,r){var i=UT(e,t,r);return jT(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=zT(t),s}function HT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function QT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=HT(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+FT(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=CT.getBlob(c,r,l);if(null===f)throw rT();var h={name:s.fullPath},d=yT(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new VT(d,"POST",BT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=zT(t),v}var YT=te((function e(t,n,r,i){Z(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function $T(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){jT(!1)}return jT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var XT=262144;function JT(e,t,n,r,i,a,o,u){var s=new YT(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new ZS("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw rT();var v=t.maxUploadRetryTime,y=new VT(n,"POST",(function(e,n){var i,o=$T(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?BT(t,a)(e,n):null,new YT(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=zT(e),y}var ZT={STATE_CHANGED:"state_changed"},eE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tE(e){switch(e){case"running":case"pausing":case"canceling":return eE.RUNNING;case"paused":return eE.PAUSED;case"success":return eE.SUCCESS;case"canceled":return eE.CANCELED;default:return eE.ERROR}}var nE=te((function e(t,n,r){Z(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function rE(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var iE=function(){function e(){var t=this;Z(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cT.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=cT.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=cT.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return te(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw sT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw sT("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw sT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw sT("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw sT("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),aE=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(iE);function oE(){return new aE}var uE=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Z(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=OT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return te(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=HT(t,r,i),u={name:o.fullPath},s=yT(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=FT(o,n),f=e.maxUploadRetryTime,h=new VT(s,"POST",(function(e){var t;$T(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){jT(!1)}return jT(hT(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=zT(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,oE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new VT(n,"POST",(function(e){var t=$T(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){jT(!1)}n||jT(!1);var i=Number(n);return jT(!isNaN(i)),new YT(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=zT(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,oE,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=XT*this._chunkMultiplier,n=new YT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=JT(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,oE,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){XT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=GT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,oE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=QT(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,oE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=nT(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=tE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new nE(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(tE(this._state)){case eE.SUCCESS:rE(this._resolve.bind(null,this.snapshot))();break;case eE.CANCELED:case eE.ERROR:rE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(tE(this._state)){case eE.RUNNING:case eE.PAUSED:e.next&&rE(e.next.bind(e,this.snapshot))();break;case eE.SUCCESS:e.complete&&rE(e.complete.bind(e))();break;default:e.error&&rE(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),sE=function(){function e(t,n){Z(this,e),this._service=t,this._location=n instanceof lT?n:lT.makeFromUrl(n,t.host)}return te(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new lT(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return NT(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new lT(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw oT(e)}}]),e}();function cE(e,t,n){return lE.apply(this,arguments)}function lE(){return(lE=Xe(pe().mark((function e(t,n,r){var i,a,o,u;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,fE(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Ye(u.prefixes)),(a=n.items).push.apply(a,Ye(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,cE(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e,t){null!=t&&"number"===typeof t.maxResults&&vT("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=WT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,oE)}function hE(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=yT(t.fullServerUrl(),e.host,e._protocol),a=FT(n,r),o=e.maxOperationRetryTime,u=new VT(i,"PATCH",BT(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=KT(t),u}(e.storage,e._location,t,OT());return e.storage.makeRequestWithTokens(n,oE)}function dE(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=yT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new VT(r,"GET",qT(e,n),i);return a.errorHandler=KT(t),a}(e.storage,e._location,OT());return e.storage.makeRequestWithTokens(t,oE).then((function(e){if(null===e)throw new ZS("no-download-url","The given file does not have any download URLs.");return e}))}function pE(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=yT(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new VT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=KT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,oE)}function vE(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new lT(e._location.bucket,n);return new sE(e.storage,r)}function yE(e,t){if(e instanceof bE){var n=e;if(null==n._bucket)throw new ZS("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new sE(n,n._bucket);return null!=t?yE(r,t):r}return void 0!==t?vE(e,t):e}function mE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof bE)return new sE(e,t);throw iT("To use ref(service, url), the first argument must be a Storage instance.")}return yE(e,t)}function gE(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:lT.makeFromBucketSpec(n,e)}function kE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:we(i,e.app.options.projectId))}var bE=function(){function e(t,n,r,i,a){Z(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=JS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?lT.makeFromBucketSpec(i,this._host):gE(this._host,this.app.options)}return te(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=lT.makeFromBucketSpec(this._url,e):this._bucket=gE(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){vT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){vT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Xe(pe().mark((function e(){var t,n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Xe(pe().mark((function e(){var t,n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new sE(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new fT(aT());var a=function(e,t,n,r,i,a){var o=mT(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new gT(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=Xe(pe().mark((function e(t,n){var r,i,a,o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),wE="@firebase/storage",_E="0.9.5",xE="storage";function IE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new uE(e,new CT(t),n)}(e=qe(e),t,n)}function SE(e){return function(e){e._throwIfRoot("getMetadata");var t=GT(e.storage,e._location,OT());return e.storage.makeRequestWithTokens(t,oE)}(e=qe(e))}function TE(e){return function(e){var t={prefixes:[],items:[]};return cE(e,t).then((function(){return t}))}(e=qe(e))}function EE(e,t){return mE(e=qe(e),t)}function CE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};kE(e,t,n,r)}function AE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new bE(r,i,a,n,At)}_t(new Je(xE,AE,"PUBLIC").setMultipleInstances(!0)),Lt(wE,_E,""),Lt(wE,_E,"esm2017");var NE=function(){function e(t,n,r){Z(this,e),this._delegate=t,this.task=n,this.ref=r}return te(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),RE=function(){function e(t,n){Z(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return te(e,[{key:"snapshot",get:function(){return new NE(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new NE(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new NE(e,i,i._ref))}:{next:t.next?function(e){return t.next(new NE(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),DE=function(){function e(t,n){Z(this,e),this._delegate=t,this._service=n}return te(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new PE(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new PE(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),PE=function(){function e(t,n){Z(this,e),this._delegate=t,this.storage=n}return te(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return vE(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new RE(IE(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_T.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=IT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new RE(new uE(this._delegate,new CT(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return TE(this._delegate).then((function(t){return new DE(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return fE(e=qe(e),t)}(this._delegate,e||void 0).then((function(e){return new DE(e,t.storage)}))}},{key:"getMetadata",value:function(){return SE(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return hE(e=qe(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return dE(qe(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),pE(qe(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw oT(e)}}]),e}(),OE=function(){function e(t,n){Z(this,e),this.app=t,this._delegate=n}return te(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(LE(e))throw iT("ref() expected a child path but got a URL, use refFromURL instead.");return new PE(EE(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!LE(e))throw iT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lT.makeFromUrl(e,this._delegate.host)}catch(t){throw iT("refFromUrl() expected a valid full URL but got an invalid one.")}return new PE(EE(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};CE(this._delegate,e,t,n)}}]),e}();function LE(e){return/^[A-Za-z]+:\/\//.test(e)}function ME(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new OE(r,i)}!function(e){var t={TaskState:eE,TaskEvent:ZT,StringFormat:_T,Storage:OE,Reference:PE};e.INTERNAL.registerComponent(new Je("storage-compat",ME,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.13")}(on);on.initializeApp({apiKey:"AIzaSyD475cqEFc2Y8t3DJW2-T6UPPats8iuKLo",authDomain:"nwitter-48bcd.firebaseapp.com",projectId:"nwitter-48bcd",storageBucket:"nwitter-48bcd.appspot.com",messagingSenderId:"241562361155",appId:"1:241562361155:web:c807053b56f55a544023f6",measurementId:"G-5CXMSLYRYM"});var FE,UE=on,VE=on.auth(),jE=on.firestore(),BE=on.storage(),qE=n(184),zE=function(e){var t=e.nweetObj,n=e.isOwner,i=c((0,r.useState)(!1),2),a=i[0],o=i[1],u=c((0,r.useState)(t.text),2),s=u[0],l=u[1],f=function(){var e=Xe(pe().mark((function e(){var n;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("\uc815\ub9d0\ub85c \uc774 \uae00\uc744 \uc9c0\uc6b0\uaca0\uc2b5\ub2c8\uae4c?"),console.log(n),!n){e.next=7;break}return e.next=5,jE.doc("nweets/".concat(t.id)).delete();case 5:return e.next=7,BE.refFromURL(t.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){return o((function(e){return!e}))};return(0,qE.jsx)("div",{children:a?(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsxs)("form",{onSubmit:function(e){e.preventDefault(),jE.doc("nweets/".concat(t.id)).update({text:s}),o(!1)},children:[(0,qE.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;l(t)},placeholder:"\uae00\uc744 \uc218\uc815\ud558\uc138\uc694",value:s,required:!0}),(0,qE.jsx)("input",{type:"submit",value:"Update Nweet"})]}),(0,qE.jsx)("button",{onClick:h,children:"Cancel"})]}):(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsx)("h4",{children:t.text}),t.attachmentUrl&&(0,qE.jsx)("img",{src:t.attachmentUrl,width:"100",height:"100"}),n&&(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsx)("button",{onClick:f,children:"Delete Nweet"}),(0,qE.jsx)("button",{onClick:h,children:"Edit Nweet"})]})]})})},KE=new Uint8Array(16);function GE(){if(!FE&&!(FE="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return FE(KE)}var WE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var HE=function(e){return"string"===typeof e&&WE.test(e)},QE=[],YE=0;YE<256;++YE)QE.push((YE+256).toString(16).substr(1));var $E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(QE[e[t+0]]+QE[e[t+1]]+QE[e[t+2]]+QE[e[t+3]]+"-"+QE[e[t+4]]+QE[e[t+5]]+"-"+QE[e[t+6]]+QE[e[t+7]]+"-"+QE[e[t+8]]+QE[e[t+9]]+"-"+QE[e[t+10]]+QE[e[t+11]]+QE[e[t+12]]+QE[e[t+13]]+QE[e[t+14]]+QE[e[t+15]]).toLowerCase();if(!HE(n))throw TypeError("Stringified UUID is invalid");return n};var XE=function(e,t,n){var r=(e=e||{}).random||(e.rng||GE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return $E(r)},JE=function(e){var t=e.userObj,n=c((0,r.useState)(""),2),i=n[0],a=n[1],o=c((0,r.useState)(""),2),u=o[0],s=o[1],l=function(){var e=Xe(pe().mark((function e(n){var r,o,c,l;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r="",""==u){e.next=10;break}return o=BE.ref().child("".concat(t.uid,"/").concat(XE())),e.next=6,o.putString(u,"data_url");case 6:return c=e.sent,e.next=9,c.ref.getDownloadURL();case 9:r=e.sent;case 10:return l={text:i,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:r},e.next=13,jE.collection("nweets").add(l);case 13:a(""),s("");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,qE.jsx)("div",{children:(0,qE.jsxs)("form",{onSubmit:l,children:[(0,qE.jsx)("input",{type:"text",value:i,placeholder:"What's on your mind?",maxLength:120,onChange:function(e){var t=e.target.value;a(t)}}),(0,qE.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;s(t)},n.readAsDataURL(t)}}),(0,qE.jsx)("input",{type:"submit",value:"Nweet"}),u&&(0,qE.jsxs)("div",{children:[(0,qE.jsx)("img",{src:u,width:100,height:100}),(0,qE.jsx)("button",{onClick:function(){s(null)},children:"Clear"})]})]})})},ZE=function(e){var t=e.userObj,n=c((0,r.useState)([]),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){jE.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}))}),[]),(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsx)(JE,{userObj:t}),(0,qE.jsx)("div",{children:i.map((function(e){return(0,qE.jsx)(zE,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},eC=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c((0,r.useState)(!0),2),s=u[0],l=u[1],f=c((0,r.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,r=t.name,i=t.value;"email"===r?n(i):"password"===r&&o(i)},v=function(){var e=Xe(pe().mark((function e(n){var r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!s){e.next=8;break}return e.next=5,VE.createUserWithEmailAndPassword(t,a);case 5:r=e.sent,e.next=10;break;case 8:return e.next=10,VE.signInWithEmailAndPassword(t,a);case 10:console.log(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsxs)("form",{onSubmit:v,children:[(0,qE.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:t,onChange:p}),(0,qE.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:a,onChange:p}),(0,qE.jsx)("input",{type:"submit",value:s?"Create Account":"Log In"})]}),h,(0,qE.jsx)("div",{onClick:function(){return l((function(e){return!e}))},children:s?"Sign in":"Create Account"})]})},tC=function(){var e=function(){var e=Xe(pe().mark((function e(t){var n,r;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new UE.auth.GoogleAuthProvider:"github"===n&&(r=new UE.auth.GithubAuthProvider),e.next=4,VE.signInWithPopup(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsx)(eC,{}),(0,qE.jsx)("button",{onClick:e,name:"google",children:"Continue with Google"}),(0,qE.jsx)("button",{onClick:e,name:"github",children:"Continue with Github"})]})},nC=function(e){var t=e.userObj;return(0,qE.jsx)("nav",{children:(0,qE.jsxs)("ul",{children:[(0,qE.jsx)("li",{children:(0,qE.jsx)($,{to:"/",children:"Home"})}),(0,qE.jsx)("li",{children:(0,qE.jsxs)($,{to:"/profile",children:[t.displayName,"\uc758 My Profile"]})})]})})},rC=function(e){var t=e.refreshUser,n=e.userObj,i=V(),a=c((0,r.useState)(n.displayName),2),o=a[0],u=a[1],s=function(){var e=Xe(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jE.collection("nweets").where("creatorId","==",n.uid).orderBy("createdAt").get();case 2:t=e.sent,console.log(t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){s()}),[]);var l=function(){var e=Xe(pe().mark((function e(r){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n.displayName===o){e.next=5;break}return e.next=4,n.updateProfile({displayName:o});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsxs)("form",{onSubmit:l,children:[(0,qE.jsx)("input",{type:"text",placeholder:"Display Name",value:o,onChange:function(e){var t=e.target.value;u(t)}}),(0,qE.jsx)("input",{type:"submit",value:"Update Profile"})]}),(0,qE.jsx)("button",{onClick:function(){VE.signOut(),i("/")},children:"Log out"})]})},iC=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObj;return console.log(n),(0,qE.jsxs)(Y,{children:[n&&(0,qE.jsx)(nC,{userObj:r}),(0,qE.jsx)(K,{children:n?(0,qE.jsxs)(qE.Fragment,{children:[(0,qE.jsx)(q,{path:"/",element:(0,qE.jsx)(ZE,{userObj:r})}),(0,qE.jsx)(q,{path:"/profile",element:(0,qE.jsx)(rC,{userObj:r,refreshUser:t})})]}):(0,qE.jsx)(q,{path:"/",element:(0,qE.jsx)(tC,{})})})]})};var aC=function(){var e=c((0,r.useState)(!1),2),t=e[0],n=e[1],i=c((0,r.useState)(!1),2),a=i[0],o=i[1],u=c((0,r.useState)(null),2),s=u[0],l=u[1];return(0,r.useEffect)((function(){VE.onAuthStateChanged((function(e){e?(o(!0),l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):o(!1),n(!0)}))}),[]),(0,qE.jsxs)(qE.Fragment,{children:[t?(0,qE.jsx)(iC,{refreshUser:function(){var e=VE.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}),console.log(VE.currentUser)},isLoggedIn:a,userObj:s}):"Initialzing...",(0,qE.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Nwitter. All Right Reserved."]})]})};i.createRoot(document.getElementById("root")).render((0,qE.jsx)(aC,{}))}()}();
//# sourceMappingURL=main.3ec0a4f2.js.map